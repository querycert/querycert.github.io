<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Qcert.CldMR.Lang.CldMR</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Qcert.CldMR.Lang.CldMR</h1>

<div class="code">

<br/>
</div>

<div class="doc">
CldMR is a language to describe chains of Map/Reduce views in the
Cloudant Database, followed by some local computation over the result
of the views. 
<div class="paragraph"> </div>

 Cloudant's notion of 'views' provides some of the capabilities
    that are available in more common Map/Reduce framework such as Hadoop,
    but has a number of different properties. 
<div class="paragraph"> </div>

 Cloudant notion of views is less expressive than general purpose
    Map/Reduce but offers the following additional capabilities:
<ul class="doclist">
<li> Cloudant views can be chained through a special directive called
  dbcopy which creates a new database that can be the input to a
  subsequent Cloudant view.

</li>
<li> Cloudant views are computed in an incremental fashion, i.e., changes
  on the input are propagated with limited recomputation and
  exploiting results from previous executions which are cached. 
</li>
</ul>

<div class="paragraph"> </div>

 To achieve that, Cloudant views relies on a number of invariants,
    which we expose and try to enforce. The most important invariants
    are:
<ul class="doclist">
<li> A <span class="inlinecode"><a class="idref" href="Qcert.Translation.CldMRtoCloudant.html#dbcopy"><span class="id" title="variable">dbcopy</span></a></span> can only be present if a reduce is present as well.

</li>
<li> the result of a <span class="inlinecode"><a class="idref" href="Qcert.Translation.CldMRtoCloudant.html#dbcopy"><span class="id" title="variable">dbcopy</span></a></span> directive is implicitely coerced into a a
  database in the form of key/value pairs, which are used to populate
  the newly created database/view.

</li>
<li> A subsequent map over that dbcopy must access data accordingly (in
  such key/values JSON structure).

</li>
<li> The "reduce" part of Cloudant views is heavily constrained and must
  provide two distinct functions: one called <span class="inlinecode"><a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#reduce"><span class="id" title="variable">reduce</span></a></span>, the other
  called <span class="inlinecode"><span class="id" title="var">rereduce</span></span>. The <span class="inlinecode"><span class="id" title="var">rereduce</span></span> function must be associative and
  commutative.  
</li>
</ul>

<div class="paragraph"> </div>

 Finally, Cloudant views support special purposes reducers for the
most common aggregate functions (count, sum, and average). We provide
a representation to take advantage of those. 
<div class="paragraph"> </div>

 Summary:
<ul class="doclist">
<li> Language: CldMR (Cloudant Map/Reduce)

</li>
<li> Based on: Cloudant DB documentation.

</li>
<li> URL: https://console.ng.bluemix.net/docs/services/Cloudant/api/creating_views.htmlviews-mapreduce-
- Languages translating to CldMR: NNRCMR
- Languages translating from CldMR: Cloudant

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="CldMR"><span class="id" title="section">CldMR</span></a>.<br/>

<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">fruntime</span>:<a class="idref" href="Qcert.Basic.ForeignRuntime.html#foreign_runtime"><span class="id" title="class">foreign_runtime</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">fredop</span>:<a class="idref" href="Qcert.NNRCMR.Lang.ForeignReduceOps.html#foreign_reduce_op"><span class="id" title="class">foreign_reduce_op</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">fcloudant</span>:<a class="idref" href="Qcert.CldMR.Lang.ForeignCloudant.html#foreign_cloudant"><span class="id" title="class">foreign_cloudant</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">h</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a>(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab53"></a><h1 class="section">Abstract Syntax</h1>

<div class="paragraph"> </div>

 As in NNRCMR, all local computation inside the map or the reduce
  in CldMR is described using NNRC expressions. 
<div class="paragraph"> </div>

<a name="lab54"></a><h2 class="section">Map</h2>

<div class="paragraph"> </div>

 The <span class="inlinecode"><a class="idref" href="Qcert.Basic.Util.RBindings.html#map"><span class="id" title="section">map</span></a></span> part of a Cloudant view is described using two
  components:
<ul class="doclist">
<li> a map function which can be either a map or a flat_map, which is
  applied to every document in the input database.

</li>
<li> an emit function which controls the generation of keys passed to the
  reduce. The emit function is either: (i) <span class="inlinecode"><a class="idref" href="Qcert.Compiler.QLib.QData.html#QData.dist"><span class="id" title="section">dist</span></a></span> which creates unique
  id's for the result of the map and results in a distributed
  collection, (ii) <span class="inlinecode"><span class="id" title="var">collect</span></span> which is enforcing accumulation to a
  single output document with a single key. 
</li>
</ul>

<div class="paragraph"> </div>

 Note that as opposed to NNRCMR, the collect is specified in the
  map rather than the reduce, since it has to be controlled through an
  emit. 
<div class="paragraph"> </div>

 Also note that this model does not cover a group-by semantics
  but only simpler forms of reduce. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="cld_map_fun"><span class="id" title="inductive">cld_map_fun</span></a> :=<br/>
&nbsp;&nbsp;| <a name="CldMapId"><span class="id" title="constructor">CldMapId</span></a> : <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map_fun"><span class="id" title="inductive">cld_map_fun</span></a>           <br/>
&nbsp;&nbsp;| <a name="CldMapFlatten"><span class="id" title="constructor">CldMapFlatten</span></a> : <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map_fun"><span class="id" title="inductive">cld_map_fun</span></a>. 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="cld_map_emit"><span class="id" title="inductive">cld_map_emit</span></a> :=<br/>
&nbsp;&nbsp;| <a name="CldEmitDist"><span class="id" title="constructor">CldEmitDist</span></a> : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map_emit"><span class="id" title="inductive">cld_map_emit</span></a>                     <br/>
&nbsp;&nbsp;| <a name="CldEmitCollect"><span class="id" title="constructor">CldEmitCollect</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map_emit"><span class="id" title="inductive">cld_map_emit</span></a>. 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="cld_map"><span class="id" title="record">cld_map</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mkMapCld"><span class="id" title="constructor">mkMapCld</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <a name="map_fun"><span class="id" title="projection">map_fun</span></a>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map_fun"><span class="id" title="inductive">cld_map_fun</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="map_emit"><span class="id" title="projection">map_emit</span></a>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map_emit"><span class="id" title="inductive">cld_map_emit</span></a> }.<br/>

<br/>
</div>

<div class="doc">
<a name="lab55"></a><h2 class="section">Reduce</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="cld_numeric_type"><span class="id" title="inductive">cld_numeric_type</span></a> :=<br/>
&nbsp;&nbsp;| <a name="Cld_int"><span class="id" title="constructor">Cld_int</span></a><br/>
&nbsp;&nbsp;| <a name="Cld_float"><span class="id" title="constructor">Cld_float</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="cld_numeric_type_eqdec"><span class="id" title="instance">cld_numeric_type_eqdec</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.EquivDec.html#EqDec"><span class="id" title="class">EqDec</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_numeric_type"><span class="id" title="inductive">cld_numeric_type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="cld_reduce_op"><span class="id" title="inductive">cld_reduce_op</span></a> :=<br/>
&nbsp;&nbsp;| <a name="CldRedOpCount"><span class="id" title="constructor">CldRedOpCount</span></a> : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_op"><span class="id" title="inductive">cld_reduce_op</span></a>                          <br/>
&nbsp;&nbsp;| <a name="CldRedOpSum"><span class="id" title="constructor">CldRedOpSum</span></a> (<span class="id" title="var">typ</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_numeric_type"><span class="id" title="inductive">cld_numeric_type</span></a>): <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_op"><span class="id" title="inductive">cld_reduce_op</span></a>      <br/>
&nbsp;&nbsp;| <a name="CldRedOpStats"><span class="id" title="constructor">CldRedOpStats</span></a> (<span class="id" title="var">typ</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_numeric_type"><span class="id" title="inductive">cld_numeric_type</span></a>): <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_op"><span class="id" title="inductive">cld_reduce_op</span></a>. 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="cld_reduce_fun"><span class="id" title="inductive">cld_reduce_fun</span></a> :=<br/>
&nbsp;&nbsp;| <a name="CldRedId"><span class="id" title="constructor">CldRedId</span></a> : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_fun"><span class="id" title="inductive">cld_reduce_fun</span></a>                                 <br/>
&nbsp;&nbsp;| <a name="CldRedAggregate"><span class="id" title="constructor">CldRedAggregate</span></a> :                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_fun"><span class="id" title="inductive">cld_reduce_fun</span></a><br/>
&nbsp;&nbsp;| <a name="CldRedOp"><span class="id" title="constructor">CldRedOp</span></a> : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_op"><span class="id" title="inductive">cld_reduce_op</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_fun"><span class="id" title="inductive">cld_reduce_fun</span></a>. 
<br/>
</div>

<div class="doc">
In the case of the arbirary reduce operation: the first function
      is the <span class="inlinecode"><a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#reduce"><span class="id" title="variable">reduce</span></a></span> and applied once on each key/value pair
      resulting from the map <span class="inlinecode">(<a class="idref" href="Qcert.Basic.Util.RBindings.html#K"><span class="id" title="variable">K</span></a></span> <span class="inlinecode">×</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a></span> <span class="inlinecode"><a class="idref" href="Qcert.Basic.Util.RUtil.html#B"><span class="id" title="variable">B</span></a>)</span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="Qcert.Basic.Util.RLift.html#C"><span class="id" title="variable">C</span></a></span>; the second function
      is the <span class="inlinecode"><span class="id" title="var">rereduce</span></span> and applied on the result of the first
      function <span class="inlinecode">(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a></span> <span class="inlinecode"><a class="idref" href="Qcert.Basic.Util.RLift.html#C"><span class="id" title="variable">C</span></a>)</span> <span class="inlinecode">→</span> <span class="inlinecode"><a class="idref" href="Qcert.Basic.Util.RLift.html#C"><span class="id" title="variable">C</span></a></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="cld_reduce"><span class="id" title="record">cld_reduce</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mkReduceCld"><span class="id" title="constructor">mkReduceCld</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <a name="reduce_fun"><span class="id" title="projection">reduce_fun</span></a>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_fun"><span class="id" title="inductive">cld_reduce_fun</span></a>;   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="reduce_output"><span class="id" title="projection">reduce_output</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> }. 
<br/>
</div>

<div class="doc">
<a name="lab56"></a><h2 class="section">Map/Reduce View</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="cldmr_step"><span class="id" title="record">cldmr_step</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mkMRCld"><span class="id" title="constructor">mkMRCld</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <a name="cldmr_step_input"><span class="id" title="projection">cldmr_step_input</span></a>: <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>;                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="cldmr_step_map"><span class="id" title="projection">cldmr_step_map</span></a>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map"><span class="id" title="record">cld_map</span></a>;                  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="cldmr_step_reduce"><span class="id" title="projection">cldmr_step_reduce</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce"><span class="id" title="record">cld_reduce</span></a>;     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="cldmr_step_reduce_default"><span class="id" title="projection">cldmr_step_reduce_default</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a> }. 
<br/>
</div>

<div class="doc">
<a name="lab57"></a><h2 class="section">Map/Reduce Chains</h2>

<div class="paragraph"> </div>

 The top-level data structure includes a list of Map/Reduce
  views, followed by an additional expressions which is used to gather
  all the results from the views and compute the final results. This
  is meant to be evaluated locally. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="cldmr"><span class="id" title="record">cldmr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mkMRCldChain"><span class="id" title="constructor">mkMRCldChain</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <a name="cldmr_chain"><span class="id" title="projection">cldmr_chain</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step"><span class="id" title="record">cldmr_step</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="cldmr_last"><span class="id" title="projection">cldmr_last</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">((</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> }.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a name="lab58"></a><h1 class="section">Well-formed properties</h1>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_causally_consistent"><span class="id" title="definition">cldmr_step_causally_consistent</span></a> (<span class="id" title="var">mr1</span> <span class="id" title="var">mr2</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step"><span class="id" title="record">cldmr_step</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr2"><span class="id" title="variable">mr2</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_reduce"><span class="id" title="projection">cldmr_step_reduce</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">r</span>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#reduce_output"><span class="id" title="projection">reduce_output</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">o</span> ⇒ <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr1"><span class="id" title="variable">mr1</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_input"><span class="id" title="projection">cldmr_step_input</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.EquivDec.html#f5161aa852867cb8c5abf7de7bc53b45"><span class="id" title="notation">≠</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.EquivDec.html#f5161aa852867cb8c5abf7de7bc53b45"><span class="id" title="notation">b</span></a> <span class="id" title="var">o</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_chain_causally_consistent"><span class="id" title="definition">cldmr_chain_causally_consistent</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step"><span class="id" title="record">cldmr_step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Qcert.Basic.Util.RList.html#forallb_ordpairs_refl"><span class="id" title="definition">forallb_ordpairs_refl</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_causally_consistent"><span class="id" title="definition">cldmr_step_causally_consistent</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_causally_consistent"><span class="id" title="definition">cldmr_causally_consistent</span></a> (<span class="id" title="var">cldmr</span>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="record">cldmr</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_chain_causally_consistent"><span class="id" title="definition">cldmr_chain_causally_consistent</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="variable">cldmr</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_chain"><span class="id" title="projection">cldmr_chain</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_io_vars"><span class="id" title="definition">cldmr_step_io_vars</span></a> <span class="id" title="var">mr0</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr0"><span class="id" title="variable">mr0</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_input"><span class="id" title="projection">cldmr_step_input</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr0"><span class="id" title="variable">mr0</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_reduce"><span class="id" title="projection">cldmr_step_reduce</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">r</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">r</span>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#reduce_output"><span class="id" title="projection">reduce_output</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">o</span> ⇒ <span class="id" title="var">o</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="mr_chain_io_vars"><span class="id" title="definition">mr_chain_io_vars</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#mr"><span class="id" title="record">mr</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#mr_input"><span class="id" title="projection">mr_input</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#mr_output"><span class="id" title="projection">mr_output</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#l"><span class="id" title="variable">l</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="nnrcmr_io_vars"><span class="id" title="definition">nnrcmr_io_vars</span></a> (<span class="id" title="var">mrl</span> : <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#nnrcmr"><span class="id" title="record">nnrcmr</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr_chain_io_vars"><span class="id" title="definition">mr_chain_io_vars</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mrl"><span class="id" title="variable">mrl</span></a>.(<a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#mr_chain"><span class="id" title="projection">mr_chain</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_chain_io_vars"><span class="id" title="definition">cldmr_chain_io_vars</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step"><span class="id" title="record">cldmr_step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#flat_map"><span class="id" title="definition">flat_map</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_io_vars"><span class="id" title="definition">cldmr_step_io_vars</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_io_vars"><span class="id" title="definition">cldmr_io_vars</span></a> (<span class="id" title="var">cldmr</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="record">cldmr</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_chain_io_vars"><span class="id" title="definition">cldmr_chain_io_vars</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="variable">cldmr</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_chain"><span class="id" title="projection">cldmr_chain</span></a>).<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="function_with_no_free_vars"><span class="id" title="definition">function_with_no_free_vars</span></a> (<span class="id" title="var">f</span>: <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> (<span class="id" title="var">x</span>: <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_free_vars"><span class="id" title="definition">nnrc_free_vars</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f"><span class="id" title="variable">f</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="function2_with_no_free_vars"><span class="id" title="definition">function2_with_no_free_vars</span></a> (<span class="id" title="var">f</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f"><span class="id" title="variable">f</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f"><span class="id" title="variable">f</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_free_vars"><span class="id" title="definition">nnrc_free_vars</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f"><span class="id" title="variable">f</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f"><span class="id" title="variable">f</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f"><span class="id" title="variable">f</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="init_vkey"><span class="id" title="definition">init_vkey</span></a> := "vkey$"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="init_vval"><span class="id" title="definition">init_vval</span></a> := "vval$"%<span class="id" title="var">string</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab59"></a><h1 class="section">Evaluation Semantics</h1>

<div class="paragraph"> </div>

*******************************
<a name="lab60"></a><h2 class="section">Semantics of ♥ CloudantMR ♥ **
</h2>
   
<div class="paragraph"> </div>

 A few useful functions for key manipulation, lifting and
  building the initial CldMR environment. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="add_keys_to_binding"><span class="id" title="definition">add_keys_to_binding</span></a> (<span class="id" title="var">binding</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#binding"><span class="id" title="variable">binding</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#pack_kvl"><span class="id" title="definition">pack_kvl</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#init_keys"><span class="id" title="definition">init_keys</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#binding"><span class="id" title="variable">binding</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="lift_binding_to_coll"><span class="id" title="definition">lift_binding_to_coll</span></a> (<span class="id" title="var">binding</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#binding"><span class="id" title="variable">binding</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> <span class="id" title="var">coll</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#binding"><span class="id" title="variable">binding</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">coll</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The evaluation relies on the existence of an initial database
  containing a single document with the unit value. This is necessary
  in order to trigger computation when all other input databases are
  empty. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cld_load_init_env"><span class="id" title="definition">cld_load_init_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">initunit</span>: <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) (<span class="id" title="var">cenv</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.Basic.Util.RLift.html#lift_map"><span class="id" title="definition">lift_map</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#lift_binding_to_coll"><span class="id" title="definition">lift_binding_to_coll</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cenv"><span class="id" title="variable">cenv</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">cenv</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">full_bindings</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#initunit"><span class="id" title="variable">initunit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.Basic.Data.RData.html#dunit"><span class="id" title="constructor">dunit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cenv"><span class="id" title="variable">cenv</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#add_keys_to_binding"><span class="id" title="definition">add_keys_to_binding</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#full_bindings"><span class="id" title="variable">full_bindings</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab61"></a><h2 class="section">Map</h2>

<div class="paragraph"> </div>

******************
<a name="lab62"></a><h1 class="section">Semantics of map *
</h1>
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="apply_map_fun_with_keys"><span class="id" title="definition">apply_map_fun_with_keys</span></a> (<span class="id" title="var">doc</span>:<a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) (<span class="id" title="var">body</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">coll</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f_map</span> (<span class="id" title="var">d</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a><a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#d"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#doc"><span class="id" title="variable">doc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#body"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">res</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <a class="idref" href="Qcert.Basic.Data.RRelation.html#rmap"><span class="id" title="definition">rmap</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f_map"><span class="id" title="variable">f_map</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="apply_map_fun_without_keys"><span class="id" title="definition">apply_map_fun_without_keys</span></a> (<span class="id" title="var">doc</span>:<a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) (<span class="id" title="var">body</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">coll</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f_map</span> (<span class="id" title="var">d</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a><a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">v</span>) := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#d"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#doc"><span class="id" title="variable">doc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#body"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">res</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">res</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span> <a class="idref" href="Qcert.Basic.Data.RRelation.html#rmap"><span class="id" title="definition">rmap</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f_map"><span class="id" title="variable">f_map</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_map_eval"><span class="id" title="definition">cldmr_step_map_eval</span></a> (<span class="id" title="var">map</span>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_map"><span class="id" title="record">cld_map</span></a>) (<span class="id" title="var">coll</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">map_f</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map"><span class="id" title="variable">map</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map_fun"><span class="id" title="projection">map_fun</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">emit_f</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map"><span class="id" title="variable">map</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map_emit"><span class="id" title="projection">map_emit</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map_f"><span class="id" title="variable">map_f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMapId"><span class="id" title="constructor">CldMapId</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">doc</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">body</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#emit_f"><span class="id" title="variable">emit_f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldEmitDist"><span class="id" title="constructor">CldEmitDist</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">nested_map</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#apply_map_fun_with_keys"><span class="id" title="definition">apply_map_fun_with_keys</span></a> <span class="id" title="var">doc</span> <span class="id" title="var">body</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#nested_map"><span class="id" title="variable">nested_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldEmitCollect"><span class="id" title="constructor">CldEmitCollect</span></a> <span class="id" title="var">n</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">nested_map</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#apply_map_fun_without_keys"><span class="id" title="definition">apply_map_fun_without_keys</span></a> <span class="id" title="var">doc</span> <span class="id" title="var">body</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#map_without_key"><span class="id" title="definition">map_without_key</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#map_const_key"><span class="id" title="definition">map_const_key</span></a> <span class="id" title="var">n</span>)) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#nested_map"><span class="id" title="variable">nested_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMapFlatten"><span class="id" title="constructor">CldMapFlatten</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">doc</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">body</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#emit_f"><span class="id" title="variable">emit_f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldEmitDist"><span class="id" title="constructor">CldEmitDist</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">nested_map</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#apply_map_fun_with_keys"><span class="id" title="definition">apply_map_fun_with_keys</span></a> <span class="id" title="var">doc</span> <span class="id" title="var">body</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#flat_map_with_key"><span class="id" title="definition">flat_map_with_key</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#map_invent_key"><span class="id" title="definition">map_invent_key</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#nested_map"><span class="id" title="variable">nested_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldEmitCollect"><span class="id" title="constructor">CldEmitCollect</span></a> <span class="id" title="var">n</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">nested_map</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#apply_map_fun_without_keys"><span class="id" title="definition">apply_map_fun_without_keys</span></a> <span class="id" title="var">doc</span> <span class="id" title="var">body</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">flattened_map</span> := <a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#flat_map_without_key"><span class="id" title="definition">flat_map_without_key</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#nested_map"><span class="id" title="variable">nested_map</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#map_without_key"><span class="id" title="definition">map_without_key</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#map_const_key"><span class="id" title="definition">map_const_key</span></a> <span class="id" title="var">n</span>)) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#flattened_map"><span class="id" title="variable">flattened_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="mapIdDist_is_map"><span class="id" title="lemma">mapIdDist_is_map</span></a> (<span class="id" title="var">map</span>:<a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) (<span class="id" title="var">coll</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#cld_get_values"><span class="id" title="definition">cld_get_values</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_map_eval"><span class="id" title="definition">cldmr_step_map_eval</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mkMapCld"><span class="id" title="constructor">mkMapCld</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMapId"><span class="id" title="constructor">CldMapId</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map"><span class="id" title="variable">map</span></a>) (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldEmitDist"><span class="id" title="constructor">CldEmitDist</span></a>)) (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#init_keys"><span class="id" title="definition">init_keys</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#mr_map_eval"><span class="id" title="definition">mr_map_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#MapDist"><span class="id" title="constructor">MapDist</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map"><span class="id" title="variable">map</span></a>) (<a class="idref" href="Qcert.Basic.Data.DData.html#Ddistr"><span class="id" title="constructor">Ddistr</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="lift_map_boxed_cons"><span class="id" title="lemma">lift_map_boxed_cons</span></a> <span class="id" title="var">n</span> <span class="id" title="var">d</span> <span class="id" title="var">coll</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kvs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#kvs"><span class="id" title="variable">kvs</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">t'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#box_key"><span class="id" title="definition">box_key</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#d"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#t'"><span class="id" title="variable">t'</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#d"><span class="id" title="variable">d</span></a>) (<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">kvs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#kvs"><span class="id" title="variable">kvs</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>).<br/>

<br/>

<br/>
</div>

<div class="doc">
<a name="lab63"></a><h2 class="section">Reduce</h2>

<div class="paragraph"> </div>

***********************
<a name="lab64"></a><h1 class="section">Semantics of group_by *
</h1>
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_group_by_eval"><span class="id" title="definition">cldmr_step_group_by_eval</span></a> (<span class="id" title="var">l</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Data.RGroupBy.html#group_by_iter_eval_alt"><span class="id" title="definition">group_by_iter_eval_alt</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#l"><span class="id" title="variable">l</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_aggregate_eval"><span class="id" title="definition">cldmr_step_aggregate_eval</span></a> (<span class="id" title="var">f_reduce</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) (<span class="id" title="var">f_rereduce</span>: (<a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>)) (<span class="id" title="var">groups</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a>))  : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">key_values_args</span>, <span class="id" title="var">body</span>) := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f_reduce"><span class="id" title="variable">f_reduce</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">key_arg</span>, <span class="id" title="var">values_arg</span>) := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key_values_args"><span class="id" title="variable">key_values_args</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f_reduce</span> (<span class="id" title="var">key_values_v</span>: <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">key_v</span>, <span class="id" title="var">values_v</span>) := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key_values_v"><span class="id" title="variable">key_values_v</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#values_arg"><span class="id" title="variable">values_arg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#values_v"><span class="id" title="variable">values_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key_arg"><span class="id" title="variable">key_arg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key_v"><span class="id" title="variable">key_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#body"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">res</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key_v"><span class="id" title="variable">key_v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">reduced</span> := <a class="idref" href="Qcert.Basic.Data.RRelation.html#rmap"><span class="id" title="definition">rmap</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f_reduce"><span class="id" title="variable">f_reduce</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#groups"><span class="id" title="variable">groups</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f_rereduce</span> (<span class="id" title="var">key_value_v</span>: (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">key_v</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">value_v</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key_value_v"><span class="id" title="variable">key_value_v</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">values_arg</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rebody</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f_rereduce"><span class="id" title="variable">f_rereduce</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#values_arg"><span class="id" title="variable">values_arg</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<span class="id" title="var">value_v</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="var">rebody</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">res</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">key_v</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<a class="idref" href="Qcert.Basic.Data.RRelation.html#rmap"><span class="id" title="definition">rmap</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#f_rereduce"><span class="id" title="variable">f_rereduce</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#reduced"><span class="id" title="variable">reduced</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cloudant_sum_op"><span class="id" title="definition">cloudant_sum_op</span></a> (<span class="id" title="var">typ</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_numeric_type"><span class="id" title="inductive">cld_numeric_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#typ"><span class="id" title="variable">typ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#Cld_int"><span class="id" title="constructor">Cld_int</span></a> ⇒ <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ASum"><span class="id" title="constructor">ASum</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#Cld_float"><span class="id" title="constructor">Cld_float</span></a> ⇒ <a class="idref" href="Qcert.CldMR.Lang.ForeignCloudant.html#cloudant_float_sum_op"><span class="id" title="method">cloudant_float_sum_op</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cloudant_min_op"><span class="id" title="definition">cloudant_min_op</span></a> (<span class="id" title="var">typ</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_numeric_type"><span class="id" title="inductive">cld_numeric_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#typ"><span class="id" title="variable">typ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#Cld_int"><span class="id" title="constructor">Cld_int</span></a> ⇒ <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ANumMin"><span class="id" title="constructor">ANumMin</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#Cld_float"><span class="id" title="constructor">Cld_float</span></a> ⇒ <a class="idref" href="Qcert.CldMR.Lang.ForeignCloudant.html#cloudant_float_min_op"><span class="id" title="method">cloudant_float_min_op</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cloudant_max_op"><span class="id" title="definition">cloudant_max_op</span></a> (<span class="id" title="var">typ</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_numeric_type"><span class="id" title="inductive">cld_numeric_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#typ"><span class="id" title="variable">typ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#Cld_int"><span class="id" title="constructor">Cld_int</span></a> ⇒ <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ANumMax"><span class="id" title="constructor">ANumMax</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#Cld_float"><span class="id" title="constructor">Cld_float</span></a> ⇒ <a class="idref" href="Qcert.CldMR.Lang.ForeignCloudant.html#cloudant_float_max_op"><span class="id" title="method">cloudant_float_max_op</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_reduce_eval"><span class="id" title="definition">cldmr_step_reduce_eval</span></a> (<span class="id" title="var">red_fun</span>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_fun"><span class="id" title="inductive">cld_reduce_fun</span></a>) (<span class="id" title="var">coll</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>))  : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#red_fun"><span class="id" title="variable">red_fun</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedId"><span class="id" title="constructor">CldRedId</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedAggregate"><span class="id" title="constructor">CldRedAggregate</span></a> <span class="id" title="var">f_reduce</span> <span class="id" title="var">f_rereduce</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">groups</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_group_by_eval"><span class="id" title="definition">cldmr_step_group_by_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_aggregate_eval"><span class="id" title="definition">cldmr_step_aggregate_eval</span></a> <span class="id" title="var">f_reduce</span> <span class="id" title="var">f_rereduce</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#groups"><span class="id" title="variable">groups</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedOp"><span class="id" title="constructor">CldRedOp</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedOpCount"><span class="id" title="constructor">CldRedOpCount</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">uop</span> := <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ACount"><span class="id" title="constructor">ACount</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <a class="idref" href="Qcert.Basic.Operators.RUnaryOpsSem.html#fun_of_unaryop"><span class="id" title="definition">fun_of_unaryop</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#uop"><span class="id" title="variable">uop</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>)) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dnat"><span class="id" title="constructor">dnat</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">res</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key"><span class="id" title="variable">key</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#res"><span class="id" title="variable">res</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedOp"><span class="id" title="constructor">CldRedOp</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedOpSum"><span class="id" title="constructor">CldRedOpSum</span></a> <span class="id" title="var">typ</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">uop</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cloudant_sum_op"><span class="id" title="definition">cloudant_sum_op</span></a> <span class="id" title="var">typ</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <a class="idref" href="Qcert.Basic.Operators.RUnaryOpsSem.html#fun_of_unaryop"><span class="id" title="definition">fun_of_unaryop</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#uop"><span class="id" title="variable">uop</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>)) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dnat"><span class="id" title="constructor">dnat</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">res</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key"><span class="id" title="variable">key</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#res"><span class="id" title="variable">res</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedOp"><span class="id" title="constructor">CldRedOp</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedOpStats"><span class="id" title="constructor">CldRedOpStats</span></a> <span class="id" title="var">typ</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">coll</span> := <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">count</span> := <a class="idref" href="Qcert.Basic.Operators.RUnaryOpsSem.html#fun_of_unaryop"><span class="id" title="definition">fun_of_unaryop</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ACount"><span class="id" title="constructor">ACount</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">sum</span> := <a class="idref" href="Qcert.Basic.Operators.RUnaryOpsSem.html#fun_of_unaryop"><span class="id" title="definition">fun_of_unaryop</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cloudant_sum_op"><span class="id" title="definition">cloudant_sum_op</span></a> <span class="id" title="var">typ</span>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">min</span> := <a class="idref" href="Qcert.Basic.Operators.RUnaryOpsSem.html#fun_of_unaryop"><span class="id" title="definition">fun_of_unaryop</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cloudant_min_op"><span class="id" title="definition">cloudant_min_op</span></a> <span class="id" title="var">typ</span>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">max</span> := <a class="idref" href="Qcert.Basic.Operators.RUnaryOpsSem.html#fun_of_unaryop"><span class="id" title="definition">fun_of_unaryop</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cloudant_max_op"><span class="id" title="definition">cloudant_max_op</span></a> <span class="id" title="var">typ</span>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#count"><span class="id" title="variable">count</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#sum"><span class="id" title="variable">sum</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#min"><span class="id" title="variable">min</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#max"><span class="id" title="variable">max</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">count</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">sum</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">min</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">max</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#drec"><span class="id" title="constructor">drec</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>"count"%<span class="id" title="var">string</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#count"><span class="id" title="variable">count</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>"max"%<span class="id" title="var">string</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#max"><span class="id" title="variable">max</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>"min"%<span class="id" title="var">string</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#min"><span class="id" title="variable">min</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>"sum"%<span class="id" title="var">string</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#sum"><span class="id" title="variable">sum</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dnat"><span class="id" title="constructor">dnat</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">res</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#key"><span class="id" title="variable">key</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#res"><span class="id" title="variable">res</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="cldmr_step_reduce_flatten_id"><span class="id" title="lemma">cldmr_step_reduce_flatten_id</span></a> (<span class="id" title="var">l</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_reduce_eval"><span class="id" title="definition">cldmr_step_reduce_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedId"><span class="id" title="constructor">CldRedId</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#l"><span class="id" title="variable">l</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab65"></a><h2 class="section">Map/Reduce View</h2>

<div class="paragraph"> </div>

*****************************
<a name="lab66"></a><h1 class="section">Semantics of one map-reduce *
</h1>
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_eval"><span class="id" title="definition">cldmr_step_eval</span></a> (<span class="id" title="var">mr</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step"><span class="id" title="record">cldmr_step</span></a>) (<span class="id" title="var">coll</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a><a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">map_result</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_map_eval"><span class="id" title="definition">cldmr_step_map_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr"><span class="id" title="variable">mr</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_map"><span class="id" title="projection">cldmr_step_map</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr"><span class="id" title="variable">mr</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_reduce"><span class="id" title="projection">cldmr_step_reduce</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map_result"><span class="id" title="variable">map_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">reduce</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">reduce_result</span> := <a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_reduce_eval"><span class="id" title="definition">cldmr_step_reduce_eval</span></a> <span class="id" title="var">reduce</span>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#reduce_fun"><span class="id" title="projection">reduce_fun</span></a>)) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#map_result"><span class="id" title="variable">map_result</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">reduce</span>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#reduce_output"><span class="id" title="projection">reduce_output</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#reduce_result"><span class="id" title="variable">reduce_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab67"></a><h2 class="section">Map/Reduce Chain</h2>

<div class="paragraph"> </div>

************************************
<a name="lab68"></a><h1 class="section">Semantics of a chain of map-reduce *
</h1>
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cld_merge_env"><span class="id" title="definition">cld_merge_env</span></a> (<span class="id" title="var">x</span>: <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) (<span class="id" title="var">coll</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) (<span class="id" title="var">env</span>: <a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.Basic.Util.RAssoc.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.EquivDec.html#equiv_dec"><span class="id" title="definition">equiv_dec</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">d</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">d</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> <span class="id" title="var">coll'</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">coll'</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env"><span class="id" title="variable">env</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="nnrc_env_of_cld_env"><span class="id" title="definition">nnrc_env_of_cld_env</span></a> (<span class="id" title="var">form</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) (<span class="id" title="var">eff</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)): <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<a class="idref" href="Qcert.Basic.Util.RList.html#zip"><span class="id" title="definition">zip</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#form"><span class="id" title="variable">form</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#eff"><span class="id" title="variable">eff</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="effective_params_from_bindings"><span class="id" title="definition">effective_params_from_bindings</span></a> (<span class="id" title="var">eff</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) (<span class="id" title="var">cld_env</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#lift_map"><span class="id" title="definition">lift_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">v</span> : <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.Basic.Util.RAssoc.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.EquivDec.html#equiv_dec"><span class="id" title="definition">equiv_dec</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_env"><span class="id" title="variable">cld_env</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">db</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#lift"><span class="id" title="definition">lift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">l</span> ⇒ <a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#l"><span class="id" title="variable">l</span></a>)) (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#unpack_kvl"><span class="id" title="definition">unpack_kvl</span></a> <span class="id" title="var">db</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#eff"><span class="id" title="variable">eff</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_step_eval_last"><span class="id" title="definition">cldmr_step_eval_last</span></a> (<span class="id" title="var">cld_env</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) (<span class="id" title="var">mr_last</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">((</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">)</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">formal_params</span>, <span class="id" title="var">n</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr_last"><span class="id" title="variable">mr_last</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">effective_params</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#effective_params_from_bindings"><span class="id" title="definition">effective_params_from_bindings</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr_last"><span class="id" title="variable">mr_last</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_env"><span class="id" title="variable">cld_env</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">onrc_env</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#nnrc_env_of_cld_env"><span class="id" title="definition">nnrc_env_of_cld_env</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#formal_params"><span class="id" title="variable">formal_params</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#effective_params"><span class="id" title="variable">effective_params</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">nnrc_env</span> ⇒ <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#nnrc_env"><span class="id" title="variable">nnrc_env</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#onrc_env"><span class="id" title="variable">onrc_env</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_chain_eval_inner"><span class="id" title="definition">cldmr_chain_eval_inner</span></a> (<span class="id" title="var">env</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) (<span class="id" title="var">l</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step"><span class="id" title="record">cldmr_step</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">acc</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>))) <span class="id" title="var">mr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">env'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cld_input</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr"><span class="id" title="variable">mr</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_input"><span class="id" title="projection">cldmr_step_input</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.Basic.Util.RAssoc.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.EquivDec.html#equiv_dec"><span class="id" title="definition">equiv_dec</span></a> <span class="id" title="var">env'</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_input"><span class="id" title="variable">cld_input</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">kvl</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">coll</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#unpack_kvl"><span class="id" title="definition">unpack_kvl</span></a> <span class="id" title="var">kvl</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_eval"><span class="id" title="definition">cldmr_step_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mr"><span class="id" title="variable">mr</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#coll"><span class="id" title="variable">coll</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">env''</span> := <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_merge_env"><span class="id" title="definition">cld_merge_env</span></a> <span class="id" title="var">x</span> (<a class="idref" href="Qcert.CldMR.Lang.CldMRUtil.html#pre_pack_kvl"><span class="id" title="definition">pre_pack_kvl</span></a> <span class="id" title="var">res</span>) <span class="id" title="var">env'</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Util.RLift.html#olift"><span class="id" title="definition">olift</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">env</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env''"><span class="id" title="variable">env''</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#l"><span class="id" title="variable">l</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env"><span class="id" title="variable">env</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_eval"><span class="id" title="definition">cldmr_eval</span></a> (<span class="id" title="var">env</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) (<span class="id" title="var">cldmr</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="record">cldmr</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_chain_eval_inner"><span class="id" title="definition">cldmr_chain_eval_inner</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="variable">cldmr</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_chain"><span class="id" title="projection">cldmr_chain</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">env_res</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">coll</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step_eval_last"><span class="id" title="definition">cldmr_step_eval_last</span></a> <span class="id" title="var">env_res</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="variable">cldmr</span></a>.(<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_last"><span class="id" title="projection">cldmr_last</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab69"></a><h1 class="section">Map/Reduce Chain Library</h1>

<div class="paragraph"> </div>

 The following are built-in map/reduce which are useful for
  translations purposes. 
<div class="paragraph"> </div>

*****************
<a name="lab70"></a><h2 class="section">CLDMR library **
</h2>
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="CldMR.cldmr_step_library"><span class="id" title="section">cldmr_step_library</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="idReduce"><span class="id" title="definition">idReduce</span></a> (<span class="id" title="var">v_out</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce"><span class="id" title="record">cld_reduce</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mkReduceCld"><span class="id" title="constructor">mkReduceCld</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedId"><span class="id" title="constructor">CldRedId</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v_out"><span class="id" title="variable">v_out</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="collectReduce"><span class="id" title="definition">collectReduce</span></a> (<span class="id" title="var">v_out</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce"><span class="id" title="record">cld_reduce</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mkReduceCld"><span class="id" title="constructor">mkReduceCld</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedAggregate"><span class="id" title="constructor">CldRedAggregate</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#init_vkey"><span class="id" title="definition">init_vkey</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#init_vval"><span class="id" title="definition">init_vval</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#init_vval"><span class="id" title="definition">init_vval</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#init_vval"><span class="id" title="definition">init_vval</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#AFlatten"><span class="id" title="constructor">AFlatten</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#init_vval"><span class="id" title="definition">init_vval</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v_out"><span class="id" title="variable">v_out</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="opReduce"><span class="id" title="definition">opReduce</span></a> (<span class="id" title="var">op</span>: <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce_op"><span class="id" title="inductive">cld_reduce_op</span></a>) (<span class="id" title="var">v_out</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_reduce"><span class="id" title="record">cld_reduce</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mkReduceCld"><span class="id" title="constructor">mkReduceCld</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldRedOp"><span class="id" title="constructor">CldRedOp</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#op"><span class="id" title="variable">op</span></a>) <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#v_out"><span class="id" title="variable">v_out</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="defaultMR"><span class="id" title="definition">defaultMR</span></a> : <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_step"><span class="id" title="record">cldmr_step</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mkMRCld"><span class="id" title="constructor">mkMRCld</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#init_vval"><span class="id" title="definition">init_vval</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#mkMapCld"><span class="id" title="constructor">mkMapCld</span></a> (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMapId"><span class="id" title="constructor">CldMapId</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.CldMR.Lang.CldMR.html#init_vval"><span class="id" title="definition">init_vval</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCConst"><span class="id" title="constructor">NNRCConst</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#dunit"><span class="id" title="constructor">dunit</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>) (<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldEmitCollect"><span class="id" title="constructor">CldEmitCollect</span></a> (99%<span class="id" title="var">nat</span>))) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> .<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.cldmr_step_library"><span class="id" title="section">cldmr_step_library</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab71"></a><h1 class="section">Toplevel</h1>

<div class="paragraph"> </div>

 Top-level evaluation is used externally by the Q*cert
  compiler. It is parameterized by a given database name for the
  'initial database'. It takes a CldMR chain and a global environment
  as input. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="CldMR.Top"><span class="id" title="section">Top</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="cldmr_eval_top"><span class="id" title="definition">cldmr_eval_top</span></a> (<span class="id" title="var">vinit</span>:<a class="idref" href="Qcert.NNRCMR.Lang.NNRCMR.html#var"><span class="id" title="definition">var</span></a>) (<span class="id" title="var">q</span>:<a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr"><span class="id" title="record">cldmr</span></a>) (<span class="id" title="var">cenv</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cenv</span> := <a class="idref" href="Qcert.Basic.Env.RConstants.html#mkConstants"><span class="id" title="definition">mkConstants</span></a> (<a class="idref" href="Qcert.Basic.Util.RBindings.html#rec_sort"><span class="id" title="definition">rec_sort</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cenv"><span class="id" title="variable">cenv</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cld_load_init_env"><span class="id" title="definition">cld_load_init_env</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#vinit"><span class="id" title="variable">vinit</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cenv"><span class="id" title="variable">cenv</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">cenv</span> ⇒ <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cldmr_eval"><span class="id" title="definition">cldmr_eval</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#cenv"><span class="id" title="variable">cenv</span></a> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#q"><span class="id" title="variable">q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR.Top"><span class="id" title="section">Top</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.CldMR.Lang.CldMR.html#CldMR"><span class="id" title="section">CldMR</span></a>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>