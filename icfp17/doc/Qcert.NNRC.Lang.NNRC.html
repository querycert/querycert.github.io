<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Qcert.NNRC.Lang.NNRC</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Qcert.NNRC.Lang.NNRC</h1>

<div class="code">

<br/>
</div>

<div class="doc">
NNRC is the named nested relational calculus. It serves as an
intermediate language to facilitate code generation for non-functional
targets. 
<div class="paragraph"> </div>

 NNRC is a thin layer over the core language cNNRC. As cNNRC, NNRC
  is evaluated within a local environment. 
<div class="paragraph"> </div>

 Additional operators in NNRC can be easily expressed in terms of
  the core cNNRC, but are useful for optimization purposes. The main
  such operator is group-by. 
<div class="paragraph"> </div>

 Summary:
<ul class="doclist">
<li> Language: NNRC (Named Nested Relational Calculus)

</li>
<li> Based on: "Polymorphic type inference for the named nested
  relational calculus." Jan Van den Bussche, and Stijn
  Vansummeren. ACM Transactions on Computational Logic (TOCL) 9.1
  (2007): 3.

</li>
<li> translating to NNRC: NRAEnv, cNNRC

</li>
<li> translating from NNRC: cNNRC, NNRCMR, DNNRC, Java, JavaScript 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="NNRC"><span class="id" title="section">NNRC</span></a>.<br/>

<br/>

<br/>

<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">fruntime</span>:<a class="idref" href="Qcert.Basic.ForeignRuntime.html#foreign_runtime"><span class="id" title="class">foreign_runtime</span></a>}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab18"></a><h1 class="section">Abstract Syntax</h1>

<div class="paragraph"> </div>

 The full abstract syntax for NNRC is already defined in core cNNRC. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="nnrc"><span class="id" title="definition">nnrc</span></a> := <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc"><span class="id" title="inductive">nnrc</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab19"></a><h1 class="section">Macros</h1>

<div class="paragraph"> </div>

 All the additional operators are defined in terms of the core cNNRC. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="NNRC.Macros"><span class="id" title="section">Macros</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">h</span>:<a class="idref" href="Qcert.Basic.Data.BrandRelation.html#brand_relation_t"><span class="id" title="definition">brand_relation_t</span></a>}.<br/>

<br/>
</div>

<div class="doc">
The following macro defines group-by in terms of existing cNNRC expressions. 
<div class="paragraph"> </div>

 <span class="inlinecode"><a class="idref" href="Qcert.Tests.DatasetTest.html#e"><span class="id" title="definition">e</span></a></span> <span class="inlinecode"><a class="idref" href="Qcert.Basic.Data.RBag.html#groupby"><span class="id" title="definition">groupby</span></a>[<a class="idref" href="Qcert.Basic.Util.RUtil.html#g"><span class="id" title="variable">g</span></a>,<a class="idref" href="Qcert.Basic.Data.RGroupBy.html#keys"><span class="id" title="variable">keys</span></a>]</span> <span class="inlinecode">==</span>
         <span class="inlinecode"><span class="id" title="var">LET</span></span> <span class="inlinecode">$<span class="id" title="var">group0</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><a class="idref" href="Qcert.Tests.DatasetTest.html#e"><span class="id" title="definition">e</span></a></span>
         <span class="inlinecode"><span class="id" title="var">IN</span></span> <span class="inlinecode">{</span> <span class="inlinecode">[</span> <span class="inlinecode"><a class="idref" href="Qcert.Basic.Util.RUtil.html#g"><span class="id" title="variable">g</span></a>:</span> <span class="inlinecode">♯<span class="id" title="var">flatten</span>({</span> <span class="inlinecode"><span class="id" title="var">IF</span></span> <span class="inlinecode">($<span class="id" title="var">group3</span></span> <span class="inlinecode">=</span> <span class="inlinecode">π[<a class="idref" href="Qcert.Basic.Data.RGroupBy.html#keys"><span class="id" title="variable">keys</span></a>])</span>
                              <span class="inlinecode"><span class="id" title="var">THEN</span></span> <span class="inlinecode">{$<span class="id" title="var">group3</span>}</span>
                              <span class="inlinecode"><span class="id" title="var">ELSE</span></span> <span class="inlinecode">{}</span>
                              <span class="inlinecode">|</span> <span class="inlinecode">$<span class="id" title="var">group3</span></span> <span class="inlinecode">∈</span> <span class="inlinecode">$<span class="id" title="var">group0</span></span> <span class="inlinecode">})</span> <span class="inlinecode">]</span>
            <span class="inlinecode">|</span> <span class="inlinecode">$<span class="id" title="var">group2</span></span> <span class="inlinecode">∈</span> <span class="inlinecode">♯<span class="id" title="var">distinct</span>({</span> <span class="inlinecode">π[<a class="idref" href="Qcert.Basic.Data.RGroupBy.html#keys"><span class="id" title="variable">keys</span></a>]($<a class="idref" href="Qcert.NRA.Lang.NRAExt.html#group1"><span class="id" title="definition">group1</span></a>)</span>
                                  <span class="inlinecode">|</span> <span class="inlinecode">$<a class="idref" href="Qcert.NRA.Lang.NRAExt.html#group1"><span class="id" title="definition">group1</span></a></span> <span class="inlinecode">∈</span> <span class="inlinecode">$<span class="id" title="var">group0</span></span> <span class="inlinecode">})</span> <span class="inlinecode">}</span>
     
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="nnrc_group_by"><span class="id" title="definition">nnrc_group_by</span></a> (<span class="id" title="var">g</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">sl</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) : <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t0</span> := "$group0"%<span class="id" title="var">string</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t1</span> := "$group1"%<span class="id" title="var">string</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t2</span> := "$group2"%<span class="id" title="var">string</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t3</span> := "$group3"%<span class="id" title="var">string</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCLet"><span class="id" title="constructor">NNRCLet</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t0"><span class="id" title="variable">t0</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCFor"><span class="id" title="constructor">NNRCFor</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t2"><span class="id" title="variable">t2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ADistinct"><span class="id" title="constructor">ADistinct</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCFor"><span class="id" title="constructor">NNRCFor</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t1"><span class="id" title="variable">t1</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t0"><span class="id" title="variable">t0</span></a>) (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> (<a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ARecProject"><span class="id" title="constructor">ARecProject</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sl"><span class="id" title="variable">sl</span></a>) (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t1"><span class="id" title="variable">t1</span></a>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCBinop"><span class="id" title="constructor">NNRCBinop</span></a> <a class="idref" href="Qcert.Basic.Operators.RBinaryOps.html#AConcat"><span class="id" title="constructor">AConcat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> (<a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ARec"><span class="id" title="constructor">ARec</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#g"><span class="id" title="variable">g</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#AFlatten"><span class="id" title="constructor">AFlatten</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCFor"><span class="id" title="constructor">NNRCFor</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t3"><span class="id" title="variable">t3</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t0"><span class="id" title="variable">t0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCIf"><span class="id" title="constructor">NNRCIf</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCBinop"><span class="id" title="constructor">NNRCBinop</span></a> <a class="idref" href="Qcert.Basic.Operators.RBinaryOps.html#AEq"><span class="id" title="constructor">AEq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> (<a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#ARecProject"><span class="id" title="constructor">ARecProject</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sl"><span class="id" title="variable">sl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t3"><span class="id" title="variable">t3</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t2"><span class="id" title="variable">t2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> <a class="idref" href="Qcert.Basic.Operators.RUnaryOps.html#AColl"><span class="id" title="constructor">AColl</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t3"><span class="id" title="variable">t3</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCConst"><span class="id" title="constructor">NNRCConst</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#t2"><span class="id" title="variable">t2</span></a>))).<br/>

<br/>
</div>

<div class="doc">
This definition is equivalent to a nested evaluation group by algorithm. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_group_by_correct"><span class="id" title="lemma">nnrc_group_by_correct</span></a> <span class="id" title="var">env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">sl</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">incoll</span> <span class="id" title="var">outcoll</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Macros.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#incoll"><span class="id" title="variable">incoll</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.Basic.Data.RGroupBy.html#group_by_nested_eval_table"><span class="id" title="definition">group_by_nested_eval_table</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sl"><span class="id" title="variable">sl</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#incoll"><span class="id" title="variable">incoll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#outcoll"><span class="id" title="variable">outcoll</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Macros.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_group_by"><span class="id" title="definition">nnrc_group_by</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sl"><span class="id" title="variable">sl</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Qcert.Basic.Data.RData.html#dcoll"><span class="id" title="constructor">dcoll</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#outcoll"><span class="id" title="variable">outcoll</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Macros"><span class="id" title="section">Macros</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab20"></a><h1 class="section">Evaluation Semantics</h1>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="NNRC.Semantics"><span class="id" title="section">Semantics</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">h</span>:<a class="idref" href="Qcert.Basic.Data.BrandRelation.html#brand_relation_t"><span class="id" title="definition">brand_relation_t</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) : <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCConst"><span class="id" title="constructor">NNRCConst</span></a> <span class="id" title="var">d</span> ⇒ <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCConst"><span class="id" title="constructor">NNRCConst</span></a> <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCBinop"><span class="id" title="constructor">NNRCBinop</span></a> <span class="id" title="var">b</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCBinop"><span class="id" title="constructor">NNRCBinop</span></a> <span class="id" title="var">b</span> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> <span class="id" title="var">u</span> <span class="id" title="var">e1</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCUnop"><span class="id" title="constructor">NNRCUnop</span></a> <span class="id" title="var">u</span> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCLet"><span class="id" title="constructor">NNRCLet</span></a> <span class="id" title="var">v</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCLet"><span class="id" title="constructor">NNRCLet</span></a> <span class="id" title="var">v</span> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCFor"><span class="id" title="constructor">NNRCFor</span></a> <span class="id" title="var">v</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCFor"><span class="id" title="constructor">NNRCFor</span></a> <span class="id" title="var">v</span> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCIf"><span class="id" title="constructor">NNRCIf</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">e3</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCIf"><span class="id" title="constructor">NNRCIf</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e2</span>) (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCEither"><span class="id" title="constructor">NNRCEither</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">v2</span> <span class="id" title="var">e2</span> <span class="id" title="var">v3</span> <span class="id" title="var">e3</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCEither"><span class="id" title="constructor">NNRCEither</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e1</span>) <span class="id" title="var">v2</span> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e2</span>) <span class="id" title="var">v3</span> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCGroupBy"><span class="id" title="constructor">NNRCGroupBy</span></a> <span class="id" title="var">g</span> <span class="id" title="var">sl</span> <span class="id" title="var">e1</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_group_by"><span class="id" title="definition">nnrc_group_by</span></a> <span class="id" title="var">g</span> <span class="id" title="var">sl</span> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="nnrc_ext_eval"><span class="id" title="definition">nnrc_ext_eval</span></a> (<span class="id" title="var">env</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Semantics.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Remark</span> <a name="nnrc_ext_to_nnrc_eq"><span class="id" title="lemma">nnrc_ext_to_nnrc_eq</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_eval"><span class="id" title="definition">nnrc_ext_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Semantics.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
</div>

<div class="doc">
Since we rely on cNNRC abstract syntax for the whole NNRC, it is important to check that translating to the core does not reuse the additional operations only present in NNRC. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_ext_to_nnrc_is_core"><span class="id" title="lemma">nnrc_ext_to_nnrc_is_core</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrcIsCore"><span class="id" title="definition">nnrcIsCore</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
</div>

<div class="doc">
The following function effectively returns an abstract syntax
    tree with the right type for cNNRC. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a name="nnrc_to_nnrc_core"><span class="id" title="definition">nnrc_to_nnrc_core</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) : <a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core"><span class="id" title="definition">nnrc_core</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>.<br/>

<br/>
</div>

<div class="doc">
Additional properties of the translation from NNRC to cNNRC. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="core_nnrc_to_nnrc_ext_id"><span class="id" title="lemma">core_nnrc_to_nnrc_ext_id</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrcIsCore"><span class="id" title="definition">nnrcIsCore</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="core_nnrc_to_nnrc_ext_idempotent"><span class="id" title="lemma">core_nnrc_to_nnrc_ext_idempotent</span></a> (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e1"><span class="id" title="variable">e1</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a name="core_nnrc_to_nnrc_ext_idempotent_corr"><span class="id" title="lemma">core_nnrc_to_nnrc_ext_idempotent_corr</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Remark</span> <a name="nnrc_to_nnrc_ext_eq"><span class="id" title="lemma">nnrc_to_nnrc_ext_eq</span></a> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrcIsCore"><span class="id" title="definition">nnrcIsCore</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#nnrc_core_eval"><span class="id" title="definition">nnrc_core_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Semantics.h"><span class="id" title="variable">h</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_eval"><span class="id" title="definition">nnrc_ext_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>.<br/>

<br/>
</div>

<div class="doc">
we are only sensitive to the environment up to lookup 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="nnrc_ext_eval_lookup_equiv_prop"><span class="id" title="instance">nnrc_ext_eval_lookup_equiv_prop</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="Qcert.Basic.Util.RAssoc.html#lookup_equiv"><span class="id" title="definition">lookup_equiv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_eval"><span class="id" title="definition">nnrc_ext_eval</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Semantics"><span class="id" title="section">Semantics</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h1 class="section">Additional Properties</h1>

<div class="paragraph"> </div>

 Most of the following properties are useful for shadowing and variable substitution on the full NNRC. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="NNRC.Properties"><span class="id" title="section">Properties</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">h</span>:<a class="idref" href="Qcert.Basic.Data.BrandRelation.html#brand_relation_t"><span class="id" title="definition">brand_relation_t</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_ext_to_nnrc_free_vars_same"><span class="id" title="lemma">nnrc_ext_to_nnrc_free_vars_same</span></a> <span class="id" title="var">e</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_free_vars"><span class="id" title="definition">nnrc_free_vars</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_free_vars"><span class="id" title="definition">nnrc_free_vars</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_ext_to_nnrc_bound_vars_impl"><span class="id" title="lemma">nnrc_ext_to_nnrc_bound_vars_impl</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_bound_vars"><span class="id" title="definition">nnrc_bound_vars</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_bound_vars"><span class="id" title="definition">nnrc_bound_vars</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_ext_to_nnrc_bound_vars_impl_not"><span class="id" title="lemma">nnrc_ext_to_nnrc_bound_vars_impl_not</span></a> <span class="id" title="var">x</span> <span class="id" title="var">e</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_bound_vars"><span class="id" title="definition">nnrc_bound_vars</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_bound_vars"><span class="id" title="definition">nnrc_bound_vars</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="really_fresh_in_ext"><span class="id" title="definition">really_fresh_in_ext</span></a> <span class="id" title="var">sep</span> <span class="id" title="var">oldvar</span> <span class="id" title="var">avoid</span> <span class="id" title="var">e</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#really_fresh_in"><span class="id" title="definition">really_fresh_in</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sep"><span class="id" title="variable">sep</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#oldvar"><span class="id" title="variable">oldvar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#avoid"><span class="id" title="variable">avoid</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="really_fresh_from_free_ext"><span class="id" title="lemma">really_fresh_from_free_ext</span></a> <span class="id" title="var">sep</span> <span class="id" title="var">old</span> <span class="id" title="var">avoid</span> (<span class="id" title="var">e</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#really_fresh_in_ext"><span class="id" title="definition">really_fresh_in_ext</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sep"><span class="id" title="variable">sep</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#old"><span class="id" title="variable">old</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#avoid"><span class="id" title="variable">avoid</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>) (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_free_vars"><span class="id" title="definition">nnrc_free_vars</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_ext_to_nnrc_subst_comm"><span class="id" title="lemma">nnrc_ext_to_nnrc_subst_comm</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">v1</span> <span class="id" title="var">e2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_subst"><span class="id" title="definition">nnrc_subst</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e1"><span class="id" title="variable">e1</span></a>) <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v1"><span class="id" title="variable">v1</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e2"><span class="id" title="variable">e2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_subst"><span class="id" title="definition">nnrc_subst</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e2"><span class="id" title="variable">e2</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_ext_to_nnrc_rename_lazy_comm"><span class="id" title="lemma">nnrc_ext_to_nnrc_rename_lazy_comm</span></a> <span class="id" title="var">e</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_rename_lazy"><span class="id" title="definition">nnrc_rename_lazy</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v2"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_rename_lazy"><span class="id" title="definition">nnrc_rename_lazy</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v2"><span class="id" title="variable">v2</span></a>).<br/>

<br/>
</div>

<div class="doc">
Unshadow properties for the full NNRC. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="unshadow_over_nnrc_ext_idem"><span class="id" title="lemma">unshadow_over_nnrc_ext_idem</span></a> <span class="id" title="var">sep</span> <span class="id" title="var">renamer</span> <span class="id" title="var">avoid</span> <span class="id" title="var">e</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#unshadow"><span class="id" title="definition">unshadow</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sep"><span class="id" title="variable">sep</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#renamer"><span class="id" title="variable">renamer</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#avoid"><span class="id" title="variable">avoid</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#unshadow"><span class="id" title="definition">unshadow</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#sep"><span class="id" title="variable">sep</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#renamer"><span class="id" title="variable">renamer</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#avoid"><span class="id" title="variable">avoid</span></a> (<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_to_nnrc"><span class="id" title="definition">nnrc_ext_to_nnrc</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="nnrc_ext_eval_cons_subst"><span class="id" title="lemma">nnrc_ext_eval_cons_subst</span></a> <span class="id" title="var">e</span> <span class="id" title="var">env</span> <span class="id" title="var">v</span> <span class="id" title="var">x</span> <span class="id" title="var">v'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v'"><span class="id" title="variable">v'</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_free_vars"><span class="id" title="definition">nnrc_free_vars</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v'"><span class="id" title="variable">v'</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_bound_vars"><span class="id" title="definition">nnrc_bound_vars</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_eval"><span class="id" title="definition">nnrc_ext_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Properties.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v'"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a>) (<a class="idref" href="Qcert.NNRC.Core.cNNRCShadow.html#nnrc_subst"><span class="id" title="definition">nnrc_subst</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="Qcert.NNRC.Core.cNNRC.html#NNRCVar"><span class="id" title="constructor">NNRCVar</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v'"><span class="id" title="variable">v'</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_eval"><span class="id" title="definition">nnrc_ext_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Properties.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="Qcert.NNRC.Lang.NNRC.html#env"><span class="id" title="variable">env</span></a>) <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#e"><span class="id" title="variable">e</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Properties"><span class="id" title="section">Properties</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h1 class="section">Toplevel</h1>

<div class="paragraph"> </div>

 Top-level evaluation is used externally by the Q*cert
  compiler. It takes an NNRC expression and a global environment as
  input. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a name="NNRC.Top"><span class="id" title="section">Top</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">h</span>:<a class="idref" href="Qcert.Basic.Data.BrandRelation.html#brand_relation_t"><span class="id" title="definition">brand_relation_t</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="nnrc_eval_top"><span class="id" title="definition">nnrc_eval_top</span></a> (<span class="id" title="var">q</span>:<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc"><span class="id" title="definition">nnrc</span></a>) (<span class="id" title="var">cenv</span>:<a class="idref" href="Qcert.Basic.Data.RData.html#bindings"><span class="id" title="definition">bindings</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Qcert.Basic.Data.RData.html#data"><span class="id" title="inductive">data</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="Qcert.NNRC.Lang.NNRC.html#nnrc_ext_eval"><span class="id" title="definition">nnrc_ext_eval</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Top.h"><span class="id" title="variable">h</span></a> (<a class="idref" href="Qcert.Basic.Util.RBindings.html#rec_sort"><span class="id" title="definition">rec_sort</span></a> (<a class="idref" href="Qcert.Basic.Env.RConstants.html#mkConstants"><span class="id" title="definition">mkConstants</span></a> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#cenv"><span class="id" title="variable">cenv</span></a>)) <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#q"><span class="id" title="variable">q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC.Top"><span class="id" title="section">Top</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Qcert.NNRC.Lang.NNRC.html#NNRC"><span class="id" title="section">NNRC</span></a>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>