
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.NRAEnv.Optim.NRAEnvOptimizer</title>
<meta name="description" content="Documentation of Coq module Qcert.NRAEnv.Optim.NRAEnvOptimizer" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.NRAEnv.Optim.NRAEnvOptimizer</h1>
<div class="coq">
<br/>
<span class="kwd">Section</span> <span class="id"><a name="NRAEnvOptimizer">NRAEnvOptimizer</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Equivalence.html">Equivalence</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Setoids.Setoid.html">Setoid</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html">EquivDec</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="kwd">Program</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html">ListSet</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Utils.Utils.html">Utils</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Common.CommonSystem.html">CommonSystem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.cNRAEnv.cNRAEnvSystem.html">cNRAEnvSystem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.NRAEnv.NRAEnvSystem.html">NRAEnvSystem</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html">OptimizerStep</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html">OptimizerLogger</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvRewrite.html">NRAEnvRewrite</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html">TNRAEnvRewrite</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">nraenv_scope</span>.<br/>
&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">tcorrectness_prover</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">repeat</span> <span class="tactic">progress</span> (<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span> [<span class="kwd">match</span> ?<span class="id">p</span> <span class="kwd">with</span> | <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] ] =&gt; <span class="tactic">destruct</span> <span class="id">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Equivalence.html#equiv">Equivalence.equiv</a></span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">subst</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">tprove_correctness</span> <span class="id">p</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tcorrectness_prover</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tnraenv_rewrites_to_trans">tnraenv_rewrites_to_trans</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p1</span> <span class="id">p2</span> <span class="id">p3</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p1">p1</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p2">p2</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p2">p2</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p3">p3</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p1">p1</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p3">p3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2203')">Proof.</div>
<div class="proofscript" id="proof2203">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">transitivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="AUX">AUX</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">f</span> <span class="id">p</span> <span class="id">p</span>':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>) -&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id">p</span>' -&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">p</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2204')">Proof.</div>
<div class="proofscript" id="proof2204">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">H</span> <span class="id">p</span>') <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Apply the function f to the direct child of p </div>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnvOptimizer.rewriter">rewriter</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nraenv_map">nraenv_map</a></span> (<span class="id">f</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">rd</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">rd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">bop</span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">bop</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">uop</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">uop</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapConcat">NRAEnvMapConcat</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapConcat">NRAEnvMapConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">s</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvFlatMap">NRAEnvFlatMap</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvFlatMap">NRAEnvFlatMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvJoin">NRAEnvJoin</a></span> <span class="id">op1</span> <span class="id">op2</span> <span class="id">op3</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvJoin">NRAEnvJoin</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProject">NRAEnvProject</a></span> <span class="id">sl</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProject">NRAEnvProject</a></span> <span class="id">sl</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGroupBy">NRAEnvGroupBy</a></span> <span class="id">s</span> <span class="id">sl</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGroupBy">NRAEnvGroupBy</a></span> <span class="id">s</span> <span class="id">sl</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnnest">NRAEnvUnnest</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnnest">NRAEnvUnnest</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">Apply the function f to all subexpression fo p. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nraenv_map_deep">nraenv_map_deep</a></span> (<span class="id">f</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">rd</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">rd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">bop</span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">bop</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">uop</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">uop</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapConcat">NRAEnvMapConcat</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapConcat">NRAEnvMapConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">s</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvFlatMap">NRAEnvFlatMap</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvFlatMap">NRAEnvFlatMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvJoin">NRAEnvJoin</a></span> <span class="id">op1</span> <span class="id">op2</span> <span class="id">op3</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvJoin">NRAEnvJoin</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op2</span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProject">NRAEnvProject</a></span> <span class="id">sl</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProject">NRAEnvProject</a></span> <span class="id">sl</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGroupBy">NRAEnvGroupBy</a></span> <span class="id">s</span> <span class="id">sl</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGroupBy">NRAEnvGroupBy</a></span> <span class="id">s</span> <span class="id">sl</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnnest">NRAEnvUnnest</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">op1</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnnest">NRAEnvUnnest</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">op1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#NRAEnvOptimizer.rewriter">rewriter</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnvOptimizer.dup">dup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nraenv_nodupA">nraenv_nodupA</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">q</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvRewrite.html#nodupA">nodupA</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_of_nraenv">nraenv_core_of_nraenv</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#q">q</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nodupA_checker">nodupA_checker</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADistinct">ADistinct</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMinus">AMinus</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂ =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nodupA_checker">nodupA_checker</a></span> <span class="id">p</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nodupA_checker_correct">nodupA_checker_correct</a></span> {<span class="id">bm</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nodupA_checker">nodupA_checker</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_nodupA">nraenv_nodupA</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2205')">Proof.</div>
<div class="proofscript" id="proof2205">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">p</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">nd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#olift2">olift2</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case_in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case_in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Common.Data.RRelation.html#rondcoll2">rondcoll2</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.Lift.html#some_lift">some_lift</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? ? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Common.Data.RRelation.html#ondcoll2">ondcoll2</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.Bag.html#bminus_NoDup">bminus_NoDup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHp2</span> <span class="id">nd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHp2</span> <span class="id">h</span> <span class="id">c</span> <span class="id">dn_c</span> <span class="id">env</span> <span class="id">dn_env</span> <span class="id">x</span> <span class="id">dn_x</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#olift">olift</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case_in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Common.Data.RRelation.html#rondcoll">rondcoll</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.Lift.html#some_lift">some_lift</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [? ? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Common.Data.RRelation.html#ondcoll">ondcoll</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.Bag.html#bdistinct_NoDup">bdistinct_NoDup</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="dup_elim_fun">dup_elim_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADistinct">ADistinct</a></span> <span class="id">q</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nodupA_checker">nodupA_checker</a></span> <span class="id">q</span> <span class="kwd">then</span> <span class="id">q</span> <span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="dup_elim_fun_correctness">dup_elim_fun_correctness</a></span> {<span class="id">bm</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#dup_elim_fun">dup_elim_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ≡ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2206')">Proof.</div>
<div class="proofscript" id="proof2206">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">nd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvEq.html#lift_nraenv_eq_to_nraenv_core_eq">lift_nraenv_eq_to_nraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvRewrite.html#dup_elim">dup_elim</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nodupA_checker_correct">nodupA_checker_correct</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#NRAEnvOptimizer.dup">dup</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnraenv_map">tnraenv_map</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} := <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map">nraenv_map</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tnraenv_map_correctness">tnraenv_map_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span>', <span class="id">p</span>' ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">p</span>') -&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_map">tnraenv_map</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2207')">Proof.</div>
<div class="proofscript" id="proof2207">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_cases</span> (<span class="tactic">induction</span> <span class="id">p</span>) <span class="id">Case</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id">Hf</span>]; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> (<span class="id">H</span> <span class="id">p1</span>) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> (<span class="id">H</span> <span class="id">p2</span>) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> (<span class="id">H</span> <span class="id">p3</span>) <span class="tactic">at</span> 1; <span class="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> (<span class="id">H</span> <span class="id">p1</span>) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> (<span class="id">H</span> <span class="id">p2</span>) <span class="tactic">at</span> 1; <span class="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> (<span class="id">H</span> <span class="id">p</span>) <span class="tactic">at</span> 1; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnraenv_map_deep">tnraenv_map_deep</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} := <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep">nraenv_map_deep</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nraenv_map_deep_correctness">nraenv_map_deep_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p</span>', <span class="id">p</span>' ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id">p</span>') -&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_map_deep">tnraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2208')">Proof.</div>
<div class="proofscript" id="proof2208">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">f</span> <span class="id">p</span> <span class="id">Hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_cases</span> (<span class="tactic">induction</span> <span class="id">p</span>) <span class="id">Case</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id">Hf</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id">IHp1</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">IHp2</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">IHp3</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Hf</span> <span class="tactic">at</span> 1; <span class="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id">IHp1</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">IHp2</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Hf</span> <span class="tactic">at</span> 1; <span class="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHp</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Hf</span> <span class="tactic">at</span> 1; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tand_comm_fun">tand_comm_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AAnd">AAnd</a></span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AAnd">AAnd</a></span> <span class="id">op2</span> <span class="id">op1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tand_comm_fun_correctness">tand_comm_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tand_comm_fun">tand_comm_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2209')">Proof.</div>
<div class="proofscript" id="proof2209">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tand_comm_arrow">tand_comm_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tand_comm_fun_correctness">tand_comm_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tand_comm_step">tand_comm_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">and</span> <span class="id">commute</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Swap</span> <span class="id">the</span> <span class="id">arguments</span> <span class="id">to</span> <span class="id">the</span> <span class="id">boolean</span> <span class="id">and</span> <span class="id">operator</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tand_comm_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tand_comm_fun">tand_comm_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tand_comm_step_correct">tand_comm_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tand_comm_step">tand_comm_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tand_comm_fun_correctness">tand_comm_fun_correctness</a></span>.<br/>
<br/>
 <br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_and_comm_fun">tselect_and_comm_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AAnd">AAnd</a></span> <span class="id">op1</span> <span class="id">op2</span>) <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AAnd">AAnd</a></span> <span class="id">op2</span> <span class="id">op1</span>) <span class="id">op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tselect_and_comm_fun_correctness">tselect_and_comm_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_comm_fun">tselect_and_comm_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2210')">Proof.</div>
<div class="proofscript" id="proof2210">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_and_comm_arrow">tselect_and_comm_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_comm_fun_correctness">tselect_and_comm_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_and_comm_step">tselect_and_comm_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">select</span>/<span class="id">and</span> <span class="id">swap</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Swap</span> <span class="id">the</span> <span class="id">arguments</span> <span class="id">to</span> <span class="id">the</span> <span class="id">boolean</span> <span class="id">operator</span> <span class="id">when</span> <span class="id">it</span> <span class="id">is</span> <span class="id">used</span> <span class="kwd">in</span> <span class="id">a</span> <span class="id">selection</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tselect_and_comm_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_comm_fun">tselect_and_comm_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_and_comm_step_correct">tselect_and_comm_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_comm_step">tselect_and_comm_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_comm_fun_correctness">tselect_and_comm_fun_correctness</a></span>.<br/>
<br/>
<div class="doc">σ⟨ q ⟩(q₁ ⋃ q₂) ⇒ σ⟨ q ⟩(q₁) ⋃ σ⟨ q ⟩(q₂) </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="select_union_distr_fun">select_union_distr_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">op</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AUnion">AUnion</a></span> <span class="id">op1</span> <span class="id">op2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AUnion">AUnion</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">op</span> <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">op</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="select_union_distr_fun_correctness">select_union_distr_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_fun">select_union_distr_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2211')">Proof.</div>
<div class="proofscript" id="proof2211">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_union_distr">tselect_union_distr</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_fun_correctness">select_union_distr_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="select_union_distr_step">select_union_distr_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">select</span>/<span class="id">union</span> <span class="id">distr</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Pushes</span> <span class="id">selection</span> <span class="id">through</span> <span class="id">union</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">select_union_distr_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_fun">select_union_distr_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="select_union_distr_step_correct">select_union_distr_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_step">select_union_distr_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_fun_correctness">select_union_distr_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_and_fun">tselect_and_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">op1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">op2</span> <span class="id">op</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AAnd">AAnd</a></span> <span class="id">op2</span> <span class="id">op1</span>) <span class="id">op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tselect_and_fun_correctness">tselect_and_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_fun">tselect_and_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2212')">Proof.</div>
<div class="proofscript" id="proof2212">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_and_arrow">tselect_and_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_fun_correctness">tselect_and_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_and_step">tselect_and_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">select</span>/<span class="id">select</span> <span class="id">fusion</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Fuse</span> <span class="id">nested</span> <span class="id">selections</span> <span class="id">into</span> <span class="id">a</span> <span class="id">single</span> <span class="id">selection</span> <span class="kwd">using</span> <span class="id">a</span> <span class="id">conjunction</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tselect_and_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_fun">tselect_and_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_and_step_correct">tselect_and_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_step">tselect_and_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_fun_correctness">tselect_and_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_from_duplicate_r_fun">tdot_from_duplicate_r_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>') <span class="id">op2</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">s2</span> == <span class="id">s2</span>' <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">op2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tdot_from_duplicate_r_fun_correctness">tdot_from_duplicate_r_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_fun">tdot_from_duplicate_r_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2213')">Proof.</div>
<div class="proofscript" id="proof2213">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvdot_from_duplicate_r_arrow">tenvdot_from_duplicate_r_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_fun_correctness">tdot_from_duplicate_r_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_from_duplicate_r_step">tdot_from_duplicate_r_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">dot</span>/<span class="id">concat</span>/<span class="id">rec</span> <span class="id">right</span> <span class="id">dup</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">field</span> <span class="id">lookup</span> <span class="id">of</span> <span class="id">a</span> <span class="id">concatenation</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">record</span> <span class="id">creation</span> <span class="id">of</span> <span class="id">that</span> <span class="id">field</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tdot_from_duplicate_r_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_fun">tdot_from_duplicate_r_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_from_duplicate_r_step_correct">tdot_from_duplicate_r_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_step">tdot_from_duplicate_r_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_fun_correctness">tdot_from_duplicate_r_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_from_duplicate_l_fun">tdot_from_duplicate_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">s1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>') <span class="id">op1</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>) <span class="id">op2</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id">s1</span> &lt;&gt; <span class="id">s2</span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">s1</span> == <span class="id">s1</span>' <span class="kwd">then</span> <span class="id">op1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tdot_from_duplicate_l_fun_correctness">tdot_from_duplicate_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_fun">tdot_from_duplicate_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2214')">Proof.</div>
<div class="proofscript" id="proof2214">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvdot_from_duplicate_l_arrow">tenvdot_from_duplicate_l_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_fun_correctness">tdot_from_duplicate_l_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_from_duplicate_l_step">tdot_from_duplicate_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">dot</span>/<span class="id">concat</span>/<span class="id">rec</span> <span class="id">left</span> <span class="id">dup</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">field</span> <span class="id">lookup</span> <span class="id">of</span> <span class="id">a</span> <span class="id">concatenation</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">record</span> <span class="id">creation</span> <span class="id">of</span> <span class="id">that</span> <span class="id">field</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tdot_from_duplicate_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_fun">tdot_from_duplicate_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_from_duplicate_l_step_correct">tdot_from_duplicate_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_step">tdot_from_duplicate_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_fun_correctness">tdot_from_duplicate_l_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_coll_fun">tflatten_coll_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p</span>) =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflatten_coll_fun_correctness">tflatten_coll_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_fun">tflatten_coll_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2215')">Proof.</div>
<div class="proofscript" id="proof2215">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvflatten_coll_arrow">tenvflatten_coll_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_fun_correctness">tflatten_coll_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_coll_step">tflatten_coll_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">coll</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_coll_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_fun">tflatten_coll_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_coll_step_correct">tflatten_coll_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_step">tflatten_coll_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_fun_correctness">tflatten_coll_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_empty_record_r_fun">tconcat_empty_record_r_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> <span class="id">p</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> [])) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tconcat_empty_record_r_fun_correctness">tconcat_empty_record_r_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_fun">tconcat_empty_record_r_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2216')">Proof.</div>
<div class="proofscript" id="proof2216">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tconcat_empty_record_r_arrow">tconcat_empty_record_r_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_fun_correctness">tconcat_empty_record_r_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_empty_record_r_step">tconcat_empty_record_r_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">concat</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Remove</span> <span class="id">concatenation</span> <span class="kwd">with</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">record</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tconcat_empty_record_r_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_fun">tconcat_empty_record_r_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_empty_record_r_step_correct">tconcat_empty_record_r_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_step">tconcat_empty_record_r_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_fun_correctness">tconcat_empty_record_r_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_empty_record_l_fun">tconcat_empty_record_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> [])) <span class="id">p</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tconcat_empty_record_l_fun_correctness">tconcat_empty_record_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_fun">tconcat_empty_record_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2217')">Proof.</div>
<div class="proofscript" id="proof2217">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tconcat_empty_record_l_arrow">tconcat_empty_record_l_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_fun_correctness">tconcat_empty_record_l_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_empty_record_l_step">tconcat_empty_record_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">concat</span>/<span class="id">nil</span> <span class="id">left</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Remove</span> <span class="id">concatenation</span> <span class="kwd">with</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">record</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tconcat_empty_record_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_fun">tconcat_empty_record_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_empty_record_l_step_correct">tconcat_empty_record_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_step">tconcat_empty_record_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_fun_correctness">tconcat_empty_record_l_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_concat_r_fun">tdot_over_concat_r_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">a</span>₂) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">a</span>₁) <span class="id">q</span>₂)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">a</span>₁ == <span class="id">a</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">q</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">a</span>₂) <span class="id">q</span>₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tdot_over_concat_r_fun_correctness">tdot_over_concat_r_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_fun">tdot_over_concat_r_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2218')">Proof.</div>
<div class="proofscript" id="proof2218">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tdot_over_concat_eq_r_arrow">tdot_over_concat_eq_r_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tdot_over_concat_neq_r_arrow">tdot_over_concat_neq_r_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_fun_correctness">tdot_over_concat_r_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_concat_r_step">tdot_over_concat_r_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">dot</span>/<span class="id">concat</span>/<span class="id">rec</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">field</span> <span class="id">lookup</span> <span class="id">of</span> <span class="id">a</span> <span class="id">concatenation</span> <span class="id">of</span> <span class="id">a</span> <span class="id">record</span> <span class="id">construction</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tdot_over_concat_r_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_fun">tdot_over_concat_r_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_concat_r_step_correct">tdot_over_concat_r_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_step">tdot_over_concat_r_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_fun_correctness">tdot_over_concat_r_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_concat_l_fun">tdot_over_concat_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">a</span>₂) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">a</span>₁) <span class="id">q</span>₁) <span class="id">q</span>₂) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">a</span>₁ == <span class="id">a</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">a</span>₂) <span class="id">q</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tdot_over_concat_l_fun_correctness">tdot_over_concat_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_fun">tdot_over_concat_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2219')">Proof.</div>
<div class="proofscript" id="proof2219">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tdot_over_concat_neq_l_arrow">tdot_over_concat_neq_l_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_fun_correctness">tdot_over_concat_l_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_concat_l_step">tdot_over_concat_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">dot</span>/<span class="id">concat</span>/<span class="id">rec</span> <span class="id">left</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">field</span> <span class="id">lookup</span> <span class="id">of</span> <span class="id">a</span> <span class="id">concatenation</span> <span class="id">of</span> <span class="id">a</span> <span class="id">record</span> <span class="id">construction</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tdot_over_concat_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_fun">tdot_over_concat_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_concat_l_step_correct">tdot_over_concat_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_step">tdot_over_concat_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_fun_correctness">tdot_over_concat_l_fun_correctness</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_empty_record_r_fun">tmerge_empty_record_r_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id">p</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> [])) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmerge_empty_record_r_fun_correctness">tmerge_empty_record_r_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_fun">tmerge_empty_record_r_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2220')">Proof.</div>
<div class="proofscript" id="proof2220">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmerge_empty_record_r_arrow">tmerge_empty_record_r_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_fun_correctness">tmerge_empty_record_r_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_empty_record_r_step">tmerge_empty_record_r_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">merge</span>-<span class="id">concat</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">merge</span> <span class="id">concat</span> <span class="id">of</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">record</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmerge_empty_record_r_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_fun">tmerge_empty_record_r_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_empty_record_r_step_correct">tmerge_empty_record_r_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_step">tmerge_empty_record_r_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_fun_correctness">tmerge_empty_record_r_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_empty_record_l_fun">tmerge_empty_record_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> [])) <span class="id">p</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmerge_empty_record_l_fun_correctness">tmerge_empty_record_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_fun">tmerge_empty_record_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2221')">Proof.</div>
<div class="proofscript" id="proof2221">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmerge_empty_record_l_arrow">tmerge_empty_record_l_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_fun_correctness">tmerge_empty_record_l_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_empty_record_l_step">tmerge_empty_record_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">merge</span>-<span class="id">concat</span>/<span class="id">nil</span> <span class="id">left</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">merge</span> <span class="id">concat</span> <span class="id">of</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">record</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmerge_empty_record_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_fun">tmerge_empty_record_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_empty_lecord_l_step_correct">tmerge_empty_lecord_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_step">tmerge_empty_record_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_fun_correctness">tmerge_empty_record_l_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_into_id_fun">tmap_into_id_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_into_id_fun_correctness">tmap_into_id_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_fun">tmap_into_id_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2222')">Proof.</div>
<div class="proofscript" id="proof2222">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvmap_into_id_arrow">tenvmap_into_id_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_fun_correctness">tmap_into_id_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_into_id_step">tmap_into_id_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">id</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">map</span> <span class="id">of</span> <span class="id">ID</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_into_id_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_fun">tmap_into_id_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_into_id_step_correct">tmap_into_id_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_step">tmap_into_id_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_fun_correctness">tmap_into_id_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_map_coll_fun">tflatten_map_coll_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p1</span>) <span class="id">p2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p1</span> <span class="id">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflatten_map_coll_fun_correctness">tflatten_map_coll_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_fun">tflatten_map_coll_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2223')">Proof.</div>
<div class="proofscript" id="proof2223">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvflatten_map_coll_arrow">tenvflatten_map_coll_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_fun_correctness">tflatten_map_coll_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_map_coll_step">tflatten_map_coll_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">coll</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">the</span> <span class="id">map</span> <span class="id">of</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_map_coll_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_fun">tflatten_map_coll_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_map_coll_step_correct">tflatten_map_coll_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_step">tflatten_map_coll_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_fun_correctness">tflatten_map_coll_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_flatten_map_either_nil_fun">tflatten_flatten_map_either_nil_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₂) <span class="id">p</span>₃)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> <span class="id">p</span>₁)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₂) <span class="id">p</span>₃)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflatten_flatten_map_either_nil_fun_correctness">tflatten_flatten_map_either_nil_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_fun">tflatten_flatten_map_either_nil_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2224')">Proof.</div>
<div class="proofscript" id="proof2224">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflatten_flatten_map_either_nil">tflatten_flatten_map_either_nil</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_fun_correctness">tflatten_flatten_map_either_nil_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_flatten_map_either_nil_step">tflatten_flatten_map_either_nil_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">app</span>/<span class="id">either</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">nested</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">an</span> <span class="id">either</span> <span class="id">nil</span> (<span class="id">under</span> <span class="id">an</span> <span class="id">application</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_flatten_map_either_nil_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_fun">tflatten_flatten_map_either_nil_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_flatten_map_either_nil_step_correct">tflatten_flatten_map_either_nil_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_step">tflatten_flatten_map_either_nil_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_fun_correctness">tflatten_flatten_map_either_nil_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_map_compose_fun">tmap_map_compose_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p2</span> <span class="id">p3</span>) =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_map_compose_fun_correctness">tmap_map_compose_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_fun">tmap_map_compose_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2225')">Proof.</div>
<div class="proofscript" id="proof2225">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvmap_map_compose_arrow">tenvmap_map_compose_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_fun_correctness">tmap_map_compose_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_map_compose_step">tmap_map_compose_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Fuses</span> <span class="id">nested</span> <span class="id">maps</span> <span class="id">together</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_map_compose_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_fun">tmap_map_compose_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_map_compose_step_correct">tmap_map_compose_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_step">tmap_map_compose_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_fun_correctness">tmap_map_compose_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_singleton_fun">tmap_singleton_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p2</span>) =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_singleton_fun_correctness">tmap_singleton_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_fun">tmap_singleton_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2226')">Proof.</div>
<div class="proofscript" id="proof2226">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvmap_singleton_arrow">tenvmap_singleton_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_fun_correctness">tmap_singleton_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_singleton_step">tmap_singleton_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">coll</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Lowers</span> <span class="id">a</span> <span class="id">map</span> <span class="id">over</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_singleton_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_fun">tmap_singleton_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_singleton_step_correct">tmap_singleton_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_step">tmap_singleton_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_fun_correctness">tmap_singleton_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_id_r_fun">tapp_over_id_r_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_id_r_fun_correctness">tapp_over_id_r_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_fun">tapp_over_id_r_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2227')">Proof.</div>
<div class="proofscript" id="proof2227">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_id_r_arrow">tapp_over_id_r_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_fun_correctness">tapp_over_id_r_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_id_r_step">tapp_over_id_r_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">id</span> <span class="id">arg</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">application</span> <span class="id">to</span> <span class="id">ID</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_id_r_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_fun">tapp_over_id_r_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_id_r_step_correct">tapp_over_id_r_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_step">tapp_over_id_r_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_fun_correctness">tapp_over_id_r_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_env_fun">tapp_over_env_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_env_fun_correctness">tapp_over_env_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_fun">tapp_over_env_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2228')">Proof.</div>
<div class="proofscript" id="proof2228">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_env_arrow">tapp_over_env_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_fun_correctness">tapp_over_env_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_env_step">tapp_over_env_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">env</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">applications</span> <span class="id">of</span> <span class="id">ENV</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_env_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_fun">tapp_over_env_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_env_step_correct">tapp_over_env_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_step">tapp_over_env_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_fun_correctness">tapp_over_env_fun_correctness</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_id_l_fun">tapp_over_id_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_id_l_fun_correctness">tapp_over_id_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_fun">tapp_over_id_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2229')">Proof.</div>
<div class="proofscript" id="proof2229">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_id_l_arrow">tapp_over_id_l_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_fun_correctness">tapp_over_id_l_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_id_l_step">tapp_over_id_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">id</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">applications</span> <span class="id">of</span> <span class="id">ID</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_id_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_fun">tapp_over_id_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_id_l_step_correct">tapp_over_id_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_step">tapp_over_id_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_fun_correctness">tapp_over_id_l_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_ignoreid_fun">tapp_over_ignoreid_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">p1</span> <span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_ignoreid_fun_correctness">tapp_over_ignoreid_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_fun">tapp_over_ignoreid_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2230')">Proof.</div>
<div class="proofscript" id="proof2230">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p1</span>); <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_ignoreid_arrow">tapp_over_ignoreid_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_eq">nraenv_ignores_id_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_nraenv_core_eq">nraenv_ignores_id_nraenv_core_eq</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_ignoreid_step">tapp_over_ignoreid_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">ignore</span>-<span class="id">id</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">application</span> <span class="id">of</span> <span class="id">expressions</span> <span class="id">that</span> <span class="id">ignore</span> <span class="id">ID</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_ignoreid_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_fun">tapp_over_ignoreid_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_ignoreid_step_correct">tapp_over_ignoreid_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_step">tapp_over_ignoreid_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_fun_correctness">tapp_over_ignoreid_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_l_fun">tappenv_over_env_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_env_l_fun_correctness">tappenv_over_env_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_fun">tappenv_over_env_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2231')">Proof.</div>
<div class="proofscript" id="proof2231">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_env_l_arrow">tappenv_over_env_l_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_l_step">tappenv_over_env_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">env</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">environment</span> <span class="id">applications</span> <span class="id">of</span> <span class="id">the</span> <span class="id">environment</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_env_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_fun">tappenv_over_env_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_l_step_correct">tappenv_over_env_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_step">tappenv_over_env_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_fun_correctness">tappenv_over_env_l_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_r_fun">tappenv_over_env_r_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_env_r_fun_correctness">tappenv_over_env_r_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_fun">tappenv_over_env_r_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2232')">Proof.</div>
<div class="proofscript" id="proof2232">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_env_r_arrow">tappenv_over_env_r_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_r_step">tappenv_over_env_r_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">env</span> <span class="id">arg</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">environment</span> <span class="id">applications</span> <span class="id">to</span> <span class="id">the</span> <span class="id">environment</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_env_r_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_fun">tappenv_over_env_r_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_r_step_correct">tappenv_over_env_r_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_step">tappenv_over_env_r_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_fun_correctness">tappenv_over_env_r_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_ignoreenv_fun">tappenv_over_ignoreenv_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">p1</span> <span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_ignoreenv_fun_correctness">tappenv_over_ignoreenv_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_fun">tappenv_over_ignoreenv_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2233')">Proof.</div>
<div class="proofscript" id="proof2233">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">p1</span>); <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_ignoreenv_arrow">tappenv_over_ignoreenv_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_eq">nraenv_ignores_env_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_nraenv_core_eq">nraenv_ignores_env_nraenv_core_eq</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_ignoreenv_step">tappenv_over_ignoreenv_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">ignore</span>-<span class="id">env</span> <span class="id">arg</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">environment</span> <span class="id">applications</span> <span class="id">that</span> <span class="id">ignore</span> <span class="id">the</span> <span class="id">environment</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_ignoreenv_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_fun">tappenv_over_ignoreenv_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_ignoreenv_step_correct">tappenv_over_ignoreenv_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_step">tappenv_over_ignoreenv_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_fun_correctness">tappenv_over_ignoreenv_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_app_fun">tapp_over_app_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> <span class="id">p3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_app_fun_correctness">tapp_over_app_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_fun">tapp_over_app_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2234')">Proof.</div>
<div class="proofscript" id="proof2234">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_app_arrow">tapp_over_app_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_fun_correctness">tapp_over_app_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_app_step">tapp_over_app_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">app</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Reorder</span> <span class="id">nested</span> <span class="id">applications</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_app_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_fun">tapp_over_app_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_app_step_correct">tapp_over_app_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_step">tapp_over_app_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_fun_correctness">tapp_over_app_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_appenv_fun">tappenv_over_appenv_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p2</span> <span class="id">p3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_appenv_fun_correctness">tappenv_over_appenv_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_fun">tappenv_over_appenv_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2235')">Proof.</div>
<div class="proofscript" id="proof2235">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_appenv_arrow">tappenv_over_appenv_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_fun_correctness">tappenv_over_appenv_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_appenv_step">tappenv_over_appenv_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">app</span>-<span class="id">env</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Reorder</span> <span class="id">nested</span> <span class="id">environment</span> <span class="id">applications</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_appenv_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_fun">tappenv_over_appenv_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_appenv_step_correct">tappenv_over_appenv_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_step">tappenv_over_appenv_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_fun_correctness">tappenv_over_appenv_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_app_fun">tappenv_over_app_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">p1</span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span>(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p2</span> <span class="id">p3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p3</span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p3</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p2</span> <span class="id">p3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_app_fun_correctness">tappenv_over_app_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_fun">tappenv_over_app_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2236')">Proof.</div>
<div class="proofscript" id="proof2236">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">p1_1</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_app_ie_arrow">tappenv_over_app_ie_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_eq">nraenv_ignores_env_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_nraenv_core_eq">nraenv_ignores_env_nraenv_core_eq</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_of_nraenv">nraenv_core_of_nraenv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p2</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_app_arrow">tappenv_over_app_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_eq">nraenv_ignores_id_eq</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_nraenv_core_eq">nraenv_ignores_id_nraenv_core_eq</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_of_nraenv">nraenv_core_of_nraenv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_fun_correctness">tappenv_over_app_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_app_step">tappenv_over_app_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">app</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">application</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_app_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_fun">tappenv_over_app_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_app_step_correct">tappenv_over_app_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_step">tappenv_over_app_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_fun_correctness">tappenv_over_app_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_appenv_fun">tapp_over_appenv_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p1</span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> <span class="id">p3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_appenv_fun_correctness">tapp_over_appenv_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_fun">tapp_over_appenv_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2237')">Proof.</div>
<div class="proofscript" id="proof2237">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p1_1</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_appenv_arrow">tapp_over_appenv_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_eq">nraenv_ignores_id_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_nraenv_core_eq">nraenv_ignores_id_nraenv_core_eq</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_of_nraenv">nraenv_core_of_nraenv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_appenv_step">tapp_over_appenv_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">app</span>-<span class="id">env</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">application</span> <span class="id">through</span> <span class="id">environment</span> <span class="id">application</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_appenv_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_fun">tapp_over_appenv_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_appenv_step_correct">tapp_over_appenv_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_step">tapp_over_appenv_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_fun_correctness">tapp_over_appenv_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_unop_fun">tapp_over_unop_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> <span class="id">p1</span>) <span class="id">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_unop_fun_correctness">tapp_over_unop_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_fun">tapp_over_unop_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2238')">Proof.</div>
<div class="proofscript" id="proof2238">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_unop_arrow">tapp_over_unop_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_fun_correctness">tapp_over_unop_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_unop_step">tapp_over_unop_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">unop</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">application</span> <span class="id">through</span> <span class="id">unary</span> <span class="id">operations</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_unop_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_fun">tapp_over_unop_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_unop_step_correct">tapp_over_unop_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_step">tapp_over_unop_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_fun_correctness">tapp_over_unop_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_unop_fun">tappenv_over_unop_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> <span class="id">p1</span>) <span class="id">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_unop_fun_correctness">tappenv_over_unop_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_fun">tappenv_over_unop_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2239')">Proof.</div>
<div class="proofscript" id="proof2239">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_unop_arrow">tappenv_over_unop_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_unop_step">tappenv_over_unop_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">unop</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">unary</span> <span class="id">operations</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_unop_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_fun">tappenv_over_unop_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_unop_step_correct">tappenv_over_unop_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_step">tappenv_over_unop_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_fun_correctness">tappenv_over_unop_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tunop_over_either_const_fun">tunop_over_either_const_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>)) =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> <span class="id">p</span>₁) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tunop_over_either_const_fun_correctness">tunop_over_either_const_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_fun">tunop_over_either_const_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2240')">Proof.</div>
<div class="proofscript" id="proof2240">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tunop_over_either">tunop_over_either</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tunop_over_either_const_step">tunop_over_either_const_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">unop</span>/<span class="id">either</span>/<span class="id">const</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">a</span> <span class="id">unary</span> <span class="id">operation</span> <span class="id">through</span> <span class="id">an</span> <span class="id">either</span> <span class="id">construct</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">right</span> <span class="id">branch</span> <span class="id">that</span> <span class="id">builds</span> <span class="id">a</span> <span class="id">constant</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tunop_over_either_const_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_fun">tunop_over_either_const_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tunop_over_either_const_step_correct">tunop_over_either_const_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_step">tunop_over_either_const_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_fun_correctness">tunop_over_either_const_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tunop_over_either_const_app_fun">tunop_over_either_const_app_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>)) <span class="id">p</span>₃) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> <span class="id">p</span>₁) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>))) <span class="id">p</span>₃<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tunop_over_either_const_app_fun_correctness">tunop_over_either_const_app_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_fun">tunop_over_either_const_app_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2241')">Proof.</div>
<div class="proofscript" id="proof2241">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tunop_over_either_app">tunop_over_either_app</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tunop_over_either_const_app_step">tunop_over_either_const_app_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">unop</span>/<span class="id">app</span>/<span class="id">either</span>/<span class="id">const</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">a</span> <span class="id">unary</span> <span class="id">operation</span> <span class="id">through</span> <span class="id">an</span> <span class="id">application</span> <span class="id">of</span> <span class="id">an</span> <span class="id">either</span> <span class="id">construct</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">right</span> <span class="id">branch</span> <span class="id">that</span> <span class="id">builds</span> <span class="id">a</span> <span class="id">constant</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tunop_over_either_const_app_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_fun">tunop_over_either_const_app_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tunop_over_either_const_app_step_correct">tunop_over_either_const_app_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_step">tunop_over_either_const_app_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_fun_correctness">tunop_over_either_const_app_fun_correctness</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_map_fun">tapp_over_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p0</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_map_fun_correctness">tapp_over_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_fun">tapp_over_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2242')">Proof.</div>
<div class="proofscript" id="proof2242">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_map_arrow">tapp_over_map_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_fun_correctness">tapp_over_map_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_map_step">tapp_over_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">applications</span> <span class="id">through</span> <span class="id">map</span> <span class="id">a</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_fun">tapp_over_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_map_step_correct">tapp_over_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_step">tapp_over_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_fun_correctness">tapp_over_map_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_mapconcat_fun">tapp_over_mapconcat_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapConcat">NRAEnvMapConcat</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p0</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapConcat">NRAEnvMapConcat</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_mapconcat_fun_correctness">tapp_over_mapconcat_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_fun">tapp_over_mapconcat_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2243')">Proof.</div>
<div class="proofscript" id="proof2243">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_mapconcat_arrow">tapp_over_mapconcat_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_fun_correctness">tapp_over_mapconcat_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_mapconcat_step">tapp_over_mapconcat_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">map</span>-<span class="id">concat</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">application</span> <span class="id">through</span> <span class="id">a</span> <span class="id">map</span>-<span class="id">concat</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_mapconcat_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_fun">tapp_over_mapconcat_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_mapconcat_step_correct">tapp_over_mapconcat_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_step">tapp_over_mapconcat_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_fun_correctness">tapp_over_mapconcat_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_product_fun">tapp_over_product_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p0</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p0</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_product_fun_correctness">tapp_over_product_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_fun">tapp_over_product_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2244')">Proof.</div>
<div class="proofscript" id="proof2244">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_product_arrow">tapp_over_product_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_fun_correctness">tapp_over_product_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_product_step">tapp_over_product_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">product</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">application</span> <span class="id">through</span> <span class="id">a</span> <span class="id">product</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_product_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_fun">tapp_over_product_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_product_step_correct">tapp_over_product_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_step">tapp_over_product_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_fun_correctness">tapp_over_product_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_map_fun">tappenv_over_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p0</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p0</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p2</span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_map_fun_correctness">tappenv_over_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_fun">tappenv_over_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2245')">Proof.</div>
<div class="proofscript" id="proof2245">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p2</span>); <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_map_arrow">tappenv_over_map_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_eq">nraenv_ignores_id_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_nraenv_core_eq">nraenv_ignores_id_nraenv_core_eq</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_map_step">tappenv_over_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">a</span> <span class="id">map</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_fun">tappenv_over_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_map_step_correct">tappenv_over_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_step">tappenv_over_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_fun_correctness">tappenv_over_map_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_select_fun">tappenv_over_select_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p0</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p0</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p2</span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_select_fun_correctness">tappenv_over_select_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_fun">tappenv_over_select_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2246')">Proof.</div>
<div class="proofscript" id="proof2246">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p2</span>); <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_select_arrow">tappenv_over_select_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_eq">nraenv_ignores_id_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_nraenv_core_eq">nraenv_ignores_id_nraenv_core_eq</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_select_step">tappenv_over_select_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">select</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">a</span> <span class="id">selection</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_select_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_fun">tappenv_over_select_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_select_step_correct">tappenv_over_select_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_step">tappenv_over_select_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_fun_correctness">tappenv_over_select_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_select_fun">tapp_over_select_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p0</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> <span class="id">p0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_select_fun_correctness">tapp_over_select_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_fun">tapp_over_select_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2247')">Proof.</div>
<div class="proofscript" id="proof2247">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_select_arrow">tapp_over_select_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_fun_correctness">tapp_over_select_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_select_step">tapp_over_select_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">slect</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">application</span> <span class="id">through</span> <span class="id">a</span> <span class="id">selection</span> <span class="id">body</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_select_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_fun">tapp_over_select_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_select_step_correct">tapp_over_select_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_step">tapp_over_select_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_fun_correctness">tapp_over_select_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_binop_fun">tapp_over_binop_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">b</span> <span class="id">p2</span> <span class="id">p3</span>) <span class="id">p1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">b</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> <span class="id">p1</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p3</span> <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_binop_fun_correctness">tapp_over_binop_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_fun">tapp_over_binop_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2248')">Proof.</div>
<div class="proofscript" id="proof2248">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_binop_arrow">tapp_over_binop_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_fun_correctness">tapp_over_binop_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_binop_step">tapp_over_binop_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">binop</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">application</span> <span class="id">through</span> <span class="id">binary</span> <span class="id">operations</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_binop_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_fun">tapp_over_binop_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_binop_step_correct">tapp_over_binop_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_step">tapp_over_binop_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_fun_correctness">tapp_over_binop_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_singletons_fun">tproduct_singletons_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">p1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>) <span class="id">p2</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">p1</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>) <span class="id">p2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tproduct_singletons_fun_correctness">tproduct_singletons_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_fun">tproduct_singletons_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2249')">Proof.</div>
<div class="proofscript" id="proof2249">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tproduct_singletons_arrow">tproduct_singletons_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_fun_correctness">tproduct_singletons_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_singletons_step">tproduct_singletons_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">product</span>/<span class="id">singleton</span> <span class="id">singleton</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">the</span> <span class="id">product</span> <span class="id">of</span> <span class="id">two</span> <span class="id">singRemove</span> <span class="id">loop</span> <span class="id">comprehensions</span> <span class="id">over</span> <span class="id">empty</span> <span class="id">loops</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tproduct_singletons_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_fun">tproduct_singletons_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_singletons_step_correct">tproduct_singletons_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_step">tproduct_singletons_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_fun_correctness">tproduct_singletons_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_empty_right_fun">tproduct_empty_right_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) =&gt; <span class="id">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tproduct_empty_right_fun_correctness">tproduct_empty_right_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_fun">tproduct_empty_right_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2250')">Proof.</div>
<div class="proofscript" id="proof2250">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tproduct_empty_right_arrow">tproduct_empty_right_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_fun_correctness">tproduct_empty_right_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_empty_right_step">tproduct_empty_right_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">product</span> <span class="id">singleton</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Eliminates</span> <span class="id">empty</span> <span class="id">table</span> <span class="id">on</span> <span class="id">the</span> <span class="id">right</span> <span class="id">of</span> <span class="id">a</span> <span class="id">Cartesian</span> <span class="id">product</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tproduct_empty_right_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_fun">tproduct_empty_right_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_empty_right_step_correct">tproduct_empty_right_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_step">tproduct_empty_right_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_fun_correctness">tproduct_empty_right_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_empty_left_fun">tproduct_empty_left_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p1</span> =&gt; <span class="id">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tproduct_empty_left_fun_correctness">tproduct_empty_left_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_fun">tproduct_empty_left_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2251')">Proof.</div>
<div class="proofscript" id="proof2251">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tproduct_empty_left_arrow">tproduct_empty_left_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_fun_correctness">tproduct_empty_left_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_empty_left_step">tproduct_empty_left_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">product</span> <span class="id">singleton</span> <span class="id">left</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Eliminates</span> <span class="id">empty</span> <span class="id">table</span> <span class="id">on</span> <span class="id">the</span> <span class="id">left</span> <span class="id">of</span> <span class="id">a</span> <span class="id">Cartesian</span> <span class="id">product</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tproduct_empty_left_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_fun">tproduct_empty_left_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tproduct_empty_left_step_correct">tproduct_empty_left_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_step">tproduct_empty_left_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_fun_correctness">tproduct_empty_left_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdouble_flatten_map_coll_fun">tdouble_flatten_map_coll_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p3</span>) <span class="id">p1</span>) <span class="id">p2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p1</span> <span class="id">p2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tdouble_flatten_map_coll_fun_correctness">tdouble_flatten_map_coll_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_fun">tdouble_flatten_map_coll_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2252')">Proof.</div>
<div class="proofscript" id="proof2252">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tdouble_flatten_map_coll_arrow">tdouble_flatten_map_coll_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_fun_correctness">tdouble_flatten_map_coll_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdouble_flatten_map_coll_step">tdouble_flatten_map_coll_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">map</span>/<span class="id">coll</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">flattenging</span> <span class="id">the</span> <span class="id">map</span> <span class="id">of</span> <span class="id">the</span> <span class="id">map</span> <span class="id">of</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tdouble_flatten_map_coll_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_fun">tdouble_flatten_map_coll_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdouble_flatten_map_coll_step_correct">tdouble_flatten_map_coll_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_step">tdouble_flatten_map_coll_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_fun_correctness">tdouble_flatten_map_coll_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_over_double_map_fun">tflatten_over_double_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))) <span class="id">q</span>₃))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₂ <span class="id">q</span>₃))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflatten_over_double_map_fun_correctness">tflatten_over_double_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_fun">tflatten_over_double_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2253')">Proof.</div>
<div class="proofscript" id="proof2253">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflatten_over_double_map_arrow">tflatten_over_double_map_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_fun_correctness">tflatten_over_double_map_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_over_double_map_step">tflatten_over_double_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">map</span>/<span class="id">select</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span> <span class="id">over</span> <span class="id">a</span> <span class="id">map</span> <span class="id">of</span> <span class="id">a</span> <span class="id">selection</span> <span class="id">applied</span> <span class="id">to</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span> <span class="id">of</span> <span class="id">the</span> <span class="id">input</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_over_double_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_fun">tflatten_over_double_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_over_double_map_step_correct">tflatten_over_double_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_step">tflatten_over_double_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_fun_correctness">tflatten_over_double_map_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_over_double_map_with_either_fun">tflatten_over_double_map_with_either_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">q</span>₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> []))) <span class="id">q</span>₃)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">q</span>₄)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">q</span>₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> []))) <span class="id">q</span>₃)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">q</span>₄))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflatten_over_double_map_with_either_fun_correctness">tflatten_over_double_map_with_either_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_fun">tflatten_over_double_map_with_either_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2254')">Proof.</div>
<div class="proofscript" id="proof2254">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflatten_over_double_map_with_either_arrow">tflatten_over_double_map_with_either_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_fun_correctness">tflatten_over_double_map_with_either_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_over_double_map_with_either_step">tflatten_over_double_map_with_either_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">map</span>/<span class="id">select</span>/<span class="id">app</span>/<span class="id">either</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"???" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_over_double_map_with_either_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_fun">tflatten_over_double_map_with_either_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_over_double_map_with_either_step_correct">tflatten_over_double_map_with_either_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_step">tflatten_over_double_map_with_either_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_fun_correctness">tflatten_over_double_map_with_either_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_merge_l_fun">tappenv_over_env_merge_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id">p1</span>) <span class="id">p2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id">p2</span> <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_env_merge_l_fun_correctness">tappenv_over_env_merge_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_fun">tappenv_over_env_merge_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2255')">Proof.</div>
<div class="proofscript" id="proof2255">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1_1</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">p1_2</span>); <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_env_merge_l_arrow">tappenv_over_env_merge_l_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_eq">nraenv_ignores_env_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_nraenv_core_eq">nraenv_ignores_env_nraenv_core_eq</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_of_nraenv">nraenv_core_of_nraenv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_merge_l_step">tappenv_over_env_merge_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">merge</span>-<span class="id">concat</span>/<span class="id">env</span> <span class="id">left</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">of</span> <span class="id">a</span> <span class="id">merge</span>-<span class="id">concat</span> <span class="kwd">where</span> <span class="id">the</span> <span class="id">left</span> <span class="id">part</span> <span class="id">is</span> <span class="id">ENV</span> <span class="id">and</span> <span class="id">the</span> <span class="id">right</span> <span class="id">part</span> <span class="id">ignores</span> <span class="id">the</span> <span class="id">environment</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_env_merge_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_fun">tappenv_over_env_merge_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_env_merge_l_step_correct">tappenv_over_env_merge_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_step">tappenv_over_env_merge_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_fun_correctness">tappenv_over_env_merge_l_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="ttostring_on_string_fun">ttostring_on_string_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AToString">AToString</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dstring">dstring</a></span> <span class="id">s</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dstring">dstring</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AToString">AToString</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AToString">AToString</a></span> <span class="id">p</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AToString">AToString</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AToString">AToString</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#ASConcat">ASConcat</a></span> <span class="id">p1</span> <span class="id">p2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#ASConcat">ASConcat</a></span> <span class="id">p1</span> <span class="id">p2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="ttostring_on_string_fun_correctness">ttostring_on_string_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_fun">ttostring_on_string_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2256')">Proof.</div>
<div class="proofscript" id="proof2256">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#ttostring_dstring_arrow">ttostring_dstring_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#ttostring_sconcat_arrow">ttostring_sconcat_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#ttostring_tostring_arrow">ttostring_tostring_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="ttostring_on_string_step">ttostring_on_string_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">to</span>-<span class="id">string</span>/<span class="id">string</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Remove</span> <span class="id">ToString</span> <span class="id">operations</span> <span class="kwd">where</span> <span class="id">the</span> <span class="id">argument</span> <span class="id">is</span> <span class="id">statically</span> <span class="id">known</span> <span class="id">to</span> <span class="id">already</span> <span class="id">be</span> <span class="id">a</span> <span class="id">string</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">ttostring_on_string_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_fun">ttostring_on_string_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="ttostring_on_string_step_correct">ttostring_on_string_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_step">ttostring_on_string_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_fun_correctness">ttostring_on_string_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_full_over_select_fun">tmap_full_over_select_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p0</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)) =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p0</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p2</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p0</span> <span class="id">p2</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p1</span> <span class="id">p2</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_full_over_select_fun_correctness">tmap_full_over_select_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_fun">tmap_full_over_select_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2257')">Proof.</div>
<div class="proofscript" id="proof2257">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 (<span class="id">match_destr</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p2_2</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmap_full_over_select_arrow">tmap_full_over_select_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_full_over_select_step">tmap_full_over_select_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">select</span>/<span class="id">coll</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"???" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_full_over_select_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_fun">tmap_full_over_select_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_full_over_select_step_correct">tmap_full_over_select_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_step">tmap_full_over_select_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_fun_correctness">tmap_full_over_select_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcompose_selects_in_mapenv_fun">tcompose_selects_in_mapenv_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p2</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p2</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tcompose_selects_in_mapenv_fun_correctness">tcompose_selects_in_mapenv_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_fun">tcompose_selects_in_mapenv_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2258')">Proof.</div>
<div class="proofscript" id="proof2258">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tcompose_selects_in_mapenv_arrow">tcompose_selects_in_mapenv_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcompose_selects_in_mapenv_step">tcompose_selects_in_mapenv_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">flatten</span>/<span class="id">map</span>-<span class="id">env</span>/<span class="id">map</span>/<span class="id">select</span>/<span class="id">coll</span>/<span class="id">id</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"???" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tcompose_selects_in_mapenv_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_fun">tcompose_selects_in_mapenv_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcompose_selects_in_mapenv_step_correct">tcompose_selects_in_mapenv_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_step">tcompose_selects_in_mapenv_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_fun_correctness">tcompose_selects_in_mapenv_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_to_env_fun">tmapenv_to_env_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span>) <span class="id">p1</span>) =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmapenv_to_env_fun_correctness">tmapenv_to_env_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_fun">tmapenv_to_env_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2259')">Proof.</div>
<div class="proofscript" id="proof2259">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmapenv_to_env_arrow">tmapenv_to_env_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_to_env_step">tmapenv_to_env_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">map</span>-<span class="id">env</span>/<span class="id">env</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">applications</span> <span class="kwd">with</span> <span class="id">body</span> <span class="id">that</span> <span class="id">map</span>-<span class="id">environments</span> <span class="id">over</span> <span class="id">the</span> <span class="id">environment</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmapenv_to_env_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_fun">tmapenv_to_env_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_to_env_step_correct">tmapenv_to_env_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_step">tmapenv_to_env_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_fun_correctness">tmapenv_to_env_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tenv_appenv_fun">tenv_appenv_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id">p1</span> =&gt; <span class="id">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tenv_appenv_fun_correctness">tenv_appenv_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_fun">tenv_appenv_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2260')">Proof.</div>
<div class="proofscript" id="proof2260">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_env_l_arrow">tappenv_over_env_l_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tenv_appenv_step">tenv_appenv_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">env</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">environment</span> <span class="id">applications</span> <span class="id">of</span> <span class="id">the</span> <span class="id">environment</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tenv_appenv_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_fun">tenv_appenv_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tenv_appenv_step_correct">tenv_appenv_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_step">tenv_appenv_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_fun_correctness">tenv_appenv_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_mapenv_coll_fun">tflatten_mapenv_coll_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p1</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id"><a name="tflatten_mapenv_coll_fun_correctness">tflatten_mapenv_coll_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_fun">tflatten_mapenv_coll_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2261')">Proof.</div>
<div class="proofscript" id="proof2261">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflatten_mapenv_coll_arrow">tflatten_mapenv_coll_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_mapenv_coll_step">tflatten_mapenv_coll_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">map</span>-<span class="id">env</span>/<span class="id">coll</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">flattening</span> <span class="id">a</span> <span class="id">map</span> <span class="id">environment</span> <span class="id">of</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_mapenv_coll_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_fun">tflatten_mapenv_coll_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_mapenv_coll_step_correct">tflatten_mapenv_coll_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_step">tflatten_mapenv_coll_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_fun_correctness">tflatten_mapenv_coll_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_nil_fun">tflatten_nil_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id"><a name="tflatten_nil_fun_correctness">tflatten_nil_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_fun">tflatten_nil_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2262')">Proof.</div>
<div class="proofscript" id="proof2262">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tenvflatten_nil_arrow">tenvflatten_nil_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_nil_step">tflatten_nil_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">nil</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Remove</span> <span class="id">flatten</span> <span class="id">over</span> <span class="id">empty</span> <span class="id">records</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_nil_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_fun">tflatten_nil_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_nil_step_correct">tflatten_nil_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_step">tflatten_nil_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_fun_correctness">tflatten_nil_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_through_appenv_fun">tflatten_through_appenv_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> <span class="id">p1</span>) <span class="id">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflatten_through_appenv_fun_correctness">tflatten_through_appenv_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_through_appenv_fun">tflatten_through_appenv_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2263')">Proof.</div>
<div class="proofscript" id="proof2263">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflatten_through_appenv_arrow">tflatten_through_appenv_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_through_appenv_step">tflatten_through_appenv_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">app</span>-<span class="id">env</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">flatten</span> <span class="id">operations</span> <span class="id">through</span> <span class="id">environment</span> <span class="id">applications</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflatten_through_appenv_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_through_appenv_fun">tflatten_through_appenv_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflatten_through_appenv_step_correct">tflatten_through_appenv_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_through_appenv_step">tflatten_through_appenv_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_through_appenv_fun_correctness">tflatten_through_appenv_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_flatten_mapenv_to_map_fun">tappenv_flatten_mapenv_to_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">p2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">p2</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">s</span>) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span>)) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_flatten_mapenv_to_map_fun_correctness">tappenv_flatten_mapenv_to_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_flatten_mapenv_to_map_fun">tappenv_flatten_mapenv_to_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2264')">Proof.</div>
<div class="proofscript" id="proof2264">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_flatten_mapenv_to_map_arrow">tappenv_flatten_mapenv_to_map_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_flatten_mapenv_to_map_step">tappenv_flatten_mapenv_to_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/(<span class="id">flatten</span>/<span class="id">map</span>-<span class="id">env</span>)(<span class="id">merge</span>-<span class="id">concat</span>/(<span class="id">env</span>)(<span class="id">rec</span>/<span class="id">id</span>))" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">of</span> <span class="id">a</span> <span class="id">flattened</span> <span class="id">environment</span> <span class="id">map</span> <span class="id">to</span> <span class="id">a</span> <span class="id">merge</span>-<span class="id">concat</span> <span class="id">of</span> <span class="id">the</span> <span class="id">environment</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">record</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_flatten_mapenv_to_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_flatten_mapenv_to_map_fun">tappenv_flatten_mapenv_to_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_flatten_mapenv_to_map_step_correct">tappenv_flatten_mapenv_to_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_flatten_mapenv_to_map_step">tappenv_flatten_mapenv_to_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_flatten_mapenv_to_map_fun_correctness">tappenv_flatten_mapenv_to_map_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_either_nil_fun">tselect_over_either_nil_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p</span>₁ (<span class="id">p</span>₂)) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tselect_over_either_nil_fun_correctness">tselect_over_either_nil_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_fun">tselect_over_either_nil_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2265')">Proof.</div>
<div class="proofscript" id="proof2265">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_over_either">tselect_over_either</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_over_nil">tselect_over_nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_fun_correctness">tselect_over_either_nil_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_either_nil_step">tselect_over_either_nil_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">select</span>/<span class="id">either</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">selection</span> <span class="id">through</span> <span class="id">an</span> <span class="id">either</span> <span class="id">whose</span> <span class="id">right</span> <span class="id">side</span> <span class="id">returns</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tselect_over_either_nil_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_fun">tselect_over_either_nil_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_either_nil_step_correct">tselect_over_either_nil_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_step">tselect_over_either_nil_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_fun_correctness">tselect_over_either_nil_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_either_nil_app_fun">tselect_over_either_nil_app_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₄) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂) ((<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)))) <span class="id">p</span>₄<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tselect_over_either_nil_app_fun_correctness">tselect_over_either_nil_app_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_fun">tselect_over_either_nil_app_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2266')">Proof.</div>
<div class="proofscript" id="proof2266">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_over_app_either">tselect_over_app_either</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_over_nil">tselect_over_nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_fun_correctness">tselect_over_either_nil_app_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_either_nil_app_step">tselect_over_either_nil_app_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">select</span>/<span class="id">app</span>/<span class="id">either</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">selection</span> <span class="id">through</span> <span class="id">an</span> <span class="id">application</span> <span class="id">of</span> <span class="id">an</span> <span class="id">either</span> <span class="id">whose</span> <span class="id">right</span> <span class="id">side</span> <span class="id">returns</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tselect_over_either_nil_app_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_fun">tselect_over_either_nil_app_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_either_nil_app_step_correct">tselect_over_either_nil_app_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_step">tselect_over_either_nil_app_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_fun_correctness">tselect_over_either_nil_app_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_either_nil_fun">tmap_over_either_nil_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂) ((<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_over_either_nil_fun_correctness">tmap_over_either_nil_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_fun">tmap_over_either_nil_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2267')">Proof.</div>
<div class="proofscript" id="proof2267">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmap_over_either">tmap_over_either</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmap_over_nil">tmap_over_nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_fun_correctness">tmap_over_either_nil_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_either_nil_step">tmap_over_either_nil_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">either</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">map</span> <span class="id">through</span> <span class="id">an</span> <span class="id">either</span> <span class="id">whose</span> <span class="id">right</span> <span class="id">side</span> <span class="id">returns</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_over_either_nil_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_fun">tmap_over_either_nil_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_either_nil_step_correct">tmap_over_either_nil_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_step">tmap_over_either_nil_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_fun_correctness">tmap_over_either_nil_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_either_nil_app_fun">tmap_over_either_nil_app_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₄) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₄<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_over_either_nil_app_fun_correctness">tmap_over_either_nil_app_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_fun">tmap_over_either_nil_app_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2268')">Proof.</div>
<div class="proofscript" id="proof2268">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmap_over_either_app">tmap_over_either_app</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmap_over_nil">tmap_over_nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_fun_correctness">tmap_over_either_nil_app_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_either_nil_app_step">tmap_over_either_nil_app_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">app</span>/<span class="id">either</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">map</span> <span class="id">through</span> <span class="id">an</span> <span class="id">application</span> <span class="id">of</span> <span class="id">an</span> <span class="id">either</span> <span class="id">whose</span> <span class="id">right</span> <span class="id">side</span> <span class="id">returns</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_over_either_nil_app_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_fun">tmap_over_either_nil_app_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_either_nil_app_step_correct">tmap_over_either_nil_app_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_step">tmap_over_either_nil_app_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_fun_correctness">tmap_over_either_nil_app_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_either_nil_fun">tappenv_over_either_nil_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₃ =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p</span>₃ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p</span>₂ <span class="id">p</span>₃) ((<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_either_nil_fun_correctness">tappenv_over_either_nil_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_fun">tappenv_over_either_nil_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2269')">Proof.</div>
<div class="proofscript" id="proof2269">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1_2</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_eq">nraenv_ignores_id_eq</a></span> <span class="kwd">in</span> <span class="id">ig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">tnraenv_core_optim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_nraenv_core_eq">nraenv_ignores_id_nraenv_core_eq</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_fun_correctness">tappenv_over_either_nil_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_either_nil_step">tappenv_over_either_nil_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">either</span>/<span class="id">nil</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Pushes</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">an</span> <span class="id">either</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">right</span> <span class="id">branch</span> <span class="id">that</span> <span class="id">builds</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_either_nil_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_fun">tappenv_over_either_nil_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_either_nil_step_correct">tappenv_over_either_nil_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_step">tappenv_over_either_nil_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_fun_correctness">tappenv_over_either_nil_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_flatten_fun">tselect_over_flatten_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> <span class="id">p</span>₂) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p</span>₁ <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>) <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tselect_over_flatten_fun_correctness">tselect_over_flatten_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_fun">tselect_over_flatten_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2270')">Proof.</div>
<div class="proofscript" id="proof2270">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tselect_over_flatten">tselect_over_flatten</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_fun_correctness">tselect_over_flatten_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_flatten_step">tselect_over_flatten_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">select</span>/<span class="id">flatten</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Pushes</span> <span class="id">selection</span> <span class="id">through</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">operation</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tselect_over_flatten_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_fun">tselect_over_flatten_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tselect_over_flatten_step_correct">tselect_over_flatten_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_step">tselect_over_flatten_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_fun_correctness">tselect_over_flatten_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_flatten_fun">tmap_over_flatten_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> <span class="id">p</span>₂) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>) <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_over_flatten_fun_correctness">tmap_over_flatten_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_fun">tmap_over_flatten_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2271')">Proof.</div>
<div class="proofscript" id="proof2271">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmap_over_flatten">tmap_over_flatten</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_fun_correctness">tmap_over_flatten_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_flatten_step">tmap_over_flatten_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">flatten</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Pushes</span> <span class="id">map</span> <span class="id">through</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">operation</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_over_flatten_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_fun">tmap_over_flatten_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_flatten_step_correct">tmap_over_flatten_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_step">tmap_over_flatten_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_fun_correctness">tmap_over_flatten_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_flatten_map_fun">tmap_over_flatten_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₂ <span class="id">p</span>₃)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂) <span class="id">p</span>₃)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmap_over_flatten_map_fun_correctness">tmap_over_flatten_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_fun">tmap_over_flatten_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2272')">Proof.</div>
<div class="proofscript" id="proof2272">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmap_over_flatten_map">tmap_over_flatten_map</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_fun_correctness">tmap_over_flatten_map_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_flatten_map_step">tmap_over_flatten_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>/<span class="id">flatten</span>/<span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Pushes</span> <span class="id">map</span> <span class="id">through</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmap_over_flatten_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_fun">tmap_over_flatten_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmap_over_flatten_map_step_correct">tmap_over_flatten_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_step">tmap_over_flatten_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_fun_correctness">tmap_over_flatten_map_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_over_rec_eq_fun">tconcat_over_rec_eq_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>₁) <span class="id">p</span>₁) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>₂) <span class="id">p</span>₂))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span>₁ <span class="id">s</span>₂ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>₂) <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_over_rec_eq_fun_correctness">tconcat_over_rec_eq_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_fun">tconcat_over_rec_eq_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2273')">Proof.</div>
<div class="proofscript" id="proof2273">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#lift_tnraenv_eq_to_tnraenv_core_eq">lift_tnraenv_eq_to_tnraenv_core_eq</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tconcat_over_rec_eq">tconcat_over_rec_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_fun_correctness">tconcat_over_rec_eq_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_over_rec_eq_step">tconcat_over_rec_eq_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">concat</span>/(<span class="id">rec</span>)(<span class="id">rec</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">a</span> <span class="id">concatentation</span> <span class="id">of</span> <span class="id">two</span> <span class="id">record</span> <span class="id">constructors</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tconcat_over_rec_eq_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_fun">tconcat_over_rec_eq_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tconcat_over_rec_eq_step_correct">tconcat_over_rec_eq_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_step">tconcat_over_rec_eq_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_fun_correctness">tconcat_over_rec_eq_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_const_fun">tapp_over_const_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>) <span class="id">p1</span>) =&gt; (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tapp_over_const_fun_correctness">tapp_over_const_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_fun">tapp_over_const_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2274')">Proof.</div>
<div class="proofscript" id="proof2274">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tapp_over_const_arrow">tapp_over_const_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_const_step">tapp_over_const_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>/<span class="id">const</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">application</span> <span class="id">of</span> <span class="id">a</span> <span class="id">constant</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tapp_over_const_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_fun">tapp_over_const_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tapp_over_const_step_correct">tapp_over_const_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_step">tapp_over_const_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_fun_correctness">tapp_over_const_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_const_fun">tappenv_over_const_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>) <span class="id">p1</span>) =&gt; (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_const_fun_correctness">tappenv_over_const_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_fun">tappenv_over_const_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2275')">Proof.</div>
<div class="proofscript" id="proof2275">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_const_arrow">tappenv_over_const_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_const_step">tappenv_over_const_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">const</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">of</span> <span class="id">a</span> <span class="id">constant</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_const_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_fun">tappenv_over_const_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_const_step_correct">tappenv_over_const_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_step">tappenv_over_const_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_fun_correctness">tappenv_over_const_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env1_fun">tflip_env1_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))) <span class="id">q</span>₂ =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">q</span>₂ <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> =&gt; (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">q</span>₁)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">q</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflip_env1_fun_correctness">tflip_env1_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_fun">tflip_env1_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2276')">Proof.</div>
<div class="proofscript" id="proof2276">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1_1</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1_2</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1_2_2</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1_2_2</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p2</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflip_env1_arrow">tflip_env1_arrow</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_fun">nraenv_ignores_env_fun</a></span> <span class="id">p1_2_1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">intros</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_eq">nraenv_ignores_env_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflip_env4_arrow">tflip_env4_arrow</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_env_nraenv_core_eq">nraenv_ignores_env_nraenv_core_eq</a></span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_of_nraenv">nraenv_core_of_nraenv</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env1_step">tflip_env1_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">env</span> <span class="id">flip1</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"???" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflip_env1_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_fun">tflip_env1_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env1_step_correct">tflip_env1_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_step">tflip_env1_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_fun_correctness">tflip_env1_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env2_fun">tflip_env2_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflip_env2_fun_correctness">tflip_env2_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_fun">tflip_env2_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2277')">Proof.</div>
<div class="proofscript" id="proof2277">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflip_env2_arrow">tflip_env2_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env2_step">tflip_env2_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">select</span>/<span class="id">coll</span>/<span class="id">id</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Pushes</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">selection</span> <span class="id">of</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span> <span class="id">over</span> <span class="id">the</span> <span class="id">input</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflip_env2_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_fun">tflip_env2_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env2_step_correct">tflip_env2_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_step">tflip_env2_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_fun_correctness">tflip_env2_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_over_singleton_fun">tmapenv_over_singleton_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">p1</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p2</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmapenv_over_singleton_fun_correctness">tmapenv_over_singleton_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_fun">tmapenv_over_singleton_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2278')">Proof.</div>
<div class="proofscript" id="proof2278">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmapenv_over_singleton_arrow">tmapenv_over_singleton_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_over_singleton_step">tmapenv_over_singleton_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/(<span class="id">map</span>-<span class="id">env</span>)(<span class="id">coll</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">the</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span> <span class="id">environment</span> <span class="id">over</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmapenv_over_singleton_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_fun">tmapenv_over_singleton_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_over_singleton_step_correct">tmapenv_over_singleton_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_step">tmapenv_over_singleton_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_fun_correctness">tmapenv_over_singleton_fun_correctness</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_binop_fun">tappenv_over_binop_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">b</span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p0</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">b</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id">p0</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p2</span> <span class="id">p0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_over_binop_fun_correctness">tappenv_over_binop_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_fun">tappenv_over_binop_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2279')">Proof.</div>
<div class="proofscript" id="proof2279">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_over_binop">tappenv_over_binop</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_binop_step">tappenv_over_binop_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">binop</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Pushes</span> <span class="id">an</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">a</span> <span class="id">binary</span> <span class="id">operation</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_over_binop_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_fun">tappenv_over_binop_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_over_binop_step_correct">tappenv_over_binop_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_step">tappenv_over_binop_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_fun_correctness">tappenv_over_binop_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env6_fun">tflip_env6_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id">p2</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">p1</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id">p2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tflip_env6_fun_correctness">tflip_env6_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_fun">tflip_env6_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2280')">Proof.</div>
<div class="proofscript" id="proof2280">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tflip_env6_arrow">tflip_env6_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env6_step">tflip_env6_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">env</span> <span class="id">flip6</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"???" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tflip_env6_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_fun">tflip_env6_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tflip_env6_step_correct">tflip_env6_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_step">tflip_env6_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_fun_correctness">tflip_env6_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_to_map_fun">tmapenv_to_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">p1</span>) <span class="id">p2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">p1</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>) <span class="id">p2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmapenv_to_map_fun_correctness">tmapenv_to_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_fun">tmapenv_to_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2281')">Proof.</div>
<div class="proofscript" id="proof2281">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_fun">nraenv_ignores_id_fun</a></span> <span class="id">p1</span>); <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmapenv_to_map_arrow">tmapenv_to_map_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_eq">nraenv_ignores_id_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvIgnore.html#nraenv_ignores_id_nraenv_core_eq">nraenv_ignores_id_nraenv_core_eq</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_of_nraenv">nraenv_core_of_nraenv</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_to_map_step">tmapenv_to_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/<span class="id">map</span>-<span class="id">env</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">environment</span> <span class="id">application</span> <span class="id">through</span> <span class="id">map</span> <span class="id">environment</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmapenv_to_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_fun">tmapenv_to_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapenv_to_map_step_correct">tmapenv_to_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_step">tmapenv_to_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_fun_correctness">tmapenv_to_map_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_concat_to_concat_fun">tmerge_concat_to_concat_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">p1</span>) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>) <span class="id">p2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id">s1</span> == <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>) <span class="id">p2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmerge_concat_to_concat_fun_correctness">tmerge_concat_to_concat_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_fun">tmerge_concat_to_concat_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2282')">Proof.</div>
<div class="proofscript" id="proof2282">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmerge_concat_to_concat_arrow">tmerge_concat_to_concat_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_concat_to_concat_step">tmerge_concat_to_concat_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">merge</span>-<span class="id">concat</span>/(<span class="id">rec</span>)(<span class="id">rec</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">a</span> <span class="id">merge</span>-<span class="id">concat</span> <span class="id">of</span> <span class="id">two</span> <span class="id">record</span> <span class="id">constructors</span> <span class="id">into</span> <span class="id">a</span> <span class="id">simpler</span> <span class="id">concatentation</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmerge_concat_to_concat_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_fun">tmerge_concat_to_concat_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_concat_to_concat_step_correct">tmerge_concat_to_concat_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_step">tmerge_concat_to_concat_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_fun_correctness">tmerge_concat_to_concat_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_with_concat_to_concat_fun">tmerge_with_concat_to_concat_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>') <span class="id">p1</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>) <span class="id">p2</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id">s1</span> == <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id">s1</span> == <span class="id">s1</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id">p1</span> == <span class="id">p1</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s2</span>) <span class="id">p2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmerge_with_concat_to_concat_fun_correctness">tmerge_with_concat_to_concat_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_fun">tmerge_with_concat_to_concat_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2283')">Proof.</div>
<div class="proofscript" id="proof2283">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmerge_with_concat_to_concat_arrow">tmerge_with_concat_to_concat_arrow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_with_concat_to_concat_step">tmerge_with_concat_to_concat_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">merge</span>-<span class="id">concat</span>/(<span class="id">rec</span>)(<span class="id">concat</span>(<span class="id">rec</span>)(<span class="id">rec</span>))" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">a</span> <span class="id">merge</span> <span class="id">concatenation</span> <span class="id">of</span> <span class="id">a</span> <span class="id">record</span> <span class="id">constructor</span> <span class="id">and</span> <span class="id">a</span> <span class="id">concatenation</span> <span class="id">of</span> <span class="id">record</span> <span class="id">constructors</span> <span class="id">into</span> <span class="id">a</span> <span class="id">simpler</span> <span class="id">concatenation</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmerge_with_concat_to_concat_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_fun">tmerge_with_concat_to_concat_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmerge_with_concat_to_concat_step_correct">tmerge_with_concat_to_concat_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_step">tmerge_with_concat_to_concat_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_fun_correctness">tmerge_with_concat_to_concat_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_rec_fun">tdot_over_rec_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s1</span>) <span class="id">p1</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id">s1</span> == <span class="id">s2</span>) <span class="kwd">then</span> <span class="id">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tdot_over_rec_fun_correctness">tdot_over_rec_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_fun">tdot_over_rec_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2284')">Proof.</div>
<div class="proofscript" id="proof2284">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tdot_over_rec_arrow">tdot_over_rec_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_rec_step">tdot_over_rec_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">dot</span>/<span class="id">rec</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">field</span> <span class="id">lookup</span> <span class="id">of</span> <span class="id">a</span> <span class="id">record</span> <span class="id">construction</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tdot_over_rec_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_fun">tdot_over_rec_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdot_over_rec_step_correct">tdot_over_rec_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_step">tdot_over_rec_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_fun_correctness">tdot_over_rec_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnested_map_over_singletons_fun">tnested_map_over_singletons_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">q</span>₂)) <span class="id">q</span>₃) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">q</span>₂ <span class="id">q</span>₃)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tnested_map_over_singletons_fun_correctness">tnested_map_over_singletons_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_fun">tnested_map_over_singletons_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2285')">Proof.</div>
<div class="proofscript" id="proof2285">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tnested_map_over_singletons_arrow">tnested_map_over_singletons_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnested_map_over_singletons_step">tnested_map_over_singletons_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">select</span>/<span class="id">coll</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplifies</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span> <span class="id">of</span> <span class="id">a</span> <span class="id">select</span> <span class="id">over</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tnested_map_over_singletons_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_fun">tnested_map_over_singletons_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnested_map_over_singletons_step_correct">tnested_map_over_singletons_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_step">tnested_map_over_singletons_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_fun_correctness">tnested_map_over_singletons_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_mapenv_to_map_fun">tappenv_mapenv_to_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">a</span>) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">q</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">a</span>) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span>)) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">a</span>) <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tappenv_mapenv_to_map_fun_correctness">tappenv_mapenv_to_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_mapenv_to_map_fun">tappenv_mapenv_to_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2286')">Proof.</div>
<div class="proofscript" id="proof2286">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tappenv_mapenv_to_map_arrow">tappenv_mapenv_to_map_arrow</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_mapenv_to_map_step">tappenv_mapenv_to_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">app</span>-<span class="id">env</span>/(<span class="id">map</span>-<span class="id">env</span>)(<span class="id">merge</span>-<span class="id">concat</span>(<span class="id">env</span>)(<span class="id">rec</span>/<span class="id">id</span>))" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"???" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tappenv_mapenv_to_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_mapenv_to_map_fun">tappenv_mapenv_to_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tappenv_mapenv_to_map_step_correct">tappenv_mapenv_to_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_mapenv_to_map_step">tappenv_mapenv_to_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_mapenv_to_map_fun_correctness">tappenv_mapenv_to_map_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_nil_fun">trproject_nil_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id">p</span>₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_nil_fun_correctness">trproject_nil_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_fun">trproject_nil_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2287')">Proof.</div>
<div class="proofscript" id="proof2287">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_nil">trproject_nil</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_fun_correctness">trproject_nil_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_nil_step">trproject_nil_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">rproject</span>/<span class="id">nil</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Remove</span> <span class="id">record</span> <span class="id">projection</span> <span class="id">of</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">record</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">trproject_nil_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_fun">trproject_nil_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_nil_step_correct">trproject_nil_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_step">trproject_nil_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_fun_correctness">trproject_nil_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_const_fun">trproject_over_const_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> <span class="id">l</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rproject">rproject</a></span> <span class="id">l</span> <span class="id">sl</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_const_fun_correctness">trproject_over_const_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_fun">trproject_over_const_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2288')">Proof.</div>
<div class="proofscript" id="proof2288">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_const">trproject_over_const</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_fun_correctness">trproject_over_const_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_const_step">trproject_over_const_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">rproject</span>/<span class="id">const</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">record</span> <span class="id">projection</span> <span class="id">of</span> <span class="id">a</span> <span class="id">constant</span> <span class="id">record</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">trproject_over_const_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_fun">trproject_over_const_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_const_step_correct">trproject_over_const_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_step">trproject_over_const_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_fun_correctness">trproject_over_const_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rec_fun">trproject_over_rec_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>) <span class="id">p</span>₁)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span> <span class="id">sl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>) <span class="id">p</span>₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rec_fun_correctness">trproject_over_rec_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_fun">trproject_over_rec_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2289')">Proof.</div>
<div class="proofscript" id="proof2289">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_rec_in">trproject_over_rec_in</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_rec_nin">trproject_over_rec_nin</a></span>; <span class="tactic">trivial</span>. <br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_fun_correctness">trproject_over_rec_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rec_step">trproject_over_rec_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">rproject</span>/<span class="id">rec</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">record</span> <span class="id">projection</span> <span class="id">of</span> <span class="id">a</span> <span class="id">record</span> <span class="id">construction</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">trproject_over_rec_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_fun">trproject_over_rec_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rec_step_correct">trproject_over_rec_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_step">trproject_over_rec_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_fun_correctness">trproject_over_rec_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_r_fun">trproject_over_concat_r_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p</span>₁ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>) <span class="id">p</span>₂))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span> <span class="id">sl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#remove">remove</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span> <span class="id">sl</span>)) <span class="id">p</span>₁)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>) <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>) <span class="id">p</span>₁)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_r_fun_correctness">trproject_over_concat_r_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_fun">trproject_over_concat_r_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2290')">Proof.</div>
<div class="proofscript" id="proof2290">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_concat_rec_r_in">trproject_over_concat_rec_r_in</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_concat_rec_r_nin">trproject_over_concat_rec_r_nin</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_fun_correctness">trproject_over_concat_r_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_r_step">trproject_over_concat_r_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">rproject</span>/<span class="id">concat</span>/<span class="id">rec</span> <span class="id">right</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">record</span> <span class="id">projection</span> <span class="id">of</span> <span class="id">a</span> <span class="id">concatenation</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">record</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">trproject_over_concat_r_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_fun">trproject_over_concat_r_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_r_step_correct">trproject_over_concat_r_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_step">trproject_over_concat_r_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_fun_correctness">trproject_over_concat_r_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_l_fun">trproject_over_concat_l_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>) <span class="id">p</span>₁) <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">s</span> <span class="id">sl</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>) <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_l_fun_correctness">trproject_over_concat_l_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_fun">trproject_over_concat_l_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2291')">Proof.</div>
<div class="proofscript" id="proof2291">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_concat_rec_l_nin">trproject_over_concat_rec_l_nin</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_fun_correctness">trproject_over_concat_l_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_l_step">trproject_over_concat_l_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">rproject</span>/<span class="id">concat</span>/<span class="id">rec</span> <span class="id">left</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">record</span> <span class="id">projection</span> <span class="id">of</span> <span class="id">a</span> <span class="id">concatenation</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">record</span> <span class="id">constructor</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">trproject_over_concat_l_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_fun">trproject_over_concat_l_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_concat_l_step_correct">trproject_over_concat_l_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_step">trproject_over_concat_l_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_fun_correctness">trproject_over_concat_l_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rproject_fun">trproject_over_rproject_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl2</span>) <span class="id">p1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.ListSet.html#set_inter">set_inter</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span> <span class="id">sl2</span> <span class="id">sl1</span>)) <span class="id">p1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rproject_fun_correctness">trproject_over_rproject_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_fun">trproject_over_rproject_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2292')">Proof.</div>
<div class="proofscript" id="proof2292">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_rproject">trproject_over_rproject</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_fun_correctness">trproject_over_rproject_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rproject_step">trproject_over_rproject_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">rproject</span>/<span class="id">rproject</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Fuse</span> <span class="id">nested</span> <span class="id">record</span> <span class="id">projections</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">trproject_over_rproject_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_fun">trproject_over_rproject_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_rproject_step_correct">trproject_over_rproject_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_step">trproject_over_rproject_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_fun_correctness">trproject_over_rproject_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_either_fun">trproject_over_either_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>) <span class="id">p</span>₁) (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">sl</span>) <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_either_fun_correctness">trproject_over_either_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_fun">trproject_over_either_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2293')">Proof.</div>
<div class="proofscript" id="proof2293">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#trproject_over_either">trproject_over_either</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_fun_correctness">trproject_over_either_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_either_step">trproject_over_either_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">rproject</span>/<span class="id">either</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Push</span> <span class="id">record</span> <span class="id">projection</span> <span class="id">through</span> <span class="id">an</span> <span class="id">either</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">trproject_over_either_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_fun">trproject_over_either_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="trproject_over_either_step_correct">trproject_over_either_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_step">trproject_over_either_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_fun_correctness">trproject_over_either_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_map_fun">tcount_over_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂) =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span> <span class="id">p</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_map_fun_correctness">tcount_over_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_fun">tcount_over_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2294')">Proof.</div>
<div class="proofscript" id="proof2294">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tcount_over_map">tcount_over_map</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_fun_correctness">tcount_over_map_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_map_step">tcount_over_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">count</span>/<span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">count</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span> (<span class="tactic">by</span> <span class="id">removing</span> <span class="id">the</span> <span class="id">map</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tcount_over_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_fun">tcount_over_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_map_step_correct">tcount_over_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_step">tcount_over_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_fun_correctness">tcount_over_map_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_map_fun">tcount_over_flat_map_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂) <span class="id">p</span>₃)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₂ <span class="id">p</span>₃))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_map_fun_correctness">tcount_over_flat_map_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_fun">tcount_over_flat_map_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2295')">Proof.</div>
<div class="proofscript" id="proof2295">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tcount_over_flat_map_map">tcount_over_flat_map_map</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_fun_correctness">tcount_over_flat_map_map_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_map_step">tcount_over_flat_map_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">count</span>/<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">the</span> <span class="id">count</span> <span class="id">of</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span>'<span class="id">ed</span> <span class="id">map</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tcount_over_flat_map_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_fun">tcount_over_flat_map_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_map_step_correct">tcount_over_flat_map_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_step">tcount_over_flat_map_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_fun_correctness">tcount_over_flat_map_map_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_map_fun">tcount_over_flat_map_either_nil_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p</span>₃)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₃))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_map_fun_correctness">tcount_over_flat_map_either_nil_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_fun">tcount_over_flat_map_either_nil_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2296')">Proof.</div>
<div class="proofscript" id="proof2296">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tcount_over_flat_map_either_nil_map">tcount_over_flat_map_either_nil_map</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_fun_correctness">tcount_over_flat_map_either_nil_map_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_map_step">tcount_over_flat_map_either_nil_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">count</span>/<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">either</span>(<span class="id">map</span>)(<span class="id">nil</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">count</span> <span class="id">of</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span> <span class="id">over</span> <span class="id">an</span> <span class="id">either</span> <span class="kwd">where</span> <span class="id">the</span> <span class="id">right</span> <span class="id">part</span> <span class="id">builds</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tcount_over_flat_map_either_nil_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_fun">tcount_over_flat_map_either_nil_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_map_step_correct">tcount_over_flat_map_either_nil_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_step">tcount_over_flat_map_either_nil_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_fun_correctness">tcount_over_flat_map_either_nil_map_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_map_fun">tcount_over_flat_map_either_nil_app_map_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">p</span>₁ <span class="id">p</span>₂)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₄)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p</span>₃)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">p</span>₂ (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p</span>₄)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p</span>₃))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_map_fun_correctness">tcount_over_flat_map_either_nil_app_map_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_fun">tcount_over_flat_map_either_nil_app_map_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2297')">Proof.</div>
<div class="proofscript" id="proof2297">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tcount_over_flat_map_either_nil_app_map">tcount_over_flat_map_either_nil_app_map</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_fun_correctness">tcount_over_flat_map_either_nil_app_map_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_map_step">tcount_over_flat_map_either_nil_app_map_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">count</span>/<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">app</span>/<span class="id">either</span>(<span class="id">map</span>)(<span class="id">nil</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">count</span> <span class="id">of</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span> <span class="id">over</span> <span class="id">an</span> <span class="id">application</span> <span class="id">of</span> <span class="id">an</span> <span class="id">either</span> <span class="kwd">where</span> <span class="id">the</span> <span class="id">right</span> <span class="id">part</span> <span class="id">builds</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tcount_over_flat_map_either_nil_app_map_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_fun">tcount_over_flat_map_either_nil_app_map_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_map_step_correct">tcount_over_flat_map_either_nil_app_map_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_step">tcount_over_flat_map_either_nil_app_map_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_fun_correctness">tcount_over_flat_map_either_nil_app_map_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_singleton_fun">tcount_over_flat_map_either_nil_app_singleton_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> <span class="id">p</span>₁)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₃) <span class="id">p</span>₂)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#dunit">dunit</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">p</span>₃) <span class="id">p</span>₂))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_singleton_fun_correctness">tcount_over_flat_map_either_nil_app_singleton_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} <span class="id">p</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_fun">tcount_over_flat_map_either_nil_app_singleton_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2298')">Proof.</div>
<div class="proofscript" id="proof2298">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tcount_over_flat_map_either_nil_app_singleton">tcount_over_flat_map_either_nil_app_singleton</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_fun_correctness">tcount_over_flat_map_either_nil_app_singleton_fun_correctness</a></span> : <span class="id">toptim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_singleton_step">tcount_over_flat_map_either_nil_app_singleton_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">count</span>/<span class="id">flatten</span>/<span class="id">map</span>/<span class="id">app</span>/<span class="id">either</span>(<span class="id">coll</span>)(<span class="id">nil</span>)" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplify</span> <span class="id">count</span> <span class="id">of</span> <span class="id">a</span> <span class="id">flatten</span> <span class="id">of</span> <span class="id">a</span> <span class="id">map</span> <span class="id">over</span> <span class="id">an</span> <span class="id">application</span> <span class="id">of</span> <span class="id">an</span> <span class="id">either</span> <span class="kwd">where</span> <span class="id">the</span> <span class="id">left</span> <span class="id">side</span> <span class="id">builds</span> <span class="id">a</span> <span class="id">bag</span> <span class="id">and</span> <span class="id">the</span> <span class="id">right</span> <span class="id">part</span> <span class="id">builds</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">bag</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tcount_over_flat_map_either_nil_app_singleton_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_fun">tcount_over_flat_map_either_nil_app_singleton_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tcount_over_flat_map_either_nil_app_singleton_step_correct">tcount_over_flat_map_either_nil_app_singleton_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_step">tcount_over_flat_map_either_nil_app_singleton_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_fun_correctness">tcount_over_flat_map_either_nil_app_singleton_fun_correctness</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapconcat_over_singleton_fun">tmapconcat_over_singleton_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapConcat">NRAEnvMapConcat</a></span> <span class="id">p</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> []))) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> []))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tmapconcat_over_singleton_fun_correctness">tmapconcat_over_singleton_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_fun">tmapconcat_over_singleton_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2299')">Proof.</div>
<div class="proofscript" id="proof2299">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tprove_correctness</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tmapconcat_over_singleton">tmapconcat_over_singleton</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_fun_correctness">tmerge_empty_record_r_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapconcat_over_singleton_step">tmapconcat_over_singleton_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">map</span>-<span class="id">concat</span>/<span class="id">coll</span> <span class="id">right</span>/<span class="id">nil</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Simplufy</span> <span class="id">map</span> <span class="id">concat</span> <span class="kwd">with</span> <span class="id">a</span> <span class="id">bag</span> <span class="kwd">with</span> <span class="id">an</span> <span class="id">empty</span> <span class="id">record</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tmapconcat_over_singleton_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_fun">tmapconcat_over_singleton_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tmapconcat_over_singleton_step_correct">tmapconcat_over_singleton_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_step">tmapconcat_over_singleton_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_fun_correctness">tmapconcat_over_singleton_fun_correctness</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdup_elim_fun">tdup_elim_fun</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#dup_elim_fun">dup_elim_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tdup_elim_fun_correctness">tdup_elim_fun_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} (<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdup_elim_fun">tdup_elim_fun</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2300')">Proof.</div>
<div class="proofscript" id="proof2300">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">intros</span> <span class="id">nd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.TNRAEnvRewrite.html#tdup_elim">tdup_elim</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nodupA_checker_correct">nodupA_checker_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdup_elim_fun_correctness">tdup_elim_fun_correctness</a></span> : <span class="id">optim_correct</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdup_elim_step">tdup_elim_step</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStep">mkOptimizerStep</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">distinct</span>/<span class="id">nodup</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Removes</span> <span class="id">applications</span> <span class="id">of</span> <span class="id">the</span> <span class="id">distinct</span> <span class="id">operator</span> <span class="id">to</span> <span class="id">bags</span> <span class="id">statically</span> <span class="id">known</span> <span class="id">to</span> <span class="id">already</span> <span class="id">be</span> <span class="id">duplicate</span> <span class="id">free</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">tdup_elim_fun</span>" <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdup_elim_fun">tdup_elim_fun</a></span> .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tdup_elim_step_correct">tdup_elim_step_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#mkOptimizerStepModel">mkOptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdup_elim_step">tdup_elim_step</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdup_elim_fun_correctness">tdup_elim_fun_correctness</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnraenv_optim_list">tnraenv_optim_list</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (@<span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#OptimizerStep">OptimizerStep</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tand_comm_step">tand_comm_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_comm_step">tselect_and_comm_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_step">tselect_and_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_step">select_union_distr_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_step">tdot_from_duplicate_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_step">tdot_from_duplicate_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_step">tflatten_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_step">tconcat_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_step">tconcat_empty_record_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_step">tdot_over_concat_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_step">tdot_over_concat_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_step">tmerge_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_step">tmerge_empty_record_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_step">tmap_into_id_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_step">tflatten_map_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_step">tflatten_flatten_map_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_step">tmap_map_compose_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_step">tmap_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_step">tapp_over_id_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_step">tapp_over_env_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_step">tapp_over_id_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_step">tapp_over_ignoreid_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_step">tappenv_over_env_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_step">tappenv_over_env_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_step">tappenv_over_ignoreenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_step">tapp_over_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_step">tappenv_over_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_step">tappenv_over_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_step">tapp_over_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_step">tapp_over_unop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_step">tappenv_over_unop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_step">tunop_over_either_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_step">tunop_over_either_const_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_step">tapp_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_step">tapp_over_mapconcat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_step">tapp_over_product_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_step">tappenv_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_step">tappenv_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_step">tapp_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_step">tapp_over_binop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_step">tproduct_singletons_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_step">tproduct_empty_right_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_step">tproduct_empty_left_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_step">tdouble_flatten_map_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_step">tflatten_over_double_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_step">tflatten_over_double_map_with_either_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_step">tappenv_over_env_merge_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_step">ttostring_on_string_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_step">tmap_full_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_step">tcompose_selects_in_mapenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_step">tmapenv_to_env_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_step">tenv_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_step">tflatten_mapenv_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_step">tflatten_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_through_appenv_step">tflatten_through_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_flatten_mapenv_to_map_step">tappenv_flatten_mapenv_to_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_step">tselect_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_step">tselect_over_either_nil_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_step">tmap_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_step">tmap_over_either_nil_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_step">tappenv_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_step">tselect_over_flatten_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_step">tmap_over_flatten_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_step">tmap_over_flatten_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_step">tconcat_over_rec_eq_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_step">tapp_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_step">tappenv_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_step">tflip_env1_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_step">tflip_env2_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_step">tmapenv_over_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_step">tappenv_over_binop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_step">tflip_env6_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_step">tmapenv_to_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_step">tmerge_concat_to_concat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_step">tmerge_with_concat_to_concat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_step">tdot_over_rec_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_step">tnested_map_over_singletons_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_mapenv_to_map_step">tappenv_mapenv_to_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_step">trproject_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_step">trproject_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_step">trproject_over_rec_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_step">trproject_over_concat_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_step">trproject_over_concat_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_step">trproject_over_rproject_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_step">trproject_over_either_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_step">tcount_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_step">tcount_over_flat_map_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_step">tcount_over_flat_map_either_nil_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_step">tcount_over_flat_map_either_nil_app_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_step">tcount_over_flat_map_either_nil_app_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_step">tmapconcat_over_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdup_elim_step">tdup_elim_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnraenv_optim_model_list">tnraenv_optim_model_list</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#OptimizerStepModel">OptimizerStepModel</a></span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tand_comm_step_correct">tand_comm_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_comm_step_correct">tselect_and_comm_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_step_correct">tselect_and_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_step_correct">select_union_distr_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_step_correct">tdot_from_duplicate_r_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_step_correct">tdot_from_duplicate_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_step_correct">tflatten_coll_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_step_correct">tconcat_empty_record_r_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_step_correct">tconcat_empty_record_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_step_correct">tdot_over_concat_r_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_step_correct">tdot_over_concat_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_step_correct">tmerge_empty_record_r_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_lecord_l_step_correct">tmerge_empty_lecord_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_step_correct">tmap_into_id_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_step_correct">tflatten_map_coll_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_step_correct">tflatten_flatten_map_either_nil_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_step_correct">tmap_map_compose_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_step_correct">tmap_singleton_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_step_correct">tapp_over_id_r_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_step_correct">tapp_over_env_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_step_correct">tapp_over_id_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_step_correct">tapp_over_ignoreid_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_step_correct">tappenv_over_env_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_step_correct">tappenv_over_env_r_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_step_correct">tappenv_over_ignoreenv_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_step_correct">tapp_over_app_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_step_correct">tappenv_over_appenv_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_step_correct">tappenv_over_app_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_step_correct">tapp_over_appenv_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_step_correct">tapp_over_unop_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_step_correct">tappenv_over_unop_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_step_correct">tunop_over_either_const_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_step_correct">tunop_over_either_const_app_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_step_correct">tapp_over_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_step_correct">tapp_over_mapconcat_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_step_correct">tapp_over_product_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_step_correct">tappenv_over_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_step_correct">tappenv_over_select_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_step_correct">tapp_over_select_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_step_correct">tapp_over_binop_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_step_correct">tproduct_singletons_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_step_correct">tproduct_empty_right_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_step_correct">tproduct_empty_left_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_step_correct">tdouble_flatten_map_coll_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_step_correct">tflatten_over_double_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_step_correct">tflatten_over_double_map_with_either_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_step_correct">tappenv_over_env_merge_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_step_correct">ttostring_on_string_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_step_correct">tmap_full_over_select_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_step_correct">tcompose_selects_in_mapenv_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_step_correct">tmapenv_to_env_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_step_correct">tenv_appenv_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_step_correct">tflatten_mapenv_coll_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_step_correct">tflatten_nil_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_through_appenv_step_correct">tflatten_through_appenv_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_flatten_mapenv_to_map_step_correct">tappenv_flatten_mapenv_to_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_step_correct">tselect_over_either_nil_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_step_correct">tselect_over_either_nil_app_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_step_correct">tmap_over_either_nil_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_step_correct">tmap_over_either_nil_app_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_step_correct">tappenv_over_either_nil_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_step_correct">tselect_over_flatten_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_step_correct">tmap_over_flatten_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_step_correct">tmap_over_flatten_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_step_correct">tconcat_over_rec_eq_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_step_correct">tapp_over_const_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_step_correct">tappenv_over_const_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_step_correct">tflip_env1_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_step_correct">tflip_env2_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_step_correct">tmapenv_over_singleton_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_step_correct">tappenv_over_binop_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_step_correct">tflip_env6_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_step_correct">tmapenv_to_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_step_correct">tmerge_concat_to_concat_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_step_correct">tmerge_with_concat_to_concat_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_step_correct">tdot_over_rec_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_step_correct">tnested_map_over_singletons_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_mapenv_to_map_step_correct">tappenv_mapenv_to_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_step_correct">trproject_nil_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_step_correct">trproject_over_const_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_step_correct">trproject_over_rec_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_step_correct">trproject_over_concat_r_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_step_correct">trproject_over_concat_l_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_step_correct">trproject_over_rproject_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_step_correct">trproject_over_either_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_step_correct">tcount_over_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_step_correct">tcount_over_flat_map_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_step_correct">tcount_over_flat_map_either_nil_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_step_correct">tcount_over_flat_map_either_nil_app_map_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_step_correct">tcount_over_flat_map_either_nil_app_singleton_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_step_correct">tmapconcat_over_singleton_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdup_elim_step_correct">tdup_elim_step_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tnraenv_optim_model_list_complete">tnraenv_optim_model_list_complete</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_model_list_complete">optim_model_list_complete</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_list">tnraenv_optim_list</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_model_list">tnraenv_optim_model_list</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2301')">Proof.</div>
<div class="proofscript" id="proof2301">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">optim_correct_list_complete_prover</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="tnraenv_optim_list_correct">tnraenv_optim_list_correct</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_list_correct">optim_list_correct</a></span> <span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_list">tnraenv_optim_list</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_list_correct_from_model">optim_list_correct_from_model</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_model_list_complete">tnraenv_optim_model_list_complete</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="tnraenv_optim_list_distinct">tnraenv_optim_list_distinct</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_list_distinct">optim_list_distinct</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_list">tnraenv_optim_list</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2302')">Proof.</div>
<div class="proofscript" id="proof2302">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_list_distinct_prover">optim_list_distinct_prover</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">vm_compute</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="run_nraenv_optims">run_nraenv_optims</a></span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">opc</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optim_phases_config">optim_phases_config</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#run_phases">run_phases</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_map_deep">tnraenv_map_deep</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnvSize.html#nraenv_size">nraenv_size</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_list">tnraenv_optim_list</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#opc">opc</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="run_nraenv_optims_correctness">run_nraenv_optims_correctness</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} {<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">opc</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optim_phases_config">optim_phases_config</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">p</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Typing.TNRAEnvEq.html#tnraenv_rewrites_to">tnraenv_rewrites_to</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ( <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#run_nraenv_optims">run_nraenv_optims</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#opc">opc</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2303')">Proof.</div>
<div class="proofscript" id="proof2303">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#run_nraenv_optims">run_nraenv_optims</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#run_phases_correctness">run_phases_correctness</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_map_deep_correctness">nraenv_map_deep_correctness</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_list_correct">tnraenv_optim_list_correct</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnvOptimizer.default">default</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nraenv_default_head_optim_list">nraenv_default_head_optim_list</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_step">tapp_over_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_step">tappenv_over_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_step">tappenv_over_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_step">tapp_over_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_step">tmap_into_id_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_step">tproduct_singletons_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_step">tproduct_empty_right_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_step">tproduct_empty_left_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_step">tmap_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_step">tmap_map_compose_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_step">tflatten_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_step">tflatten_map_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_step">tapp_over_id_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_step">tapp_over_id_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_step">tapp_over_unop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_step">tapp_over_binop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_step">tapp_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_step">tapp_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_step">tapp_over_mapconcat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_step">tapp_over_product_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_step">tappenv_over_unop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_step">tcompose_selects_in_mapenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_step">tmap_full_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_step">ttostring_on_string_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_step">tmerge_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_step">tselect_and_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_step">select_union_distr_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_step">tdot_from_duplicate_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_step">tdot_from_duplicate_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_step">tconcat_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_step">tconcat_empty_record_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_step">tdot_over_concat_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_step">tdot_over_concat_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_step">tmerge_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_step">tmerge_empty_record_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_step">tmapenv_to_env_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_step">tenv_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_step">tflatten_mapenv_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_step">tflatten_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_through_appenv_step">tflatten_through_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_flatten_mapenv_to_map_step">tappenv_flatten_mapenv_to_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_step">tapp_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_step">tappenv_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_step">tflip_env1_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_step">tflip_env2_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_step">tmapenv_over_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_step">tappenv_over_binop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_step">tflip_env6_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_step">tmapenv_to_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_step">tappenv_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_step">tapp_over_ignoreid_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_step">tappenv_over_ignoreenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_step">tappenv_over_env_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_step">tappenv_over_env_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_step">tappenv_over_env_merge_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_step">tappenv_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_step">tmerge_concat_to_concat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_step">tmerge_with_concat_to_concat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_step">tdot_over_rec_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_step">tnested_map_over_singletons_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_step">tapp_over_env_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_step">tselect_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_step">tselect_over_either_nil_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_step">tmap_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_step">tmap_over_either_nil_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_step">tappenv_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_step">tselect_over_flatten_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_step">tconcat_over_rec_eq_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_step">trproject_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_step">trproject_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_step">trproject_over_rec_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_step">trproject_over_concat_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_step">trproject_over_concat_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_step">trproject_over_rproject_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_step">trproject_over_either_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_step">tcount_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_step">tcount_over_flat_map_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_step">tcount_over_flat_map_either_nil_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_step">tcount_over_flat_map_either_nil_app_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_step">tcount_over_flat_map_either_nil_app_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_step">tunop_over_either_const_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_step">tunop_over_either_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_step">tmapconcat_over_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="nraenv_default_head_optim_list_valid">nraenv_default_head_optim_list_valid</a></span>  {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#valid_optims">valid_optims</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_list">tnraenv_optim_list</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_head_optim_list">nraenv_default_head_optim_list</a></span> = (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_head_optim_list">nraenv_default_head_optim_list</a></span>,<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2304')">Proof.</div>
<div class="proofscript" id="proof2304">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">vm_compute</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nraenv_default_tail_optim_list">nraenv_default_tail_optim_list</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_flatten_map_either_nil_step">tflatten_flatten_map_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_map_step">tmap_over_flatten_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_app_step">tapp_over_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_appenv_step">tappenv_over_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_app_step">tappenv_over_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_appenv_step">tapp_over_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_into_id_step">tmap_into_id_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_singletons_step">tproduct_singletons_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_right_step">tproduct_empty_right_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tproduct_empty_left_step">tproduct_empty_left_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_singleton_step">tmap_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_map_compose_step">tmap_map_compose_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_coll_step">tflatten_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdouble_flatten_map_coll_step">tdouble_flatten_map_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_step">tflatten_over_double_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_over_double_map_with_either_step">tflatten_over_double_map_with_either_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_map_coll_step">tflatten_map_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_r_step">tapp_over_id_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_id_l_step">tapp_over_id_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_unop_step">tapp_over_unop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_binop_step">tapp_over_binop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_select_step">tapp_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_map_step">tapp_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_mapconcat_step">tapp_over_mapconcat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_product_step">tapp_over_product_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_unop_step">tappenv_over_unop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcompose_selects_in_mapenv_step">tcompose_selects_in_mapenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_full_over_select_step">tmap_full_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#ttostring_on_string_step">ttostring_on_string_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_step">tmerge_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_and_step">tselect_and_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#select_union_distr_step">select_union_distr_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_r_step">tdot_from_duplicate_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_from_duplicate_l_step">tdot_from_duplicate_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_r_step">tconcat_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_empty_record_l_step">tconcat_empty_record_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_r_step">tdot_over_concat_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_concat_l_step">tdot_over_concat_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_r_step">tmerge_empty_record_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_empty_record_l_step">tmerge_empty_record_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_env_step">tmapenv_to_env_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tenv_appenv_step">tenv_appenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_mapenv_coll_step">tflatten_mapenv_coll_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflatten_nil_step">tflatten_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_const_step">tapp_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_const_step">tappenv_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env1_step">tflip_env1_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env2_step">tflip_env2_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_over_singleton_step">tmapenv_over_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_binop_step">tappenv_over_binop_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tflip_env6_step">tflip_env6_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapenv_to_map_step">tmapenv_to_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_map_step">tappenv_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_ignoreid_step">tapp_over_ignoreid_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_ignoreenv_step">tappenv_over_ignoreenv_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_r_step">tappenv_over_env_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_l_step">tappenv_over_env_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_env_merge_l_step">tappenv_over_env_merge_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_select_step">tappenv_over_select_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_concat_to_concat_step">tmerge_concat_to_concat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmerge_with_concat_to_concat_step">tmerge_with_concat_to_concat_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tdot_over_rec_step">tdot_over_rec_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnested_map_over_singletons_step">tnested_map_over_singletons_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tapp_over_env_step">tapp_over_env_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_mapenv_to_map_step">tappenv_mapenv_to_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_step">tselect_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_either_nil_app_step">tselect_over_either_nil_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_step">tmap_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_either_nil_app_step">tmap_over_either_nil_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tappenv_over_either_nil_step">tappenv_over_either_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tselect_over_flatten_step">tselect_over_flatten_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmap_over_flatten_step">tmap_over_flatten_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tconcat_over_rec_eq_step">tconcat_over_rec_eq_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_nil_step">trproject_nil_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_const_step">trproject_over_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rec_step">trproject_over_rec_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_r_step">trproject_over_concat_r_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_concat_l_step">trproject_over_concat_l_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_rproject_step">trproject_over_rproject_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#trproject_over_either_step">trproject_over_either_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_map_step">tcount_over_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_map_step">tcount_over_flat_map_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_map_step">tcount_over_flat_map_either_nil_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_map_step">tcount_over_flat_map_either_nil_app_map_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tcount_over_flat_map_either_nil_app_singleton_step">tcount_over_flat_map_either_nil_app_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_app_step">tunop_over_either_const_app_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tunop_over_either_const_step">tunop_over_either_const_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#optim_step_name">optim_step_name</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tmapconcat_over_singleton_step">tmapconcat_over_singleton_step</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Remark</span> <span class="id"><a name="nraenv_default_tail_optim_list_valid">nraenv_default_tail_optim_list_valid</a></span>  {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="Qcert.Common.Logger.OptimizerStep.html#valid_optims">valid_optims</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#tnraenv_optim_list">tnraenv_optim_list</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_tail_optim_list">nraenv_default_tail_optim_list</a></span> = (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_tail_optim_list">nraenv_default_tail_optim_list</a></span>,<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2305')">Proof.</div>
<div class="proofscript" id="proof2305">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">vm_compute</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="default_nraenv_optim_phases">default_nraenv_optim_phases</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("[<span class="id">nraenv</span>] <span class="id">head</span>"%<span class="id">string</span>,<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_head_optim_list">nraenv_default_head_optim_list</a></span>,5)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: ("[<span class="id">nraenv</span>] <span class="id">tail</span>"%<span class="id">string</span>,<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_tail_optim_list">nraenv_default_tail_optim_list</a></span>,15)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#NRAEnvOptimizer.default">default</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="toptim_old_nraenv_head">toptim_old_nraenv_head</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} {<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#run_nraenv_optims">run_nraenv_optims</a></span> (("<span class="id">head</span>",<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_head_optim_list">nraenv_default_head_optim_list</a></span>,5)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="toptim_old_nraenv_head_correctness">toptim_old_nraenv_head_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} {<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>} <span class="id">p</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_head">toptim_old_nraenv_head</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2306')">Proof.</div>
<div class="proofscript" id="proof2306">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_head">toptim_old_nraenv_head</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#run_nraenv_optims_correctness">run_nraenv_optims_correctness</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="toptim_old_nraenv_tail">toptim_old_nraenv_tail</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} {<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#run_nraenv_optims">run_nraenv_optims</a></span> (("<span class="id">tail</span>",<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#nraenv_default_head_optim_list">nraenv_default_head_optim_list</a></span>,15)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="toptim_old_nraenv_tail_correctness">toptim_old_nraenv_tail_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} {<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>} <span class="id">p</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_tail">toptim_old_nraenv_tail</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2307')">Proof.</div>
<div class="proofscript" id="proof2307">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_tail">toptim_old_nraenv_tail</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#run_nraenv_optims_correctness">run_nraenv_optims_correctness</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="toptim_old_nraenv">toptim_old_nraenv</a></span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>} {<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#compose">compose</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_tail">toptim_old_nraenv_tail</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_head">toptim_old_nraenv_head</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="compose_transitivity">compose_transitivity</a></span> {<span class="id">A</span>:<span class="kwd">Type</span>} {<span class="id">R</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Definitions.html#relation">relation</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#A">A</a></span>} {<span class="id">trans</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Transitive">Transitive</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#R">R</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> <span class="id">y</span>:<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#A">A</a></span>) (<span class="id">f</span> <span class="id">g</span> :<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#A">A</a></span>-&gt;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#A">A</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#R">R</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#x">x</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#g">g</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#y">y</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#R">R</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#g">g</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#y">y</a></span>) (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> (<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#g">g</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#y">y</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#R">R</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#x">x</a></span> ((<span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#compose">compose</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#f">f</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#g">g</a></span>) <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2308')">Proof.</div>
<div class="proofscript" id="proof2308">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="toptim_old_nraenv_correctness">toptim_old_nraenv_correctness</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.Common.CommonSystem.html#basic_model">basic_model</a></span>} {<span class="id">logger</span>:<span class="id"><a href="Qcert.Common.Logger.OptimizerLogger.html#optimizer_logger">optimizer_logger</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>} <span class="id">p</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span> ⇒ₓ <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv">toptim_old_nraenv</a></span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2309')">Proof.</div>
<div class="proofscript" id="proof2309">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv">toptim_old_nraenv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#compose_transitivity">compose_transitivity</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_head_correctness">toptim_old_nraenv_head_correctness</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#toptim_old_nraenv_tail_correctness">toptim_old_nraenv_tail_correctness</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Optim.NRAEnvOptimizer.html#NRAEnvOptimizer">NRAEnvOptimizer</a></span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
