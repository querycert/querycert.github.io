
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.cNNRC.Lang.cNNRC</title>
<meta name="description" content="Documentation of Coq module Qcert.cNNRC.Lang.cNNRC" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.cNNRC.Lang.cNNRC</h1>
<div class="coq">
<br/>
<div class="doc">cNNRC is the core named nested relational calculus. It serves as
the foundations for NNRC, an intermediate language that we use to
facilitate code generation to non-functional targets. </div>
<br/>
<div class="doc">cNNRC is a small pure language without functions. Expressions in
cNNRC are evaluated within a global and a local environment. </div>
<br/>
<div class="doc">Summary:
<ul>
<li>
 Language: cNNRC (Core Named Nested Relational Calculus)
</li>
<li>
 Based on: "Polymorphic type inference for the named nested
  relational calculus." Jan Van den Bussche, and Stijn
  Vansummeren. ACM Transactions on Computational Logic (TOCL) 9.1
  (2007): 3.
</li>
<li>
 translating to cNNRC: NRA, cNRAEnv, NNRC
</li>
<li>
 translating from cNNRC: NNRC, CAMP </li>
</ul>
</div>
<br/>
<div class="doc">Compared to the version proposed by Van den Bussche and Vansummerren:
<ul>
<li>
 We add a notion of global variables, distinct from local variables
</li>
<li>
 We add a let expression: <span class="bracket"><span class="kwd">let</span> <span class="id">x</span> := <span class="id">e1</span> <span class="kwd">in</span> <span class="id">e2</span></span>
</li>
<li>
 Conditional expressions allow arbitrary boolean conditions, not just equality, so
instead of: <span class="bracket"><span class="id">e1</span> = <span class="id">e2</span> ? <span class="id">e3</span> : <span class="id">e4</span></span>, we have: <span class="bracket"><span class="id">e1</span> ? <span class="id">e2</span> : <span class="id">e3</span></span>
</li>
<li>
 We add a case expression for either values: <span class="bracket"><span class="id">either</span> <span class="id">e</span> <span class="id">left</span> <span class="id">v</span>₁ : <span class="id">e</span>₁ | <span class="id">right</span> <span class="id">v</span>₂ : <span class="id">e</span>₂</span>
</li>
</ul>
</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="cNNRC">cNNRC</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html">EquivDec</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Utils.Utils.html">Utils</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Common.CommonRuntime.html">CommonRuntime</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}.<br/>
&nbsp;&nbsp;<br/>
<h1> Abstract Syntax </h1>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="kwd">Syntax</span>.<br/>
&nbsp;&nbsp;<br/>
<div class="doc">Note that the AST is shared between cNNRC and NNRC. However,
        semantics for extended operators are not defined for core
        NNRC. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nnrc">nnrc</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCGetConstant">NNRCGetConstant</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                           <span class="docright">(* global variable lookup (<span class="bracket">$$<span class="id">v</span></span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCVar">NNRCVar</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                                   <span class="docright">(* local variable lookup (<span class="bracket">$<span class="id">v</span></span>) *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCConst">NNRCConst</a></span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                                <span class="docright">(* constant data (<span class="bracket"><span class="id">d</span></span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCBinop">NNRCBinop</a></span> : <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#binary_op">binary_op</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>           <span class="docright">(* binary operator (<span class="bracket"><span class="id">e</span>₁ ⊠ <span class="id">e</span>₂</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCUnop">NNRCUnop</a></span> : <span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#unary_op">unary_op</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                     <span class="docright">(* unary operator (<span class="bracket">⊞ <span class="id">e</span></span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCLet">NNRCLet</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                   <span class="docright">(* let expression (<span class="bracket"><span class="kwd">let</span> $<span class="id">v</span> := <span class="id">e</span>₁ <span class="kwd">in</span> <span class="id">e</span>₂</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCFor">NNRCFor</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                   <span class="docright">(* for loop (<span class="bracket">{ <span class="id">e</span>₂ | $<span class="id">v</span> <span class="kwd">in</span> <span class="id">e</span>₁ }</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCIf">NNRCIf</a></span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                   <span class="docright">(* conditional (<span class="bracket"><span class="id">e</span>₁ ? <span class="id">e</span>₂ : <span class="id">e</span>₃</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCEither">NNRCEither</a></span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> <span class="docright">(* case expression (<span class="bracket"><span class="id">either</span> <span class="id">e</span> <span class="id">left</span> $<span class="id">v</span>₁ : <span class="id">e</span>₁ | <span class="id">right</span> $<span class="id">v</span>₂ : <span class="id">e</span>₂</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCGroupBy">NNRCGroupBy</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>.    <span class="docright">(* group by expression (<span class="bracket"><span class="id">e</span> <span class="id">groupby</span> <span class="id">g</span> <span class="id">fields</span></span>) -- only in full NNRC  *)</span><br/>
<br/>
<div class="doc">The <span class="bracket"><span class="id">nnrcIsCore</span></span> predicate defines what fragment is part of
        this abstract syntax is in the core named nested relational
        calculus and which part is not. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nnrcIsCore">nnrcIsCore</a></span> (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGetConstant">NNRCGetConstant</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id">_</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id">_</span> <span class="id">e1</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id">_</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id">_</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id">e1</span> <span class="id">_</span> <span class="id">e2</span> <span class="id">_</span> <span class="id">e3</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGroupBy">NNRCGroupBy</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">cNNRC is defined as the expressions in that abstract syntax
        for which the <span class="bracket"><span class="id">nnrcIsCore</span></span> predicate holds. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nnrc_core">nnrc_core</a></span> : <span class="kwd">Set</span> := {<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> | <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e</span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nnrc_core_to_nnrc">nnrc_core_to_nnrc</a></span> (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="lift_nnrc_core">lift_nnrc_core</a></span> {<span class="id">A</span>} (<span class="id">f</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#A">A</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#A">A</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#f">f</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">nnrc_cases</span>" <span class="id">tactic</span>(<span class="id">first</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">first</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGetConstants</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCVar</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCConst</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCBinop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCUnop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCLet</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCFor</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCIf</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCEither</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGroupBy</span>"%<span class="id">string</span>].<br/>
<br/>
<div class="doc">Equality between two NNRC expressions is decidable. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="nnrc_eqdec">nnrc_eqdec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#EqDec">EqDec</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2335')">Proof.</div>
<div class="proofscript" id="proof2335">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>,  {<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> = <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#y">y</a></span>} + {<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> &lt;&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#y">y</a></span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#binary_op_eqdec">binary_op_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#unary_op_eqdec">unary_op_eqdec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Data.RData.html#data_eqdec">data_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.CoqLibAdd.html#string_eqdec">string_eqdec</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="kwd">Syntax</span>.<br/>
&nbsp;&nbsp;<br/>
<h1> Semantics </h1>
<br/>
<div class="doc">For cNNRC, we provide two kinds of semantics: a denotational
  semantics, and an evaluation semantics. Both are shown to be
  equivalent. The denotational semantics is used for documentation
  purposes, as most of the rest of the code relies on evaluation as
  the primary semantics. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics">Semantics</a></span>.<br/>
<div class="doc">Part of the context is fixed for the rest of the development:
<ul>
<li>
 <span class="bracket"><span class="id">h</span></span> is the brand relation
</li>
<li>
 <span class="bracket"><span class="id">constant_env</span></span> is the global environment </li>
</ul>
</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id"><a href="Qcert.Common.Data.BrandRelation.html#brand_relation_t">brand_relation_t</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">constant_env</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>*<span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span>)).<br/>
<br/>
<h2> Denotational Semantics </h2>
<br/>
<div class="doc">The semantics is defined using the main judgment <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>
    〛⇓ <span class="id">d</span></span> (<span class="bracket"><span class="id">nnrc_core_sem</span></span>) where <span class="bracket">Γ<span class="id">c</span></span> is the global environment, <span class="bracket">Γ</span>
    is the local environment, <span class="bracket"><span class="id">e</span></span> the cNNRC expression and <span class="bracket"><span class="id">d</span></span> the
    resulting value. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">Conditionals and matching expressions only evaluate one of
    their branches. The auxiliary judgment <span class="bracket">Γ<span class="id">c</span> ; Γ ; <span class="id">v</span> ; <span class="id">c</span>₁ ⊢ 〚<span class="id">e</span>〛φ ⇓ <span class="id">c</span>₂</span>
    (<span class="bracket"><span class="id">nnrc_core_sem_for</span></span>) is used in the definition of <span class="bracket"><span class="kwd">for</span></span>
    expressions. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics.Denotation">Denotation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nnrc_core_sem">nnrc_core_sem</a></span>: <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCGetConstant">sem_cNNRCGetConstant</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">v</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Data.RRelation.html#edot">edot</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.constant_env">constant_env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;                 <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span>(<span class="id">v</span>) = <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGetConstant">NNRCGetConstant</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚$$<span class="id">v</span>〛⇓ <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCVar">sem_cNNRCVar</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">v</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Assoc.html#lookup">lookup</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#equiv_dec">equiv_dec</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;              <span class="docright">(*   <span class="bracket">Γ(<span class="id">v</span>) = <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>                 <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚$<span class="id">v</span>〛⇓ <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCConst">sem_cNNRCConst</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Data.RDataNorm.html#normalize_data">normalize_data</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> = <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> -&gt;                     <span class="docright">(*   <span class="bracket"><span class="id">norm</span>(<span class="id">d</span>₁) = <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span>             <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">d</span>₁〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCBinop">sem_cNNRCBinop</a></span> : <span class="kwd">forall</span> <span class="id">bop</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">d1</span> <span class="id">d2</span> <span class="id">d3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> -&gt;                      <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> -&gt;                      <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Operators.BinaryOperatorsSem.html#binary_op_eval">binary_op_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#bop">bop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d3">d3</a></span> -&gt;         <span class="docright">(* ∧ <span class="bracket"><span class="id">d</span>₁ ⊠ <span class="id">d</span>₂ = <span class="id">d</span>₃</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#bop">bop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d3">d3</a></span>      <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁ ⊠ <span class="id">e</span>₂〛⇓ <span class="id">d</span>₃</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCUnop">sem_cNNRCUnop</a></span> : <span class="kwd">forall</span> <span class="id">uop</span> <span class="id">env</span> <span class="id">e</span> <span class="id">d1</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> -&gt;                       <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Operators.UnaryOperatorsSem.html#unary_op_eval">unary_op_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#uop">uop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> -&gt;             <span class="docright">(* ∧ <span class="bracket">⊞ <span class="id">d</span>₁ = <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#uop">uop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span>           <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚⊞ <span class="id">e</span>〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCLet">sem_cNNRCLet</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">v</span> <span class="id">e2</span> <span class="id">d1</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> -&gt;                      <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> -&gt;            <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; (<span class="id">v</span>,<span class="id">d</span>₁),Γ ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span>          <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="kwd">let</span> 4<span class="id">v</span> := <span class="id">e</span>₁ <span class="kwd">in</span> <span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCFor">sem_cNNRCFor</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">v</span> <span class="id">e2</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span>) -&gt;              <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁〛= {<span class="id">c</span>₁}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c2">c2</a></span> -&gt;             <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; Γ ; <span class="id">v</span> ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>₂〛φ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c2">c2</a></span>)  <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢ 〚{ <span class="id">e</span>₂ | $<span class="id">v</span> <span class="kwd">in</span> <span class="id">e</span>₁ }〛⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCIf_true">sem_cNNRCIf_true</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) -&gt;            <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">true</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;                       <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e3">e3</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>           <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁ ? <span class="id">e</span>₂ : <span class="id">e</span>₃〛⇓ <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCIf_false">sem_cNNRCIf_false</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) -&gt;           <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">false</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e3">e3</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;                       <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₃〛⇓ <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e3">e3</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>           <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>₁ ? <span class="id">e</span>₂ : <span class="id">e</span>₃〛⇓ <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCEither_left">sem_cNNRCEither_left</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e</span> <span class="id">v1</span> <span class="id">e1</span> <span class="id">v2</span> <span class="id">e2</span> <span class="id">d</span> <span class="id">d1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dleft">dleft</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>) -&gt;                <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>〛⇓ <span class="id">left</span> <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v1">v1</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> -&gt;            <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; (<span class="id">v</span>₁,<span class="id">d</span>),Γ ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v1">v1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v2">v2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">either</span> <span class="id">e</span> <span class="id">left</span> $<span class="id">v</span>₁ : <span class="id">e</span>₁ | <span class="id">right</span> $<span class="id">v</span>₂ : <span class="id">e</span>₂〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCEither_right">sem_cNNRCEither_right</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e</span> <span class="id">v1</span> <span class="id">e1</span> <span class="id">v2</span> <span class="id">e2</span> <span class="id">d</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dright">dright</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>) -&gt;               <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">e</span>〛⇓ <span class="id">right</span> <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v2">v2</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> -&gt;            <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; (<span class="id">v</span>₂,<span class="id">d</span>),Γ ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v1">v1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v2">v2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ⊢〚<span class="id">either</span> <span class="id">e</span> <span class="id">left</span> $<span class="id">v</span>₁ : <span class="id">e</span>₁ | <span class="id">right</span> $<span class="id">v</span>₂ : <span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="nnrc_core_sem_for">nnrc_core_sem_for</a></span>: <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCFor_empty">sem_cNNRCFor_empty</a></span> <span class="id">v</span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>            <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; Γ ; <span class="id">v</span> ; {} ⊢〚<span class="id">e</span>〛φ ⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_cNNRCFor_cons">sem_cNNRCFor_cons</a></span> <span class="id">v</span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e</span> <span class="id">d1</span> <span class="id">c1</span> <span class="id">d2</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> -&gt;          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; (<span class="id">v</span>,<span class="id">d</span>₁),Γ ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>   *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c2">c2</a></span> -&gt;           <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; Γ ; <span class="id">v</span> ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛φ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span>) (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span>::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c2">c2</a></span>). <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; Γ ; <span class="id">v</span> ; {<span class="id">d</span>₁::<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛φ ⇓ {<span class="id">d</span>₂::<span class="id">c</span>₂}</span>  *)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.Denotation">Denotation</a></span>.<br/>
<br/>
<h2> Evaluation Semantics </h2>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics.Evaluation">Evaluation</a></span>.<br/>
<br/>
<div class="doc">Evaluation takes a cNNRC expression and an environment. It
          returns an optional value. When <span class="bracket"><span class="id">None</span></span> is returned, it
          denotes an error. An error is always propagated. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nnrc_core_eval">nnrc_core_eval</a></span> (<span class="id">env</span>:<span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGetConstant">NNRCGetConstant</a></span> <span class="id">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Data.RRelation.html#edot">edot</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.constant_env">constant_env</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id">v</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Assoc.html#lookup">lookup</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#equiv_dec">equiv_dec</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id">d</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RDataNorm.html#normalize_data">normalize_data</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id">bop</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Lift.html#olift2">olift2</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> <span class="id">d2</span> =&gt; <span class="id"><a href="Qcert.Common.Operators.BinaryOperatorsSem.html#binary_op_eval">binary_op_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id">bop</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id">uop</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Lift.html#olift">olift</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> =&gt; <span class="id"><a href="Qcert.Common.Operators.UnaryOperatorsSem.html#unary_op_eval">unary_op_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id">uop</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id">v</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d1</span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>,<span class="id">d1</span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id">v</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id">c1</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">for_fun</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">d1</span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#for_fun">for_fun</a></span> <span class="id">c1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">cond_fun</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">d</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span> <span class="id"><a href="Qcert.Utils.Lift.html#olift">olift</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cond_fun">cond_fun</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id">e</span> <span class="id">v1</span> <span class="id">e1</span> <span class="id">v2</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dleft">dleft</a></span> <span class="id">d</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v1</span>,<span class="id">d</span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dright">dright</a></span> <span class="id">d</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v2</span>,<span class="id">d</span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGroupBy">NNRCGroupBy</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="docright">(* Evaluation for GroupBy always fails for cNNRC  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">cNNRC evaluation is only sensitive to the environment modulo
      lookup. </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="nnrc_core_eval_lookup_equiv_prop">nnrc_core_eval_lookup_equiv_prop</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="Qcert.Utils.Assoc.html#lookup_equiv">lookup_equiv</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2336')">Proof.</div>
<div class="proofscript" id="proof2336">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#respectful">respectful</a></span>, <span class="id"><a href="Qcert.Utils.Assoc.html#lookup_equiv">lookup_equiv</a></span>; <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">y0</span> <span class="id">into</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">trivial</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>); <span class="tactic">try</span> <span class="tactic">rewrite</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> (<span class="id">IHe</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>); <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHe2</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap_ext">rmap_ext</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHe2</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#olift">olift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">IHe2</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">IHe3</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.Evaluation">Evaluation</a></span>.<br/>
<br/>
<h1> Correctness of evaluation </h1>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">The evaluation and denotational semantics are equivalent. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics.EvaluationCorrect">EvaluationCorrect</a></span>.<br/>
<div class="doc">Auxiliary lemma on <span class="bracket"><span class="kwd">for</span></span> loops used in the correctness theorem </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nnrc_core_for_eval_correct">nnrc_core_for_eval_correct</a></span> <span class="id">v</span> <span class="id">env</span> <span class="id">e</span> <span class="id">l1</span> <span class="id">l2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#l1">l1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#l2">l2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">env</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span>) (<span class="id">d</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#l1">l1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#l2">l2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2337')">Proof.</div>
<div class="proofscript" id="proof2337">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">l2</span>; <span class="tactic">induction</span> <span class="id">l1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>, <span class="id">a</span>) :: <span class="id">env</span>) <span class="id">e</span>); <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id">env</span>) <span class="id">e</span>) <span class="id">l1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">H2</span>; [|<span class="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHl1</span> <span class="id">l</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Evaluation is correct wrt. the cNNRC semantics. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nnrc_core_eval_correct">nnrc_core_eval_correct</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2338')">Proof.</div>
<div class="proofscript" id="proof2338">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e2</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">d0</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">d1</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHe</span> <span class="id">d0</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>,<span class="id">d0</span>)::<span class="id">env</span>) <span class="id">e2</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe2</span> ((<span class="id">v</span>,<span class="id">d0</span>)::<span class="id">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">d</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">d0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id">l</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id">env</span>) <span class="id">e2</span>) <span class="id">l</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_for_eval_correct">nnrc_core_for_eval_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">env</span>); <span class="id">specialize</span> (<span class="id">IHe3</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;condition&nbsp;true&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e2</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">d0</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_cNNRCIf_true">sem_cNNRCIf_true</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;condition&nbsp;false&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e3</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe3</span> <span class="id">d0</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_cNNRCIf_false">sem_cNNRCIf_false</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;left&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHe2</span> ((<span class="id">v</span>,<span class="id">d0</span>)::<span class="id">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dleft">dleft</a></span> <span class="id">d0</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">d</span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_cNNRCEither_left">sem_cNNRCEither_left</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;right&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHe3</span> ((<span class="id">v0</span>,<span class="id">d0</span>)::<span class="id">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dright">dright</a></span> <span class="id">d0</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe3</span> <span class="id">d</span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_cNNRCEither_right">sem_cNNRCEither_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Auxiliary lemma on <span class="bracket"><span class="kwd">for</span></span> loops used in the completeness theorem </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nnrc_core_for_eval_complete">nnrc_core_for_eval_complete</a></span> <span class="id">e</span> <span class="id">v</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">env</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span>) (<span class="id">d</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c2">c2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c2">c2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2339')">Proof.</div>
<div class="proofscript" id="proof2339">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hcomp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">c2</span>; <span class="tactic">induction</span> <span class="id">c1</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">Hcomp</span> ((<span class="id">v</span>,<span class="id">a</span>)::<span class="id">env</span>) <span class="id">d2</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHc1</span> <span class="id">c3</span> <span class="id">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id">env</span>) <span class="id">e</span>) <span class="id">c1</span>); <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *; [|<span class="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHc1</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Evaluation is complete wrt. the cNNRC semantics. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nnrc_core_eval_complete">nnrc_core_eval_complete</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2340')">Proof.</div>
<div class="proofscript" id="proof2340">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">H4</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHe2</span> <span class="id">env</span> <span class="id">d2</span> <span class="id">H6</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHe</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">H3</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">H5</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHe2</span> ((<span class="id">v</span>,<span class="id">d1</span>)::<span class="id">env</span>) <span class="id">d</span> <span class="id">H6</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">env</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id">c1</span>) <span class="id">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_for_eval_complete">nnrc_core_for_eval_complete</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;condition&nbsp;true&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">env</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id">H5</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;condition&nbsp;false&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">env</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id">H5</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;left&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">env</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dleft">dleft</a></span> <span class="id">d0</span>) <span class="id">H7</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;right&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">env</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dright">dright</a></span> <span class="id">d0</span>) <span class="id">H7</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Main equivalence theorem. </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="nnrc_core_eval_correct_and_complete">nnrc_core_eval_correct_and_complete</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> &lt;-&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2341')">Proof.</div>
<div class="proofscript" id="proof2341">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_correct">nnrc_core_eval_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_complete">nnrc_core_eval_complete</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.EvaluationCorrect">EvaluationCorrect</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics">Semantics</a></span>.<br/>
<br/>
<h1> Toplevel </h1>
&nbsp;&nbsp;<br/>
<div class="doc">The Top-level evaluation function is used externally by the
      Q*cert compiler. It takes a cNNRC expression and an global
      environment as input. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Top">Top</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id"><a href="Qcert.Common.Data.BrandRelation.html#brand_relation_t">brand_relation_t</a></span>).<br/>
<br/>
<div class="doc">Top-level semantics is always with an initial empty environment </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nnrc_core_sem_top">nnrc_core_sem_top</a></span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCTop">sem_NNRCTop</a></span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">cenv</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Top.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_top">nnrc_core_sem_top</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nnrc_core_eval_top">nnrc_core_eval_top</a></span> (<span class="id">q</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) (<span class="id">cenv</span>:<span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#lift_nnrc_core">lift_nnrc_core</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Top.h">h</a></span> (<span class="id"><a href="Qcert.Utils.Bindings.html#rec_sort">rec_sort</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#q">q</a></span>.<br/>
<br/>
<div class="doc">If top-level NNRC eval returns a value, this value is
        consistent with the semantics </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="nnrc_core_eval_top_correct">nnrc_core_eval_top_correct</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Bindings.html#rec_sort">rec_sort</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> = <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">q</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) (<span class="id">d</span>:<span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_top">nnrc_core_eval_top</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#q">q</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_top">nnrc_core_sem_top</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#q">q</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2342')">Proof.</div>
<div class="proofscript" id="proof2342">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cenv</span> <span class="id">HconstNorm</span> <span class="id">q</span> <span class="id">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">q</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_top">nnrc_core_eval_top</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#lift_nnrc_core">lift_nnrc_core</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_correct">nnrc_core_eval_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HconstNorm</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Top">Top</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC">cNNRC</a></span>.<br/>
<br/>
<h1> Notations </h1>
<br/>
<span class="kwd">Notation</span> "‵‵ <span class="id">c</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dconst">dconst</a></span> <span class="id">c</span>))  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nnrc_scope</span>.                           <br/>
<span class="kwd">Notation</span> "‵ <span class="id">c</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id">c</span>)  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nnrc_scope</span>.                                     <br/>
<span class="kwd">Notation</span> "‵{||}" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nnrc_scope</span>.                         <br/>
<span class="kwd">Notation</span> "‵[||]" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.                          <br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ∧ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpAnd">OpAnd</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 65): <span class="id">nnrc_scope</span>.    <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ∨ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpOr">OpOr</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ≐ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpEqual">OpEqual</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ≤ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpLe">OpLe</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">no</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ⋃ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpBagUnion">OpBagUnion</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.  <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> − <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpBagDiff">OpBagDiff</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.  <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ⋂<span class="id">min</span> <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpBagMin">OpBagMin</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>. <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ⋃<span class="id">max</span> <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpBagMax">OpBagMax</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>. <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> ⊕ <span class="id">r</span>"   := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpRecConcat">OpRecConcat</a></span>) <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nnrc_scope</span>.                     <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> ⊗ <span class="id">r</span>"   := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.BinaryOperators.html#OpRecMerge">OpRecMerge</a></span>) <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nnrc_scope</span>.                <br/>
<br/>
<span class="kwd">Notation</span> "¬( <span class="id">r1</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpNeg">OpNeg</a></span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.        <br/>
<span class="kwd">Notation</span> "ε( <span class="id">r1</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpDistinct">OpDistinct</a></span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.   <br/>
<span class="kwd">Notation</span> "♯<span class="id">count</span>( <span class="id">r1</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpCount">OpCount</a></span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>. <br/>
<span class="kwd">Notation</span> "♯<span class="id">flatten</span>( <span class="id">d</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpFlatten">OpFlatten</a></span> <span class="id">d</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.                   <br/>
<span class="kwd">Notation</span> "‵{| <span class="id">d</span> |}" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpBag">OpBag</a></span>) <span class="id">d</span>)  (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.                        <br/>
<span class="kwd">Notation</span> "‵[| ( <span class="id">s</span> , <span class="id">r</span> ) |]" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpRec">OpRec</a></span> <span class="id">s</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.              <br/>
<span class="kwd">Notation</span> "¬π[ <span class="id">s1</span> ]( <span class="id">r</span> )" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpRecRemove">OpRecRemove</a></span> <span class="id">s1</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.          <br/>
<span class="kwd">Notation</span> "π[ <span class="id">s1</span> ]( <span class="id">r</span> )" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpRecProject">OpRecProject</a></span> <span class="id">s1</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.          <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> · <span class="id">r</span>" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.UnaryOperators.html#OpDot">OpDot</a></span> <span class="id">r</span>)) <span class="id">p</span>) (<span class="id">left</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 40): <span class="id">nnrc_scope</span>.      <br/>
<br/>
<span class="kwd">Notation</span> "'$$' <span class="id">v</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGetConstant">NNRCGetConstant</a></span> <span class="id">v</span>%<span class="id">string</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "'$$' <span class="id">v</span>") : <span class="id">nnrc_scope</span>.<br/>
<span class="kwd">Notation</span> "'$' <span class="id">v</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id">v</span>%<span class="id">string</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "'$' <span class="id">v</span>") : <span class="id">nnrc_scope</span>.<br/>
<span class="kwd">Notation</span> "{| <span class="id">e1</span> | '$' <span class="id">x</span> ∈ <span class="id">e2</span> |}" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id">x</span>%<span class="id">string</span> <span class="id">e2</span> <span class="id">e1</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "{|  <span class="id">e1</span>  '/ ' |  '$' <span class="id">x</span>  ∈  <span class="id">e2</span>  |}") : <span class="id">nnrc_scope</span>.   <br/>
<span class="kwd">Notation</span> "'<span class="kwd">let</span>' '$' <span class="id">x</span> ':=' <span class="id">e2</span> '<span class="kwd">in</span>' <span class="id">e1</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id">x</span>%<span class="id">string</span> <span class="id">e2</span> <span class="id">e1</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "'[<span class="id">hv</span>' '<span class="kwd">let</span>'  '$' <span class="id">x</span>  ':='  '[' <span class="id">e2</span> ']'  '/' '<span class="kwd">in</span>'  '[' <span class="id">e1</span> ']' ']'") : <span class="id">nnrc_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">e1</span> ? <span class="id">e2</span> : <span class="id">e3</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "<span class="id">e1</span>  '[<span class="id">hv</span>' ?  <span class="id">e2</span> '/' :  <span class="id">e3</span> ']'") : <span class="id">nnrc_scope</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">nnrc_cases</span>" <span class="id">tactic</span>(<span class="id">first</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span>;<br/>
&nbsp;&nbsp;[ <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGetConstant</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCVar</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCConst</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCBinop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCUnop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCLet</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCFor</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCIf</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCEither</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGroupBy</span>"%<span class="id">string</span>].<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
