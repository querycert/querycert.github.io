
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.cNNRC.Lang.cNNRC</title>
<meta name="description" content="Documentation of Coq module Qcert.cNNRC.Lang.cNNRC" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.cNNRC.Lang.cNNRC</h1>
<div class="coq">
<br/>
<div class="doc">cNNRC is the core named nested relational calculus. It serves as
the foundations for NNRC, an intermediate language to facilitate code
generation for non-functional targets. </div>
<br/>
<div class="doc">cNNRC is a small pure language without functions. Expressions in
cNNRC are evaluated within an environment. </div>
<br/>
<div class="doc">Summary:
<ul>
<li>
 Language: cNNRC (Core Named Nested Relational Calculus)
</li>
<li>
 Based on: "Polymorphic type inference for the named nested
  relational calculus." Jan Van den Bussche, and Stijn
  Vansummeren. ACM Transactions on Computational Logic (TOCL) 9.1
  (2007): 3.
</li>
<li>
 translating to cNNRC: NRA, cNRAEnv, NNRC
</li>
<li>
 translating from cNNRC: NNRC, CAMP </li>
</ul>
</div>
<br/>
<div class="doc">Compared to the version proposed by Van den Bussche and Vansummerren:
<ul>
<li>
 We add a notion of global variables, distinct from local variables
</li>
<li>
 We add a let expression: <span class="bracket"><span class="kwd">let</span> <span class="id">x</span> := <span class="id">e1</span> <span class="kwd">in</span> <span class="id">e2</span></span>
</li>
<li>
 Conditional expression allow arbitrary boolean conditions, not just equality, so
instead of <span class="bracket"><span class="id">e1</span> = <span class="id">e2</span> ? <span class="id">e3</span> : <span class="id">e4</span></span>, we have <span class="bracket"><span class="id">e1</span> ? <span class="id">e2</span> : <span class="id">e3</span></span>
</li>
<li>
 We add a matching expression for either values (left/right)
</li>
</ul>
</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="cNNRC">cNNRC</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html">EquivDec</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Utils.Utils.html">Utils</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Common.CommonRuntime.html">CommonRuntime</a></span>.<br/>
<br/>
<div class="doc">Named Nested Relational Calculus </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Common.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}.<br/>
&nbsp;&nbsp;<br/>
<h1> Abstract Syntax </h1>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="kwd">Syntax</span>.<br/>
&nbsp;&nbsp;<br/>
<div class="doc">Note that the AST is shared between cNNRC and NNRC. However,
        semantics for extended operators are not defined for core
        NNRC. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nnrc">nnrc</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCGetConstant">NNRCGetConstant</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                             <span class="docright">(* Global variable lookup  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCVar">NNRCVar</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                                     <span class="docright">(* Variable lookup  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCConst">NNRCConst</a></span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                                  <span class="docright">(* Constant value  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCBinop">NNRCBinop</a></span> : <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#binOp">binOp</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                 <span class="docright">(* Binary operator  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCUnop">NNRCUnop</a></span> : <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#unaryOp">unaryOp</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                        <span class="docright">(* Unary operator  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCLet">NNRCLet</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                     <span class="docright">(* Let expression  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCFor">NNRCFor</a></span> : <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                     <span class="docright">(* For loop  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCIf">NNRCIf</a></span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>                     <span class="docright">(* Conditional  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCEither">NNRCEither</a></span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>   <span class="docright">(* Choice expression  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NNRCGroupBy">NNRCGroupBy</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>.      <span class="docright">(* Group by expression -- only in NNRC  *)</span><br/>
<br/>
<div class="doc">The nnrcIsCore predicate defines what fragment is part of this
        abstract syntax is in the core cNNRC and which part is not. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nnrcIsCore">nnrcIsCore</a></span> (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGetConstant">NNRCGetConstant</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id">_</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id">_</span> <span class="id">e1</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id">_</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id">_</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id">e1</span> <span class="id">_</span> <span class="id">e2</span> <span class="id">_</span> <span class="id">e3</span> =&gt; (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e1</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e2</span>) /\ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGroupBy">NNRCGroupBy</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">cNNRC is defined as the dependent type of expressions in that
        abstract syntax such that the <span class="bracket"><span class="id">nnrcIsCore</span></span> predicate holds. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nnrc_core">nnrc_core</a></span> : <span class="kwd">Set</span> := {<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> | <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrcIsCore">nnrcIsCore</a></span> <span class="id">e</span>}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nnrc_core_to_nnrc">nnrc_core_to_nnrc</a></span> (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="lift_nnrc_core">lift_nnrc_core</a></span> {<span class="id">A</span>} (<span class="id">f</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#A">A</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#A">A</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#f">f</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">nnrc_cases</span>" <span class="id">tactic</span>(<span class="id">first</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">first</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGetConstants</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCVar</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCConst</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCBinop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCUnop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCLet</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCFor</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCIf</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCEither</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGroupBy</span>"%<span class="id">string</span>].<br/>
<br/>
<div class="doc">Equality between two NNRC expressions is decidable. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="nnrc_eqdec">nnrc_eqdec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#EqDec">EqDec</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2310')">Proof.</div>
<div class="proofscript" id="proof2310">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>,  {<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> = <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#y">y</a></span>} + {<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> &lt;&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#y">y</a></span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#binOp_eqdec">binOp_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#unaryOp_eqdec">unaryOp_eqdec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Data.RData.html#data_eqdec">data_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.CoqLibAdd.html#string_eqdec">string_eqdec</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">string_dec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="kwd">Syntax</span>.<br/>
&nbsp;&nbsp;<br/>
<h1> Semantics </h1>
<br/>
<div class="doc">For Core NNRC, we provide two kinds of semantics: a denotational semantics, and an evaluation semantics. Both are shown to be consistent. The denotational semantics is used for illustration purposes, as most of the rest of the code relies on evaluation as the primary semantics. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics">Semantics</a></span>.<br/>
<div class="doc">Part of the context is fixed for the rest of the development:
<ul>
<li>
 <span class="bracket"><span class="id">h</span></span> is the brand relation
</li>
<li>
 <span class="bracket"><span class="id">constant_env</span></span> is the global environment </li>
</ul>
</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id"><a href="Qcert.Common.Data.BrandRelation.html#brand_relation_t">brand_relation_t</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">constant_env</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>*<span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span>)).<br/>
<br/>
<h2> Semantics </h2>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics.DenotSemantics">DenotSemantics</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nnrc_core_sem">nnrc_core_sem</a></span>: <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCGetConstant">sem_NNRCGetConstant</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">c</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Data.RRelation.html#edot">edot</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.constant_env">constant_env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGetConstant">NNRCGetConstant</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c">c</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCVar">sem_NNRCVar</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">c</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Assoc.html#lookup">lookup</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#equiv_dec">equiv_dec</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c">c</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c">c</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCConst">sem_NNRCConst</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>) (<span class="id"><a href="Qcert.Common.Data.RDataNorm.html#normalize_data">normalize_data</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCBinop">sem_NNRCBinop</a></span>: <span class="kwd">forall</span> <span class="id">bop</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">d1</span> <span class="id">d2</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Operators.RBinaryOpsSem.html#fun_of_binop">fun_of_binop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#bop">bop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#bop">bop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCUnop">sem_NNRCUnop</a></span>: <span class="kwd">forall</span> <span class="id">uop</span> <span class="id">env</span> <span class="id">e</span> <span class="id">d</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Operators.RUnaryOpsSem.html#fun_of_unaryop">fun_of_unaryop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#uop">uop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#uop">uop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCLet">sem_NNRCLet</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">d1</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCFor">sem_NNRCFor</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">c1</span> <span class="id">cres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c1">c1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cres">cres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span>) (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cres">cres</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCIf_true">sem_NNRCIf_true</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e3">e3</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCIf_false">sem_NNRCIf_false</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e3">e3</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e2">e2</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e3">e3</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCEither_left">sem_NNRCEither_left</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">xl</span> <span class="id">el</span> <span class="id">xr</span> <span class="id">er</span> <span class="id">dl</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dleft">dleft</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dl">dl</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#xl">xl</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dl">dl</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#el">el</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#xl">xl</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#el">el</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#xr">xr</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#er">er</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCEither_right">sem_NNRCEither_right</a></span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e1</span> <span class="id">xl</span> <span class="id">el</span> <span class="id">xr</span> <span class="id">er</span> <span class="id">dr</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dright">dright</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dr">dr</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#xr">xr</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dr">dr</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#er">er</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e1">e1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#xl">xl</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#el">el</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#xr">xr</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#er">er</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="nnrc_core_sem_for">nnrc_core_sem_for</a></span>: <span class="id"><a href="Qcert.Common.Env.RVar.html#var">var</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCFor_empty">sem_NNRCFor_empty</a></span> <span class="id">x</span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCFor_cons">sem_NNRCFor_cons</a></span> <span class="id">x</span>: <span class="kwd">forall</span> <span class="id">env</span> <span class="id">e</span> <span class="id">d</span> <span class="id">c</span> <span class="id">dres</span> <span class="id">cres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c">c</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cres">cres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#x">x</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span>::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#c">c</a></span>) (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span>::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cres">cres</a></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.DenotSemantics">DenotSemantics</a></span>.<br/>
<br/>
<h1> Evaluation Semantics </h1>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics.EvalSemantics">EvalSemantics</a></span>.<br/>
<br/>
<div class="doc">Evaluation takes a cNNRC expression and an environment. It
          returns an optional value. A <span class="bracket"><span class="id">None</span></span> being returned indicate
          an error and is always propagated. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nnrc_core_eval">nnrc_core_eval</a></span> (<span class="id">env</span>:<span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc">nnrc</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGetConstant">NNRCGetConstant</a></span> <span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Common.Data.RRelation.html#edot">edot</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.constant_env">constant_env</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Assoc.html#lookup">lookup</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#equiv_dec">equiv_dec</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id">d</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RDataNorm.html#normalize_data">normalize_data</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id">bop</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Lift.html#olift2">olift2</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> <span class="id">d2</span> =&gt; <span class="id"><a href="Qcert.Common.Operators.RBinaryOpsSem.html#fun_of_binop">fun_of_binop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id">bop</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d2">d2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id">uop</span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Lift.html#olift">olift</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> =&gt; <span class="id"><a href="Qcert.Common.Operators.RUnaryOpsSem.html#fun_of_unaryop">fun_of_unaryop</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.h">h</a></span> <span class="id">uop</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id">x</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d</span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">x</span>,<span class="id">d</span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id">x</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id">c1</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">inner_eval</span> <span class="id">d1</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">env</span>' := (<span class="id">x</span>,<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="kwd">in</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span>' <span class="id">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#inner_eval">inner_eval</a></span> <span class="id">c1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">aux_if</span> <span class="id">d</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d">d</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id">b</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e2</span> <span class="kwd">else</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span> <span class="id"><a href="Qcert.Utils.Lift.html#olift">olift</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#aux_if">aux_if</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCEither">NNRCEither</a></span> <span class="id">ed</span> <span class="id">xl</span> <span class="id">el</span> <span class="id">xr</span> <span class="id">er</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id">ed</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dleft">dleft</a></span> <span class="id">dl</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">xl</span>,<span class="id">dl</span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id">el</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dright">dright</a></span> <span class="id">dr</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">xr</span>,<span class="id">dr</span>)::<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id">er</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGroupBy">NNRCGroupBy</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="docright">(* Evaluation for GroupBy always fails for cNNRC  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">cNNRC evaluation is only sensitive to the environment up to lookup. </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="nnrc_core_eval_lookup_equiv_prop">nnrc_core_eval_lookup_equiv_prop</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span> (<span class="id"><a href="Qcert.Utils.Assoc.html#lookup_equiv">lookup_equiv</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> ==&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2311')">Proof.</div>
<div class="proofscript" id="proof2311">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#Proper">Proper</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html#respectful">respectful</a></span>, <span class="id"><a href="Qcert.Utils.Assoc.html#lookup_equiv">lookup_equiv</a></span>; <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">y0</span> <span class="id">into</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">x</span> <span class="id">y</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">trivial</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>); <span class="tactic">try</span> <span class="tactic">rewrite</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> (<span class="id">IHe</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>); <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHe2</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap_ext">rmap_ext</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHe2</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#olift">olift</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">IHe2</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">IHe3</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.EvalSemantics">EvalSemantics</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Semantics.EvalCorrect">EvalCorrect</a></span>.<br/>
<div class="doc">Auxiliary lemma for the semantics of <span class="bracket"><span class="kwd">for</span></span> loops </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nnrc_core_for_eval_correct">nnrc_core_for_eval_correct</a></span> <span class="id">v</span> <span class="id">env</span> <span class="id">e</span> <span class="id">l</span> <span class="id">lres</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#lres">lres</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">env</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span>) (<span class="id">dres</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem_for">nnrc_core_sem_for</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#v">v</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#l">l</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#lres">lres</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2312')">Proof.</div>
<div class="proofscript" id="proof2312">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">lres</span>; <span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>, <span class="id">a</span>) :: <span class="id">env</span>) <span class="id">e</span>); <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id">env</span>) <span class="id">e</span>) <span class="id">l</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">H2</span>; [|<span class="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHl</span> <span class="id">l0</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">If NNRC eval returns a value, this value is consistent with the semantics </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nnrc_core_eval_correct">nnrc_core_eval_correct</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#env">env</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2313')">Proof.</div>
<div class="proofscript" id="proof2313">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">constructor</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e2</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">d</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">d0</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHe</span> <span class="id">d</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>,<span class="id">d</span>)::<span class="id">env</span>) <span class="id">e2</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe2</span> ((<span class="id">v</span>,<span class="id">d</span>)::<span class="id">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">dres</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id">l</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Lift.html#lift">lift</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.Common.Data.RRelation.html#rmap">rmap</a></span> (<span class="kwd">fun</span> <span class="id">d1</span> : <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> =&gt; <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> ((<span class="id">v</span>, <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#d1">d1</a></span>) :: <span class="id">env</span>) <span class="id">e2</span>) <span class="id">l</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_for_eval_correct">nnrc_core_for_eval_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">env</span>); <span class="id">specialize</span> (<span class="id">IHe3</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>.<br/>
&nbsp;condition&nbsp;true&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e2</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">d</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_NNRCIf_true">sem_NNRCIf_true</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;condition&nbsp;false&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e3</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe3</span> <span class="id">d</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_NNRCIf_false">sem_NNRCIf_false</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">IHe1</span> <span class="id">env</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id">env</span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;left&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHe2</span> ((<span class="id">v</span>,<span class="id">d</span>)::<span class="id">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dleft">dleft</a></span> <span class="id">d</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">dres</span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_NNRCEither_left">sem_NNRCEither_left</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;right&nbsp;case&nbsp;*)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHe3</span> ((<span class="id">v0</span>,<span class="id">d</span>)::<span class="id">env</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHe1</span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dright">dright</a></span> <span class="id">d</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>); <span class="id">specialize</span> (<span class="id">IHe3</span> <span class="id">dres</span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#sem_NNRCEither_right">sem_NNRCEither_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics.EvalCorrect">EvalCorrect</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Semantics">Semantics</a></span>.<br/>
<br/>
<h1> Toplevel </h1>
&nbsp;&nbsp;<br/>
<div class="doc">The Top-level evaluation function is used externally by the
      Q*cert compiler. It takes a cNNRC expression and an global
      environment as input. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="cNNRC.Top">Top</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id"><a href="Qcert.Common.Data.BrandRelation.html#brand_relation_t">brand_relation_t</a></span>).<br/>
<br/>
<div class="doc">Top-level semantics is always with an initial empty environment </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nnrc_core_top_sem">nnrc_core_top_sem</a></span> : <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span> -&gt; <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NNRCTop">sem_NNRCTop</a></span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">cenv</span> <span class="id">dres</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_sem">nnrc_core_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Top.h">h</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_top_sem">nnrc_core_top_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#e">e</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nnrc_core_eval_top">nnrc_core_eval_top</a></span> (<span class="id">q</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) (<span class="id">cenv</span>:<span class="id"><a href="Qcert.Common.Data.RData.html#bindings">bindings</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#lift_nnrc_core">lift_nnrc_core</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval">nnrc_core_eval</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Top.h">h</a></span> (<span class="id"><a href="Qcert.Utils.Bindings.html#rec_sort">rec_sort</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#q">q</a></span>.<br/>
<br/>
<div class="doc">If top-level NNRC eval returns a value, this value is
        consistent with the semantics </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="nnrc_core_eval_top_correct">nnrc_core_eval_top_correct</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Bindings.html#rec_sort">rec_sort</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> = <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> -&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">q</span>:<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core">nnrc_core</a></span>) (<span class="id">dres</span>:<span class="id"><a href="Qcert.Common.Data.RData.html#data">data</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_top">nnrc_core_eval_top</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#q">q</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_top_sem">nnrc_core_top_sem</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#q">q</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cenv">cenv</a></span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#dres">dres</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2314')">Proof.</div>
<div class="proofscript" id="proof2314">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">cenv</span> <span class="id">HconstNorm</span> <span class="id">q</span> <span class="id">dres</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">q</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_top">nnrc_core_eval_top</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#lift_nnrc_core">lift_nnrc_core</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#nnrc_core_eval_correct">nnrc_core_eval_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">HconstNorm</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC.Top">Top</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#cNNRC">cNNRC</a></span>.<br/>
<br/>
<h1> Notations </h1>
<br/>
<span class="kwd">Notation</span> "‵‵ <span class="id">c</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dconst">dconst</a></span> <span class="id">c</span>))  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nnrc_scope</span>.                           <br/>
<span class="kwd">Notation</span> "‵ <span class="id">c</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> <span class="id">c</span>)  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nnrc_scope</span>.                                     <br/>
<span class="kwd">Notation</span> "‵{||}" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nnrc_scope</span>.                         <br/>
<span class="kwd">Notation</span> "‵[||]" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCConst">NNRCConst</a></span> (<span class="id"><a href="Qcert.Common.Data.RData.html#drec">drec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.                          <br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ∧ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AAnd">AAnd</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 65): <span class="id">nnrc_scope</span>.    <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ∨ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AOr">AOr</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ≐ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AEq">AEq</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ≤ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#ALt">ALt</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">no</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ⋃ <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AUnion">AUnion</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.  <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> − <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMinus">AMinus</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.  <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ⋂<span class="id">min</span> <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMin">AMin</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>. <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ⋃<span class="id">max</span> <span class="id">r2</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMax">AMax</a></span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>. <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> ⊕ <span class="id">r</span>"   := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AConcat">AConcat</a></span>) <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nnrc_scope</span>.                     <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> ⊗ <span class="id">r</span>"   := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCBinop">NNRCBinop</a></span> <span class="id"><a href="Qcert.Common.Operators.RBinaryOps.html#AMergeConcat">AMergeConcat</a></span>) <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nnrc_scope</span>.                <br/>
<br/>
<span class="kwd">Notation</span> "¬( <span class="id">r1</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ANeg">ANeg</a></span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.        <br/>
<span class="kwd">Notation</span> "ε( <span class="id">r1</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADistinct">ADistinct</a></span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>.   <br/>
<span class="kwd">Notation</span> "♯<span class="id">count</span>( <span class="id">r1</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ACount">ACount</a></span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nnrc_scope</span>. <br/>
<span class="kwd">Notation</span> "♯<span class="id">flatten</span>( <span class="id">d</span> )" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AFlatten">AFlatten</a></span> <span class="id">d</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.                   <br/>
<span class="kwd">Notation</span> "‵{| <span class="id">d</span> |}" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> <span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#AColl">AColl</a></span>) <span class="id">d</span>)  (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.                        <br/>
<span class="kwd">Notation</span> "‵[| ( <span class="id">s</span> , <span class="id">r</span> ) |]" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARec">ARec</a></span> <span class="id">s</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.              <br/>
<span class="kwd">Notation</span> "¬π[ <span class="id">s1</span> ]( <span class="id">r</span> )" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecRemove">ARecRemove</a></span> <span class="id">s1</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.          <br/>
<span class="kwd">Notation</span> "π[ <span class="id">s1</span> ]( <span class="id">r</span> )" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ARecProject">ARecProject</a></span> <span class="id">s1</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nnrc_scope</span>.          <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> · <span class="id">r</span>" := ((<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCUnop">NNRCUnop</a></span> (<span class="id"><a href="Qcert.Common.Operators.RUnaryOps.html#ADot">ADot</a></span> <span class="id">r</span>)) <span class="id">p</span>) (<span class="id">left</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 40): <span class="id">nnrc_scope</span>.      <br/>
<br/>
<span class="kwd">Notation</span> "'$$' <span class="id">v</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCVar">NNRCVar</a></span> <span class="id">v</span>%<span class="id">string</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "'$$' <span class="id">v</span>") : <span class="id">nnrc_scope</span>.<br/>
<span class="kwd">Notation</span> "{| <span class="id">e1</span> | '$$' <span class="id">x</span> ∈ <span class="id">e2</span> |}" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCFor">NNRCFor</a></span> <span class="id">x</span>%<span class="id">string</span> <span class="id">e2</span> <span class="id">e1</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "{|  <span class="id">e1</span>  '/ ' |  '$$' <span class="id">x</span>  ∈  <span class="id">e2</span>  |}") : <span class="id">nnrc_scope</span>.   <br/>
<span class="kwd">Notation</span> "'<span class="id">LET</span>' '$$' <span class="id">x</span> ':=' <span class="id">e2</span> '<span class="id">IN</span>' <span class="id">e1</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCLet">NNRCLet</a></span> <span class="id">x</span>%<span class="id">string</span> <span class="id">e2</span> <span class="id">e1</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "'[<span class="id">hv</span>' '<span class="id">LET</span>'  '$$' <span class="id">x</span>  ':='  '[' <span class="id">e2</span> ']'  '/' '<span class="id">IN</span>'  '[' <span class="id">e1</span> ']' ']'") : <span class="id">nnrc_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">e1</span> ? <span class="id">e2</span> : <span class="id">e3</span>" := (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCIf">NNRCIf</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span>) (<span class="tactic">at</span> <span class="id">level</span> 50, <span class="id">format</span> "<span class="id">e1</span>  '[<span class="id">hv</span>' ?  <span class="id">e2</span> '/' :  <span class="id">e3</span> ']'") : <span class="id">nnrc_scope</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">nnrc_cases</span>" <span class="id">tactic</span>(<span class="id">first</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span>;<br/>
&nbsp;&nbsp;[ <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGetConstant</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCVar</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCConst</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCBinop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCUnop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCLet</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCFor</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCIf</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCEither</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NNRCGroupBy</span>"%<span class="id">string</span>].<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
