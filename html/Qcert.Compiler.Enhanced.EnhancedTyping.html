
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.Compiler.Enhanced.EnhancedTyping</title>
<meta name="description" content="Documentation of Coq module Qcert.Compiler.Enhanced.EnhancedTyping" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.Compiler.Enhanced.EnhancedTyping</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html">EquivDec</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html">RelationClasses</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Equivalence.html">Equivalence</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Utils.ToString.html">ToString</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Utils.Utils.html">Utils</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Data.DataSystem.html">DataSystem</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html">SqlDateComponent</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html">UriComponent</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html">EnhancedData</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedEJson.html">EnhancedEJson</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedDataToEJson.html">EnhancedDataToEJson</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedEJsonToJSON.html">EnhancedEJsonToJSON</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedToJava.html">EnhancedToJava</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedToJavascriptAst.html">EnhancedToJavascriptAst</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedReduceOps.html">EnhancedReduceOps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedToReduceOps.html">EnhancedToReduceOps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedToSpark.html">EnhancedToSpark</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html">EnhancedType</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedToScala.html">EnhancedToScala</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedDataTyping.html">EnhancedDataTyping</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTypeToJSON.html">EnhancedTypeToJSON</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedRuntime.html">EnhancedRuntime</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SqlDate">SqlDate</a></span> {<span class="id">br</span>:<span class="id"><a href="Qcert.Brands.BrandRelation.html#brand_relation">brand_relation</a></span>} : <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> := <span class="id"><a href="Qcert.TypeSystem.RType.html#Foreign">Foreign</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html#enhancedSqlDate">enhancedSqlDate</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SqlDatePeriod">SqlDatePeriod</a></span> {<span class="id">br</span>:<span class="id"><a href="Qcert.Brands.BrandRelation.html#brand_relation">brand_relation</a></span>} : <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> := <span class="id"><a href="Qcert.TypeSystem.RType.html#Foreign">Foreign</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html#enhancedSqlDatePeriod">enhancedSqlDatePeriod</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="isSqlDate">isSqlDate</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (τ:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html#enhancedSqlDate">enhancedSqlDate</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="isSqlDatePeriod">isSqlDatePeriod</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (τ:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html#enhancedSqlDatePeriod">enhancedSqlDatePeriod</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="isNat">isNat</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (τ:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Nat</span>₀ =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="isString">isString</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (τ:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">String</span>₀ =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="tuncoll">tuncoll</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (τ:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4403')">Proof.</div>
<div class="proofscript" id="proof4403">
&nbsp;&nbsp;<span class="tactic">destruct</span> τ.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (<span class="kwd">fun</span> τ₀ : <span class="id">rtype</span>₀ =&gt; <span class="id">wf_rtype</span>₀ τ₀ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="id">x</span> <span class="id">e</span>)). <br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="sql_date_unary_op_has_type">sql_date_unary_op_has_type</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} : <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_unary_op">sql_date_unary_op</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="tuop_sql_date_get_component">tuop_sql_date_get_component</a></span> <span class="id">part</span> : <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_has_type">sql_date_unary_op_has_type</a></span> (<span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_get_component">uop_sql_date_get_component</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#part">part</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Nat">Nat</a></span><br/>
| <span class="id"><a name="tuop_sql_date_from_string">tuop_sql_date_from_string</a></span> : <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_has_type">sql_date_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_from_string">uop_sql_date_from_string</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span><br/>
| <span class="id"><a name="tuop_sql_date_period_from_string">tuop_sql_date_period_from_string</a></span> : <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_has_type">sql_date_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_period_from_string">uop_sql_date_period_from_string</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span><br/>
.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="uri_unary_op_has_type">uri_unary_op_has_type</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} : <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uri_unary_op">uri_unary_op</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="tuop_uri_encode">tuop_uri_encode</a></span> : <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#uri_unary_op_has_type">uri_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uop_uri_encode">uop_uri_encode</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span><br/>
| <span class="id"><a name="tuop_uri_decode">tuop_uri_decode</a></span> : <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#uri_unary_op_has_type">uri_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uop_uri_decode">uop_uri_decode</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sql_date_unary_op_type_infer">sql_date_unary_op_type_infer</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_unary_op">sql_date_unary_op</a></span>) (τ₁:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_get_component">uop_sql_date_get_component</a></span> <span class="id">part</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Nat">Nat</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_from_string">uop_sql_date_from_string</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isString">isString</a></span> τ₁ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_period_from_string">uop_sql_date_period_from_string</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isString">isString</a></span> τ₁ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="uri_unary_op_type_infer">uri_unary_op_type_infer</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uri_unary_op">uri_unary_op</a></span>) (τ₁:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uop_uri_encode">uop_uri_encode</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isString">isString</a></span> τ₁ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uop_uri_decode">uop_uri_decode</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isString">isString</a></span> τ₁ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sql_date_unary_op_type_infer_sub">sql_date_unary_op_type_infer_sub</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_unary_op">sql_date_unary_op</a></span>) (τ₁:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>*<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_get_component">uop_sql_date_get_component</a></span> <span class="id">part</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_unary_op_schema">enforce_unary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) <span class="id"><a href="Qcert.TypeSystem.RType.html#Nat">Nat</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_from_string">uop_sql_date_from_string</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_unary_op_schema">enforce_unary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#uop_sql_date_period_from_string">uop_sql_date_period_from_string</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_unary_op_schema">enforce_unary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sql_date_unary_op_typing_sound">sql_date_unary_op_typing_sound</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_unary_op">sql_date_unary_op</a></span>) (τ<span class="kwd">in</span> τ<span class="id">out</span> : <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_has_type">sql_date_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#din">din</a></span> ▹ τ<span class="kwd">in</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#sql_date_unary_op_interp">sql_date_unary_op_interp</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#din">din</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> /\ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4404')">Proof.</div>
<div class="proofscript" id="proof4404">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#denhancedsqldate">denhancedsqldate</a></span>, <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#denhancedsqldateperiod">denhancedsqldateperiod</a></span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">part</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#denhancedsqldate">denhancedsqldate</a></span>, <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#denhancedsqldateperiod">denhancedsqldateperiod</a></span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">part</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="uri_unary_op_typing_sound">uri_unary_op_typing_sound</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uri_unary_op">uri_unary_op</a></span>) (τ<span class="kwd">in</span> τ<span class="id">out</span> : <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#uri_unary_op_has_type">uri_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#din">din</a></span> ▹ τ<span class="kwd">in</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#uri_unary_op_interp">uri_unary_op_interp</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#din">din</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> /\ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4405')">Proof.</div>
<div class="proofscript" id="proof4405">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} : <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_op">enhanced_unary_op</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="tenhanced_unary_sql_date_op">tenhanced_unary_sql_date_op</a></span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_has_type">sql_date_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span> (<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_sql_date_op">enhanced_unary_sql_date_op</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span>) τ<span class="kwd">in</span> τ<span class="id">out</span><br/>
&nbsp;&nbsp;| <span class="id"><a name="tenhanced_unary_uri_op">tenhanced_unary_uri_op</a></span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#uri_unary_op_has_type">uri_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span> (<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_uri_op">enhanced_unary_uri_op</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span>) τ<span class="kwd">in</span> τ<span class="id">out</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="enhanced_unary_op_typing_infer">enhanced_unary_op_typing_infer</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">fu</span>:<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_op">enhanced_unary_op</a></span>) (τ:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_uri_op">enhanced_unary_uri_op</a></span> <span class="id">op</span> =&gt; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#uri_unary_op_type_infer">uri_unary_op_type_infer</a></span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_sql_date_op">enhanced_unary_sql_date_op</a></span> <span class="id">op</span> =&gt; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_type_infer">sql_date_unary_op_type_infer</a></span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_unary_op_typing_infer_correct">enhanced_unary_op_typing_infer_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span>:<span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_unary">foreign_operators_unary</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ<span class="id">out</span>} :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer">enhanced_unary_op_typing_infer</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ₁ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ₁ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4406')">Proof.</div>
<div class="proofscript" id="proof4406">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fu</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Foreign_canon">Foreign_canon</a></span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String_canon">String_canon</a></span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String_canon">String_canon</a></span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String_canon">String_canon</a></span>; <span class="id">constructor</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String_canon">String_canon</a></span>; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_unary_op_typing_infer_least">enhanced_unary_op_typing_infer_least</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span>:<span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_unary">foreign_operators_unary</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ<span class="id">out</span>₁ τ<span class="id">out</span>₂} :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer">enhanced_unary_op_typing_infer</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ₁ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> τ<span class="id">out</span>₁ -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ₁ τ<span class="id">out</span>₂ -&gt;<br/>
&nbsp;&nbsp;τ<span class="id">out</span>₁ ≤ τ<span class="id">out</span>₂.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4407')">Proof.</div>
<div class="proofscript" id="proof4407">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fu</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Foreign_canon">Foreign_canon</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String_canon">String_canon</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String_canon">String_canon</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#String_canon">String_canon</a></span> <span class="kwd">in</span> <span class="id">H0</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_unary_op_typing_infer_complete">enhanced_unary_op_typing_infer_complete</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span>:<span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_unary">foreign_operators_unary</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ<span class="id">out</span>} : <br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer">enhanced_unary_op_typing_infer</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ₁ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;~ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ₁ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4408')">Proof.</div>
<div class="proofscript" id="proof4408">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fu</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not">not</a></span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not">not</a></span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H2</span>; <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="uri_unary_op_type_infer_sub">uri_unary_op_type_infer_sub</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uri_unary_op">uri_unary_op</a></span>) (τ₁:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>*<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uop_uri_encode">uop_uri_encode</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_unary_op_schema">enforce_unary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span>) <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.UriComponent.html#uop_uri_decode">uop_uri_decode</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_unary_op_schema">enforce_unary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span>) <span class="id"><a href="Qcert.TypeSystem.RType.html#String">RType.String</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="enhanced_unary_op_typing_infer_sub">enhanced_unary_op_typing_infer_sub</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">fu</span>:<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_op">enhanced_unary_op</a></span>) (τ:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>*<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_sql_date_op">enhanced_unary_sql_date_op</a></span> <span class="id">op</span> =&gt; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_type_infer_sub">sql_date_unary_op_type_infer_sub</a></span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_uri_op">enhanced_unary_uri_op</a></span> <span class="id">op</span> =&gt; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#uri_unary_op_type_infer_sub">uri_unary_op_type_infer_sub</a></span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_unary_op_typing_sound">enhanced_unary_op_typing_sound</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_unary">foreign_operators_unary</a></span>) (τ<span class="kwd">in</span> τ<span class="id">out</span> : <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#din">din</a></span> ▹ τ<span class="kwd">in</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_unary_op_interp">enhanced_unary_op_interp</a></span> <span class="id"><a href="Qcert.Brands.BrandRelation.html#brand_relation_brands">brand_relation_brands</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#din">din</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> /\ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4409')">Proof.</div>
<div class="proofscript" id="proof4409">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_unary_op_typing_sound">sql_date_unary_op_typing_sound</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#uri_unary_op_typing_sound">uri_unary_op_typing_sound</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_binary_op">sql_date_binary_op</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_plus">tbop_sql_date_plus</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_plus">bop_sql_date_plus</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_minus">tbop_sql_date_minus</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_minus">bop_sql_date_minus</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_ne">tbop_sql_date_ne</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_ne">bop_sql_date_ne</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_lt">tbop_sql_date_lt</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_lt">bop_sql_date_lt</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_le">tbop_sql_date_le</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_le">bop_sql_date_le</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_gt">tbop_sql_date_gt</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_gt">bop_sql_date_gt</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_ge">tbop_sql_date_ge</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_ge">bop_sql_date_ge</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_period_between">tbop_sql_date_period_between</a></span>  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_period_between">bop_sql_date_period_between</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="tbop_sql_date_set_component">tbop_sql_date_set_component</a></span> <span class="id">part</span> : <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> (<span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_set_component">bop_sql_date_set_component</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#part">part</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Nat">Nat</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sql_date_binary_op_type_infer">sql_date_binary_op_type_infer</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_binary_op">sql_date_binary_op</a></span>) (τ₁ τ₂:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_plus">bop_sql_date_plus</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDatePeriod">isSqlDatePeriod</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_minus">bop_sql_date_minus</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDatePeriod">isSqlDatePeriod</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_ne">bop_sql_date_ne</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_lt">bop_sql_date_lt</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_le">bop_sql_date_le</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_gt">bop_sql_date_gt</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_ge">bop_sql_date_ge</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_period_between">bop_sql_date_period_between</a></span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_set_component">bop_sql_date_set_component</a></span> <span class="id">part</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span> τ₁ &amp;&amp; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isNat">isNat</a></span> τ₂ <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sql_date_binary_op_typing_sound">sql_date_binary_op_typing_sound</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span> : <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_binary_op">sql_date_binary_op</a></span>) (τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> : <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span>₁ <span class="id">din</span>₂ : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₁ ▹ τ<span class="kwd">in</span>₁ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₂ ▹ τ<span class="kwd">in</span>₂ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#sql_date_binary_op_interp">sql_date_binary_op_interp</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> <span class="id">din</span>₁ <span class="id">din</span>₂ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> /\ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4410')">Proof.</div>
<div class="proofscript" id="proof4410">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H4</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">part</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sql_date_binary_op_type_infer_sub">sql_date_binary_op_type_infer_sub</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#sql_date_binary_op">sql_date_binary_op</a></span>) (τ₁ τ₂:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>*<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>*<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_plus">bop_sql_date_plus</a></span> =&gt; <span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_binary_op_schema">enforce_binary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) (τ₂,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_minus">bop_sql_date_minus</a></span> =&gt; <span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_binary_op_schema">enforce_binary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) (τ₂,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_ne">bop_sql_date_ne</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_lt">bop_sql_date_lt</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_le">bop_sql_date_le</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_gt">bop_sql_date_gt</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_ge">bop_sql_date_ge</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_binary_op_schema">enforce_binary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) (τ₂,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) <span class="id"><a href="Qcert.TypeSystem.RType.html#Bool">Bool</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_period_between">bop_sql_date_period_between</a></span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_binary_op_schema">enforce_binary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) (τ₂,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDatePeriod">SqlDatePeriod</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Component.SqlDateComponent.html#bop_sql_date_set_component">bop_sql_date_set_component</a></span> <span class="id">part</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.TypeSystem.RSubtype.html#enforce_binary_op_schema">enforce_binary_op_schema</a></span> (τ₁,<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span>) (τ₂,<span class="id"><a href="Qcert.TypeSystem.RType.html#Nat">Nat</a></span>) <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#SqlDate">SqlDate</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="enhanced_binary_op_has_type">enhanced_binary_op_has_type</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_binary_op">enhanced_binary_op</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id"><a name="tenhanced_binary_sql_date_op">tenhanced_binary_sql_date_op</a></span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_has_type">sql_date_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_has_type">enhanced_binary_op_has_type</a></span> (<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_binary_sql_date_op">enhanced_binary_sql_date_op</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span>) τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="enhanced_binary_op_typing_infer">enhanced_binary_op_typing_infer</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_binary_op">enhanced_binary_op</a></span>) (τ₁ τ₂:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_binary_sql_date_op">enhanced_binary_sql_date_op</a></span> <span class="id">fb</span> =&gt; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_type_infer">sql_date_binary_op_type_infer</a></span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_binary_op_typing_infer_correct">enhanced_binary_op_typing_infer_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span>:<span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_binary">foreign_operators_binary</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ₂ τ<span class="id">out</span>} :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer">enhanced_binary_op_typing_infer</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ₁ τ₂ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_has_type">enhanced_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ₁ τ₂ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4411')">Proof.</div>
<div class="proofscript" id="proof4411">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fb</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span>, <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDatePeriod">isSqlDatePeriod</a></span>, <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isNat">isNat</a></span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Nat_canon">Nat_canon</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Foreign_canon">Foreign_canon</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_binary_op_typing_infer_least">enhanced_binary_op_typing_infer_least</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span>:<span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_binary">foreign_operators_binary</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ₂ τ<span class="id">out</span>₁ τ<span class="id">out</span>₂} : <br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer">enhanced_binary_op_typing_infer</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ₁ τ₂ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> τ<span class="id">out</span>₁ -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_has_type">enhanced_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ₁ τ₂ τ<span class="id">out</span>₂ -&gt;<br/>
&nbsp;&nbsp;τ<span class="id">out</span>₁ ≤ τ<span class="id">out</span>₂.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4412')">Proof.</div>
<div class="proofscript" id="proof4412">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fb</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">unfold</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDate">isSqlDate</a></span>, <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isSqlDatePeriod">isSqlDatePeriod</a></span>, <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#isNat">isNat</a></span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="Qcert.TypeSystem.RType.html#Foreign_canon">Foreign_canon</a></span> <span class="kwd">in</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_binary_op_typing_infer_complete">enhanced_binary_op_typing_infer_complete</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span>:<span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_binary">foreign_operators_binary</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ₂ τ<span class="id">out</span>} : <br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer">enhanced_binary_op_typing_infer</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ₁ τ₂ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;~ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_has_type">enhanced_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fb">fb</a></span> τ₁ τ₂ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4413')">Proof.</div>
<div class="proofscript" id="proof4413">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fb</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intro</span> <span class="id">HH</span>; <span class="id">invcs</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">invcs</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="enhanced_binary_op_typing_infer_sub">enhanced_binary_op_typing_infer_sub</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} (<span class="id">op</span>:<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_binary_op">enhanced_binary_op</a></span>) (τ₁ τ₂:<span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_binary_sql_date_op">enhanced_binary_sql_date_op</a></span> <span class="id">fb</span> =&gt; <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_type_infer_sub">sql_date_binary_op_type_infer_sub</a></span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="enhanced_binary_op_typing_sound">enhanced_binary_op_typing_sound</a></span> {<span class="id">model</span> : <span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id"><a href="Qcert.Data.Operators.ForeignOperators.html#foreign_operators_binary">foreign_operators_binary</a></span>) (τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> : <span class="id"><a href="Qcert.TypeSystem.RType.html#rtype">rtype</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_has_type">enhanced_binary_op_has_type</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span>₁ <span class="id">din</span>₂ : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₁ ▹ τ<span class="kwd">in</span>₁ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₂ ▹ τ<span class="kwd">in</span>₂ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_binary_op_interp">enhanced_binary_op_interp</a></span> <span class="id"><a href="Qcert.Brands.BrandRelation.html#brand_relation_brands">brand_relation_brands</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#fu">fu</a></span> <span class="id">din</span>₁ <span class="id">din</span>₂ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> /\ <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#dout">dout</a></span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4414')">Proof.</div>
<div class="proofscript" id="proof4414">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#sql_date_binary_op_typing_sound">sql_date_binary_op_typing_sound</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Instance</span> <span class="id"><a name="enhanced_foreign_operators_typing">enhanced_foreign_operators_typing</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>} :<br/>
&nbsp;&nbsp;@<span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing">foreign_operators_typing</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_foreign_data">enhanced_foreign_data</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_foreign_operators">enhanced_foreign_operators</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html#enhanced_foreign_type">enhanced_foreign_type</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedDataTyping.html#enhanced_foreign_data_typing">enhanced_foreign_data_typing</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#model">model</a></span><br/>
&nbsp;&nbsp;:= { <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_unary_has_type">foreign_operators_typing_unary_has_type</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_has_type">enhanced_unary_op_has_type</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_unary_sound">foreign_operators_typing_unary_sound</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_sound">enhanced_unary_op_typing_sound</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_unary_infer">foreign_operators_typing_unary_infer</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer">enhanced_unary_op_typing_infer</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_unary_infer_correct">foreign_operators_typing_unary_infer_correct</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer_correct">enhanced_unary_op_typing_infer_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_unary_infer_least">foreign_operators_typing_unary_infer_least</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer_least">enhanced_unary_op_typing_infer_least</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_unary_infer_complete">foreign_operators_typing_unary_infer_complete</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer_complete">enhanced_unary_op_typing_infer_complete</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_unary_infer_sub">foreign_operators_typing_unary_infer_sub</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_unary_op_typing_infer_sub">enhanced_unary_op_typing_infer_sub</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_binary_has_type">foreign_operators_typing_binary_has_type</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_has_type">enhanced_binary_op_has_type</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_binary_sound">foreign_operators_typing_binary_sound</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_sound">enhanced_binary_op_typing_sound</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_binary_infer">foreign_operators_typing_binary_infer</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer">enhanced_binary_op_typing_infer</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_binary_infer_correct">foreign_operators_typing_binary_infer_correct</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer_correct">enhanced_binary_op_typing_infer_correct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_binary_infer_least">foreign_operators_typing_binary_infer_least</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer_least">enhanced_binary_op_typing_infer_least</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_binary_infer_complete">foreign_operators_typing_binary_infer_complete</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer_complete">enhanced_binary_op_typing_infer_complete</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id"><a href="Qcert.Data.OperatorsTyping.ForeignOperatorsTyping.html#foreign_operators_typing_binary_infer_sub">foreign_operators_typing_binary_infer_sub</a></span> := <span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_binary_op_typing_infer_sub">enhanced_binary_op_typing_infer_sub</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Instance</span> <span class="id"><a name="enhanced_foreign_typing">enhanced_foreign_typing</a></span> {<span class="id">model</span>:<span class="id"><a href="Qcert.TypeSystem.TBrandModel.html#brand_model">brand_model</a></span>}:<br/>
&nbsp;&nbsp;@<span class="id"><a href="Qcert.Data.ForeignTyping.html#foreign_typing">foreign_typing</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_foreign_runtime">enhanced_foreign_runtime</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html#enhanced_foreign_type">enhanced_foreign_type</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#model">model</a></span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="Qcert.Data.ForeignTyping.html#mk_foreign_typing">mk_foreign_typing</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedData.html#enhanced_foreign_runtime">enhanced_foreign_runtime</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedType.html#enhanced_foreign_type">enhanced_foreign_type</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">model</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedDataTyping.html#enhanced_foreign_data_typing">enhanced_foreign_data_typing</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Compiler.Enhanced.EnhancedTyping.html#enhanced_foreign_operators_typing">enhanced_foreign_operators_typing</a></span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
