
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.Compiler.Model.EnhancedModel</title>
<meta name="description" content="Documentation of Coq module Qcert.Compiler.Model.EnhancedModel" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.Compiler.Model.EnhancedModel</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">List</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">EquivDec</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">BasicSystem</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignToJava</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignToJavaScript</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignToScala</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignToJSON</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignTypeToJSON</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignToSpark</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignReduceOps</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignToReduceOps</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignCloudant</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ForeignToCloudant</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">CompilerRuntime</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">CompilerModel</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">FloatModelPart</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">StringModelPart</span>. <br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">DateTimeModelPart</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">SqlDateModelPart</span>.<br/>
<span class="kwd">Require</span> <span class="id">NNRCMR</span>.<br/>
<span class="kwd">Require</span> <span class="id">CldMR</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">OptimizerLogger</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">String</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">cNRAEnv</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">NRAEnv</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">cNNRC</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">DNNRCBase</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">tDNNRC</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Dataframe</span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">ListNotations</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">check_subtype_pairs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">br</span>:<span class="id">brand_relation</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">fr</span>:<span class="id">foreign_type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">l</span>:<span class="id">list</span> (<span class="id">rtype</span>*<span class="id">rtype</span>)) : <span class="id">bool</span><br/>
&nbsp;&nbsp;:= <span class="id">forallb</span> (<span class="kwd">fun</span> τ<span class="id">s</span> =&gt; <span class="kwd">if</span> <span class="id">subtype_dec</span> (<span class="id">fst</span> τ<span class="id">s</span>) (<span class="id">snd</span> τ<span class="id">s</span>) <span class="kwd">then</span> <span class="id">true</span> <span class="kwd">else</span> <span class="id">false</span>) <span class="id">l</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enforce_unary_op_schema</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">br</span>:<span class="id">brand_relation</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">fr</span>:<span class="id">foreign_type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ts1</span>:<span class="id">rtype</span>*<span class="id">rtype</span>) (<span class="id">tr</span>:<span class="id">rtype</span>)<br/>
&nbsp;&nbsp;: <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>)<br/>
&nbsp;&nbsp;:= <span class="kwd">if</span> <span class="id">check_subtype_pairs</span> (<span class="id">ts1</span>::<span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> (<span class="id">tr</span>, (<span class="id">snd</span> <span class="id">ts1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enforce_binary_op_schema</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">br</span>:<span class="id">brand_relation</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">fr</span>:<span class="id">foreign_type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ts1</span>:<span class="id">rtype</span>*<span class="id">rtype</span>) (<span class="id">ts2</span>:<span class="id">rtype</span>*<span class="id">rtype</span>) (<span class="id">tr</span>:<span class="id">rtype</span>)<br/>
&nbsp;&nbsp;: <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>*<span class="id">rtype</span>)<br/>
&nbsp;&nbsp;:= <span class="kwd">if</span> <span class="id">check_subtype_pairs</span> (<span class="id">ts1</span>::<span class="id">ts2</span>::<span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> (<span class="id">tr</span>, (<span class="id">snd</span> <span class="id">ts1</span>), (<span class="id">snd</span> <span class="id">ts2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_data</span> : <span class="kwd">Set</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">enhancedfloat</span> : <span class="id">FLOAT</span> -&gt; <span class="id">enhanced_data</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedstring</span> : <span class="id">STRING</span> -&gt; <span class="id">enhanced_data</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedtimescale</span> : <span class="id">time_scale</span> -&gt; <span class="id">enhanced_data</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedtimeduration</span> : <span class="id">TIME_DURATION</span> -&gt; <span class="id">enhanced_data</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedtimepoint</span> : <span class="id">TIME_POINT</span> -&gt; <span class="id">enhanced_data</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedsqldate</span> : <span class="id">SQL_DATE</span> -&gt; <span class="id">enhanced_data</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedsqldateinterval</span> : <span class="id">SQL_DATE_INTERVAL</span> -&gt; <span class="id">enhanced_data</span><br/>
.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_type</span> : <span class="kwd">Set</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">enhancedTop</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedBottom</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedFloat</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedString</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedTimeScale</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedTimeDuration</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedTimePoint</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedSqlDate</span> : <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedSqlDateInterval</span> : <span class="id">enhanced_type</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_type_to_string</span> (<span class="id">et</span>:<span class="id">enhanced_type</span>) : <span class="id">string</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">et</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">enhancedTop</span> =&gt; "<span class="id">ETop</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedBottom</span> =&gt; "<span class="id">EBottom</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedFloat</span> =&gt; "<span class="id">EFloat</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedString</span> =&gt; "<span class="id">EString</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedTimeScale</span> =&gt; "<span class="id">ETimeScale</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedTimeDuration</span> =&gt; "<span class="id">ETimeDuration</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedTimePoint</span> =&gt; "<span class="id">ETimePoint</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedSqlDate</span> =&gt; "<span class="id">ESqlDate</span>"<br/>
&nbsp;&nbsp;| <span class="id">enhancedSqlDateInterval</span> =&gt; "<span class="id">ESqlDateInterval</span>"<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">string_to_enhanced_type</span> (<span class="id">s</span>:<span class="id">string</span>) : <span class="id">option</span> <span class="id">enhanced_type</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">s</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| "<span class="id">ETop</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedTop</span><br/>
&nbsp;&nbsp;| "<span class="id">EBottom</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedBottom</span><br/>
&nbsp;&nbsp;| "<span class="id">EFloat</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedFloat</span><br/>
&nbsp;&nbsp;| "<span class="id">EString</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedString</span><br/>
&nbsp;&nbsp;| "<span class="id">ETimeScale</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedTimeScale</span><br/>
&nbsp;&nbsp;| "<span class="id">ETimeDuration</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedTimeDuration</span><br/>
&nbsp;&nbsp;| "<span class="id">ETimePoint</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedTimePoint</span><br/>
&nbsp;&nbsp;| "<span class="id">ESqlDate</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedSqlDate</span><br/>
&nbsp;&nbsp;| "<span class="id">ESqlDateInterval</span>"%<span class="id">string</span> =&gt; <span class="id">Some</span> <span class="id">enhancedSqlDateInterval</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">RelationClasses</span> <span class="id">Equivalence</span>.<br/>
<br/>
<span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">float_foreign_data</span>.<br/>
<span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">time_scale_foreign_data</span>.<br/>
<span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">time_duration_foreign_data</span>.<br/>
<span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">time_point_foreign_data</span>.<br/>
<span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">sql_date_foreign_data</span>.<br/>
<span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">sql_date_interval_foreign_data</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_data</span> : <span class="id">foreign_data</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_data</span> <span class="id">enhanced_data</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3051')">Next Obligation.</div>
<div class="proofscript" id="proof3051">
&nbsp;&nbsp;<span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">equiv</span>, <span class="id">complement</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="id">right</span>; <span class="tactic">inversion</span> 1].<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (@<span class="id">foreign_data_dec</span> <span class="id">float_foreign_data</span> <span class="id">f</span> <span class="id">f0</span>); <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id">STRING_eq</span> <span class="id">s</span> <span class="id">s0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">StringModelPart.STRING_eq_correct</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">StringModelPart.STRING_eq_correct</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id">t</span> == <span class="id">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id">TIME_DURATION_eq</span> <span class="id">t</span> <span class="id">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">DateTimeModelPart.TIME_DURATION_eq_correct</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">DateTimeModelPart.TIME_DURATION_eq_correct</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (@<span class="id">equiv_dec</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (@<span class="id">foreign_data_dec</span> <span class="id">time_point_foreign_data</span>) <span class="id">t</span> <span class="id">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (@<span class="id">equiv_dec</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (@<span class="id">foreign_data_dec</span> <span class="id">sql_date_foreign_data</span>) <span class="id">s</span> <span class="id">s0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (@<span class="id">equiv_dec</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (@<span class="id">foreign_data_dec</span> <span class="id">sql_date_interval_foreign_data</span>) <span class="id">s</span> <span class="id">s0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">congruence</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3052')">Next Obligation.</div>
<div class="proofscript" id="proof3052">
&nbsp;normalized?&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalized</span> <span class="id">float_foreign_data</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">True</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalized</span> <span class="id">time_scale_foreign_data</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalized</span> <span class="id">time_duration_foreign_data</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalized</span> <span class="id">time_point_foreign_data</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalized</span> <span class="id">sql_date_foreign_data</span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalized</span> <span class="id">sql_date_interval_foreign_data</span> <span class="id">s</span>).<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3053')">Next Obligation.</div>
<div class="proofscript" id="proof3053">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalize_normalizes</span> <span class="id">float_foreign_data</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalize_normalizes</span> <span class="id">time_scale_foreign_data</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalize_normalizes</span> <span class="id">time_duration_foreign_data</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalize_normalizes</span> <span class="id">time_point_foreign_data</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalize_normalizes</span> <span class="id">sql_date_foreign_data</span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">foreign_data_normalize_normalizes</span> <span class="id">sql_date_interval_foreign_data</span> <span class="id">s</span>).<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3054')">Next Obligation.</div>
<div class="proofscript" id="proof3054">
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> 1.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">toString</span> <span class="id">_</span> (@<span class="id">foreign_data_tostring</span> <span class="id">float_foreign_data</span>) <span class="id">f</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">STRING_tostring</span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">toString</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">toString</span> <span class="id">_</span> (@<span class="id">foreign_data_tostring</span> <span class="id">time_duration_foreign_data</span>) <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">toString</span> <span class="id">_</span> (@<span class="id">foreign_data_tostring</span> <span class="id">time_point_foreign_data</span>) <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">toString</span> <span class="id">_</span> (@<span class="id">foreign_data_tostring</span> <span class="id">sql_date_foreign_data</span>) <span class="id">s</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (@<span class="id">toString</span> <span class="id">_</span> (@<span class="id">foreign_data_tostring</span> <span class="id">sql_date_interval_foreign_data</span>) <span class="id">s</span>).<br/>
Defined.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">denhancedfloat</span> <span class="id">f</span> := <span class="id">dforeign</span> (<span class="id">enhancedfloat</span> <span class="id">f</span>).<br/>
<span class="kwd">Definition</span> <span class="id">denhancedstring</span> <span class="id">s</span> := <span class="id">dforeign</span> (<span class="id">enhancedstring</span> <span class="id">s</span>).<br/>
<span class="kwd">Definition</span> <span class="id">denhancedtimescale</span> <span class="id">ts</span> := <span class="id">dforeign</span> (<span class="id">enhancedtimescale</span> <span class="id">ts</span>).<br/>
<span class="kwd">Definition</span> <span class="id">denhancedtimeduration</span> <span class="id">td</span> := <span class="id">dforeign</span> (<span class="id">enhancedtimeduration</span> <span class="id">td</span>).<br/>
<span class="kwd">Definition</span> <span class="id">denhancedtimepoint</span> <span class="id">tp</span> := <span class="id">dforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">tp</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">denhancedsqldate</span> <span class="id">td</span> := <span class="id">dforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">td</span>).<br/>
<span class="kwd">Definition</span> <span class="id">denhancedsqldateinterval</span> <span class="id">td</span> := <span class="id">dforeign</span> (<span class="id">enhancedsqldateinterval</span> <span class="id">td</span>).<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">JSON</span>.<br/>
<span class="kwd">Definition</span> <span class="id">jenhancedfloat</span> <span class="id">f</span> := <span class="id">jforeign</span> (<span class="id">enhancedfloat</span> <span class="id">f</span>).<br/>
<span class="kwd">Definition</span> <span class="id">jenhancedstring</span> <span class="id">s</span> := <span class="id">jforeign</span> (<span class="id">enhancedstring</span> <span class="id">s</span>).<br/>
<span class="kwd">Definition</span> <span class="id">jenhancedtimescale</span> <span class="id">ts</span> := <span class="id">jforeign</span> (<span class="id">enhancedtimescale</span> <span class="id">ts</span>).<br/>
<span class="kwd">Definition</span> <span class="id">jenhancedtimeduration</span> <span class="id">td</span> := <span class="id">jforeign</span> (<span class="id">enhancedtimeduration</span> <span class="id">td</span>).<br/>
<span class="kwd">Definition</span> <span class="id">jenhancedtimepoint</span> <span class="id">tp</span> := <span class="id">jforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">tp</span>).<br/>
<span class="kwd">Definition</span> <span class="id">jenhancedsqldate</span> <span class="id">td</span> := <span class="id">jforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">td</span>).<br/>
<span class="kwd">Definition</span> <span class="id">jenhancedsqldateinterval</span> <span class="id">td</span> := <span class="id">jforeign</span> (<span class="id">enhancedsqldateinterval</span> <span class="id">td</span>).<br/>
<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_unary_op</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">enhanced_unary_float_op</span> : <span class="id">float_unary_op</span> -&gt; <span class="id">enhanced_unary_op</span><br/>
&nbsp;&nbsp;| <span class="id">enhanced_unary_time_op</span> : <span class="id">time_unary_op</span> -&gt; <span class="id">enhanced_unary_op</span><br/>
&nbsp;&nbsp;| <span class="id">enhanced_unary_sql_date_op</span> : <span class="id">sql_date_unary_op</span> -&gt; <span class="id">enhanced_unary_op</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ondfloat</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">FLOAT</span> -&gt; <span class="id">A</span>) (<span class="id">d</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedfloat</span> <span class="id">fd</span>) =&gt; <span class="id">Some</span> (<span class="id">f</span> <span class="id">fd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ondsqldate</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">SQL_DATE</span> -&gt; <span class="id">A</span>) (<span class="id">d</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">fd</span>) =&gt; <span class="id">Some</span> (<span class="id">f</span> <span class="id">fd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">rondfloat</span> (<span class="id">f</span>: <span class="id">FLOAT</span> -&gt; <span class="id">FLOAT</span>) (<span class="id">d</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="id">lift</span> <span class="id">denhancedfloat</span> (<span class="id">ondfloat</span> <span class="id">f</span> <span class="id">d</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ondcollfloat</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">list</span> <span class="id">FLOAT</span> -&gt; <span class="id">A</span>) (<span class="id">d</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="id">lift_oncoll</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">lift</span> <span class="id">f</span> (<span class="id">rmap</span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">ondfloat</span> <span class="id">id</span> <span class="id">z</span>) <span class="id">x</span>)) <span class="id">d</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">rondcollfloat</span> (<span class="id">f</span>: <span class="id">list</span> <span class="id">FLOAT</span> -&gt; <span class="id">FLOAT</span>) (<span class="id">d</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="id">lift</span> <span class="id">denhancedfloat</span> (<span class="id">ondcollfloat</span> <span class="id">f</span> <span class="id">d</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">float_unary_op_interp</span> (<span class="id">op</span>:<span class="id">float_unary_op</span>) (<span class="id">d</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
<br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_neg</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_neg</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_sqrt</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_sqrt</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_exp</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_exp</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_log</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_log</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_log10</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_log10</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_of_int</span> =&gt; <span class="id">lift</span> <span class="id">denhancedfloat</span> (<span class="id">ondnat</span> <span class="id">FLOAT_of_int</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_ceil</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_ceil</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_floor</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_floor</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_truncate</span> =&gt; <span class="id">lift</span> <span class="id">dnat</span> (<span class="id">ondfloat</span> <span class="id">FLOAT_truncate</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_abs</span> =&gt; <span class="id">rondfloat</span> <span class="id">FLOAT_abs</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_sum</span> =&gt; <span class="id">rondcollfloat</span> <span class="id">FLOAT_sum</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_arithmean</span> =&gt; <span class="id">rondcollfloat</span> <span class="id">FLOAT_arithmean</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_listmin</span> =&gt; <span class="id">rondcollfloat</span> <span class="id">FLOAT_listmin</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_float_listmax</span> =&gt; <span class="id">rondcollfloat</span> <span class="id">FLOAT_listmax</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ondstring</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">String.string</span> -&gt; <span class="id">A</span>) (<span class="id">d</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dstring</span> <span class="id">s</span> =&gt; <span class="id">Some</span> (<span class="id">f</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ondtimepoint</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">TIME_POINT</span> -&gt; <span class="id">A</span>) (<span class="id">d</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">fd</span>) =&gt; <span class="id">Some</span> (<span class="id">f</span> <span class="id">fd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">time_unary_op_interp</span> (<span class="id">op</span>:<span class="id">time_unary_op</span>) (<span class="id">d</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_time_to_scale</span> =&gt; <span class="id">lift</span> <span class="id">denhancedtimescale</span> (<span class="id">ondtimepoint</span> <span class="id">TIME_POINT_to_scale</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_time_from_string</span> =&gt; <span class="id">lift</span> <span class="id">denhancedtimepoint</span> (<span class="id">ondstring</span> <span class="id">TIME_POINT_from_string</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_time_duration_from_string</span> =&gt; <span class="id">lift</span> <span class="id">denhancedtimeduration</span> (<span class="id">ondstring</span> <span class="id">TIME_DURATION_from_string</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sql_date_unary_op_interp</span> (<span class="id">op</span>:<span class="id">sql_date_unary_op</span>) (<span class="id">d</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_sql_get_date_component</span> <span class="id">part</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lift</span> <span class="id">dnat</span> (<span class="id">ondsqldate</span> (<span class="id">SQL_DATE_get_component</span> <span class="id">part</span>) <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_sql_date_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lift</span> <span class="id">denhancedsqldate</span> (<span class="id">ondstring</span> <span class="id">SQL_DATE_from_string</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">uop_sql_date_interval_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lift</span> <span class="id">denhancedsqldateinterval</span> (<span class="id">ondstring</span> <span class="id">SQL_DATE_INTERVAL_from_string</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_unary_op_interp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">br</span>:<span class="id">brand_relation_t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span>:<span class="id">enhanced_unary_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_float_op</span> <span class="id">f</span> =&gt; <span class="id">float_unary_op_interp</span> <span class="id">f</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_time_op</span> <span class="id">f</span> =&gt; <span class="id">time_unary_op_interp</span> <span class="id">f</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_sql_date_op</span> <span class="id">f</span> =&gt; <span class="id">sql_date_unary_op_interp</span> <span class="id">f</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">String</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_unary_op</span> : <span class="id">foreign_unary_op</span><br/>
&nbsp;&nbsp;:= { <span class="id">foreign_unary_op_type</span> := <span class="id">enhanced_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_unary_op_interp</span> := <span class="id">enhanced_unary_op_interp</span> }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3055')">Next Obligation.</div>
<div class="proofscript" id="proof3055">
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">unfold</span> <span class="id">equiv</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> ({<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}).<br/>
&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3056')">Next Obligation.</div>
<div class="proofscript" id="proof3056">
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">float_unary_op_tostring</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">time_unary_op_tostring</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">sql_date_unary_op_tostring</span> <span class="id">s</span>).<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3057')">Next Obligation.</div>
<div class="proofscript" id="proof3057">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rondfloat</span>, <span class="id">rondcollfloat</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">invcs</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">z</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">match_destr_in</span> <span class="id">H</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">match_destr_in</span> <span class="id">H</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">match_destr_in</span> <span class="id">H</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">match_destr_in</span> <span class="id">H</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">ondtimepoint</span>, <span class="id">ondstring</span>, <span class="id">denhancedtimepoint</span>, <span class="id">denhancedtimeduration</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">ondsqldate</span>, <span class="id">denhancedsqldate</span>, <span class="id">denhancedsqldateinterval</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">ondfloat2</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">FLOAT</span> -&gt; <span class="id">FLOAT</span> -&gt; <span class="id">A</span>) (<span class="id">d1</span> <span class="id">d2</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedfloat</span> <span class="id">fd1</span>), <span class="id">dforeign</span> (<span class="id">enhancedfloat</span> <span class="id">fd2</span>) =&gt; <span class="id">Some</span> (<span class="id">f</span> <span class="id">fd1</span> <span class="id">fd2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">rondfloat2</span> (<span class="id">f</span>: <span class="id">FLOAT</span> -&gt; <span class="id">FLOAT</span> -&gt; <span class="id">FLOAT</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="id">lift</span> <span class="id">denhancedfloat</span> (<span class="id">ondfloat2</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">rondboolfloat2</span> (<span class="id">f</span>: <span class="id">FLOAT</span> -&gt; <span class="id">FLOAT</span> -&gt; <span class="id">bool</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="id">lift</span> <span class="id">dbool</span> (<span class="id">ondfloat2</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_binary_op</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_float_op</span> : <span class="id">float_binary_op</span> -&gt; <span class="id">enhanced_binary_op</span><br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_time_op</span> : <span class="id">time_binary_op</span> -&gt; <span class="id">enhanced_binary_op</span><br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_sql_date_op</span> : <span class="id">sql_date_binary_op</span> -&gt; <span class="id">enhanced_binary_op</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">float_binary_op_interp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span>:<span class="id">float_binary_op</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_plus</span> =&gt; <span class="id">rondfloat2</span> <span class="id">FLOAT_plus</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_minus</span> =&gt; <span class="id">rondfloat2</span> <span class="id">FLOAT_minus</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_mult</span> =&gt; <span class="id">rondfloat2</span> <span class="id">FLOAT_mult</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_div</span> =&gt; <span class="id">rondfloat2</span> <span class="id">FLOAT_div</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_pow</span> =&gt; <span class="id">rondfloat2</span> <span class="id">FLOAT_pow</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_min</span> =&gt; <span class="id">rondfloat2</span> <span class="id">FLOAT_min</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_max</span> =&gt; <span class="id">rondfloat2</span> <span class="id">FLOAT_max</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_ne</span> =&gt; <span class="id">rondboolfloat2</span> <span class="id">FLOAT_ne</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_lt</span> =&gt; <span class="id">rondboolfloat2</span> <span class="id">FLOAT_lt</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_le</span> =&gt; <span class="id">rondboolfloat2</span> <span class="id">FLOAT_le</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_gt</span> =&gt; <span class="id">rondboolfloat2</span> <span class="id">FLOAT_gt</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_float_ge</span> =&gt; <span class="id">rondboolfloat2</span> <span class="id">FLOAT_ge</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ondtimepoint2</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">TIME_POINT</span> -&gt; <span class="id">TIME_POINT</span> -&gt; <span class="id">A</span>) (<span class="id">d1</span> <span class="id">d2</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">fd1</span>), <span class="id">dforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">fd2</span>) =&gt; <span class="id">Some</span> (<span class="id">f</span> <span class="id">fd1</span> <span class="id">fd2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">rondbooltimepoint2</span> (<span class="id">f</span>: <span class="id">TIME_POINT</span> -&gt; <span class="id">TIME_POINT</span> -&gt; <span class="id">bool</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="id">lift</span> <span class="id">dbool</span> (<span class="id">ondtimepoint2</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">rondtimepoint2</span> (<span class="id">f</span>: <span class="id">TIME_POINT</span> -&gt; <span class="id">TIME_POINT</span> -&gt; <span class="id">TIME_POINT</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="id">lift</span> <span class="id">denhancedtimepoint</span> (<span class="id">ondtimepoint2</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ondsqldate2</span> {<span class="id">A</span>} (<span class="id">f</span> : <span class="id">SQL_DATE</span> -&gt; <span class="id">SQL_DATE</span> -&gt; <span class="id">A</span>) (<span class="id">d1</span> <span class="id">d2</span> : <span class="id">data</span>) : <span class="id">option</span> <span class="id">A</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">fd1</span>), <span class="id">dforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">fd2</span>) =&gt; <span class="id">Some</span> (<span class="id">f</span> <span class="id">fd1</span> <span class="id">fd2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">rondboolsqldate2</span> (<span class="id">f</span>: <span class="id">SQL_DATE</span> -&gt; <span class="id">SQL_DATE</span> -&gt; <span class="id">bool</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="id">lift</span> <span class="id">dbool</span> (<span class="id">ondsqldate2</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">time_binary_op_interp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span>:<span class="id">time_binary_op</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_as</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">tp</span>), <span class="id">dforeign</span> (<span class="id">enhancedtimescale</span> <span class="id">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">Some</span> (<span class="id">denhancedtimepoint</span> (<span class="id">TIME_POINT_as</span> <span class="id">tp</span> <span class="id">ts</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_shift</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">tp</span>), <span class="id">dforeign</span> (<span class="id">enhancedtimeduration</span> <span class="id">td</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">Some</span> (<span class="id">denhancedtimepoint</span> (<span class="id">TIME_POINT_shift</span> <span class="id">tp</span> <span class="id">td</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_ne</span> =&gt; <span class="id">rondbooltimepoint2</span> <span class="id">TIME_POINT_ne</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_lt</span> =&gt; <span class="id">rondbooltimepoint2</span> <span class="id">TIME_POINT_lt</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_le</span> =&gt; <span class="id">rondbooltimepoint2</span> <span class="id">TIME_POINT_le</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_gt</span> =&gt; <span class="id">rondbooltimepoint2</span> <span class="id">TIME_POINT_gt</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_ge</span> =&gt; <span class="id">rondbooltimepoint2</span> <span class="id">TIME_POINT_ge</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_duration_from_scale</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedtimescale</span> <span class="id">ts</span>), (<span class="id">dnat</span> <span class="id">count</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">Some</span> (<span class="id">denhancedtimeduration</span> (<span class="id">TIME_DURATION_from_scale</span> <span class="id">ts</span> <span class="id">count</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_time_duration_between</span> =&gt; <span class="id">lift</span> <span class="id">denhancedtimeduration</span> (<span class="id">ondtimepoint2</span> <span class="id">TIME_DURATION_between</span> <span class="id">d1</span> <span class="id">d2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sql_date_binary_op_interp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span>:<span class="id">sql_date_binary_op</span>) (<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_plus</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">tp</span>), <span class="id">dforeign</span> (<span class="id">enhancedsqldateinterval</span> <span class="id">td</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">Some</span> (<span class="id">denhancedsqldate</span> (<span class="id">SQL_DATE_plus</span> <span class="id">tp</span> <span class="id">td</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_minus</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="kwd">match</span> <span class="id">d1</span>, <span class="id">d2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">dforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">tp</span>), <span class="id">dforeign</span> (<span class="id">enhancedsqldateinterval</span> <span class="id">td</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">Some</span> (<span class="id">denhancedsqldate</span> (<span class="id">SQL_DATE_minus</span> <span class="id">tp</span> <span class="id">td</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>,<span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_ne</span> =&gt; <span class="id">rondboolsqldate2</span> <span class="id">SQL_DATE_ne</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_lt</span> =&gt; <span class="id">rondboolsqldate2</span> <span class="id">SQL_DATE_lt</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_le</span> =&gt; <span class="id">rondboolsqldate2</span> <span class="id">SQL_DATE_le</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_gt</span> =&gt; <span class="id">rondboolsqldate2</span> <span class="id">SQL_DATE_gt</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_ge</span> =&gt; <span class="id">rondboolsqldate2</span> <span class="id">SQL_DATE_ge</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">bop_sql_date_interval_between</span> =&gt; <span class="id">lift</span> <span class="id">denhancedsqldateinterval</span> (<span class="id">ondsqldate2</span> <span class="id">SQL_DATE_INTERVAL_between</span> <span class="id">d1</span> <span class="id">d2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_binary_op_interp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">br</span>:<span class="id">brand_relation_t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span>:<span class="id">enhanced_binary_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_float_op</span> <span class="id">f</span> =&gt; <span class="id">float_binary_op_interp</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_time_op</span> <span class="id">f</span> =&gt; <span class="id">time_binary_op_interp</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_sql_date_op</span> <span class="id">f</span> =&gt; <span class="id">sql_date_binary_op_interp</span> <span class="id">f</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_binary_op</span> : <span class="id">foreign_binary_op</span><br/>
&nbsp;&nbsp;:= { <span class="id">foreign_binary_op_type</span> := <span class="id">enhanced_binary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_binary_op_interp</span> := <span class="id">enhanced_binary_op_interp</span> }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3058')">Next Obligation.</div>
<div class="proofscript" id="proof3058">
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">unfold</span> <span class="id">equiv</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> ({<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}).<br/>
&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;- <span class="id">decide</span> <span class="id">equality</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3059')">Next Obligation.</div>
<div class="proofscript" id="proof3059">
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">float_binary_op_tostring</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">time_binary_op_tostring</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">sql_date_binary_op_tostring</span> <span class="id">s</span>).<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3060')">Next Obligation.</div>
<div class="proofscript" id="proof3060">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rondfloat2</span>, <span class="id">rondboolfloat2</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">d1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">d2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">f0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rondtimepoint2</span>, <span class="id">rondbooltimepoint2</span>, <span class="id">denhancedtimeduration</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">d1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">d2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rondboolsqldate2</span>, <span class="id">ondsqldate2</span>, <span class="id">denhancedsqldate</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">d1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">d2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_foreign_runtime</span> :<br/>
&nbsp;&nbsp;<span class="id">foreign_runtime</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_binary_op</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_java_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">quotel</span>:<span class="id">String.string</span>) (<span class="id">fd</span>:<span class="id">enhanced_data</span>) : <span class="id">java_json</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">fd</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedfloat</span> <span class="id">f</span> =&gt; <span class="id">mk_java_json</span> (<span class="id">FLOAT_tostring</span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedstring</span> <span class="id">s</span> =&gt; <span class="id">mk_java_json</span> (<span class="id">STRING_tostring</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimescale</span> <span class="id">ts</span> =&gt; <span class="id">mk_java_json</span> (<span class="id">time_scale_to_java_string</span> <span class="id">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimeduration</span> <span class="id">td</span> =&gt; <span class="id">mk_java_json</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">time_duration_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">td</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimepoint</span> <span class="id">tp</span> =&gt; <span class="id">mk_java_json</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">time_point_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">tp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedsqldate</span> <span class="id">tp</span> =&gt; <span class="id">mk_java_json</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">sql_date_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">tp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedsqldateinterval</span> <span class="id">tp</span> =&gt; <span class="id">mk_java_json</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">sql_date_interval_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">tp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_java_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">indent</span>:<span class="id">nat</span>) (<span class="id">eol</span>:<span class="id">String.string</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">quotel</span>:<span class="id">String.string</span>) (<span class="id">fu</span>:<span class="id">enhanced_unary_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d</span>:<span class="id">java_json</span>) : <span class="id">java_json</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">fu</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_float_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_to_java_unary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_time_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_to_java_unary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_sql_date_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_to_java_unary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_java_binary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">indent</span>:<span class="id">nat</span>) (<span class="id">eol</span>:<span class="id">String.string</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">quotel</span>:<span class="id">String.string</span>) (<span class="id">fb</span>:<span class="id">enhanced_binary_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d1</span> <span class="id">d2</span>:<span class="id">java_json</span>) : <span class="id">java_json</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">fb</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_float_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_to_java_binary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_time_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_to_java_binary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_sql_date_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_to_java_binary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_foreign_to_java</span> :<br/>
&nbsp;&nbsp;@<span class="id">foreign_to_java</span> <span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_to_java</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_java_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_java_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_java_binary_op</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_javascript_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">quotel</span>:<span class="id">String.string</span>) (<span class="id">fd</span>:<span class="id">enhanced_data</span>) : <span class="id">String.string</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">fd</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedfloat</span> <span class="id">f</span> =&gt; <span class="id">FLOAT_tostring</span> <span class="id">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedstring</span> <span class="id">s</span> =&gt; <span class="id">STRING_tostring</span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimescale</span> <span class="id">ts</span> =&gt; <span class="id">toString</span> <span class="id">ts</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimeduration</span> <span class="id">td</span> =&gt; (@<span class="id">toString</span> <span class="id">_</span> <span class="id">time_duration_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">td</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimepoint</span> <span class="id">tp</span> =&gt; (@<span class="id">toString</span> <span class="id">_</span> <span class="id">time_point_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">tp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedsqldate</span> <span class="id">tp</span> =&gt; (@<span class="id">toString</span> <span class="id">_</span> <span class="id">sql_date_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">tp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedsqldateinterval</span> <span class="id">tp</span> =&gt; (@<span class="id">toString</span> <span class="id">_</span> <span class="id">sql_date_interval_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">tp</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_javascript_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">indent</span>:<span class="id">nat</span>) (<span class="id">eol</span>:<span class="id">String.string</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">quotel</span>:<span class="id">String.string</span>) (<span class="id">fu</span>:<span class="id">enhanced_unary_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d</span>:<span class="id">String.string</span>) : <span class="id">String.string</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">fu</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_float_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_to_javascript_unary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_time_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_to_javascript_unary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_sql_date_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_to_javascript_unary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_javascript_binary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">indent</span>:<span class="id">nat</span>) (<span class="id">eol</span>:<span class="id">String.string</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">quotel</span>:<span class="id">String.string</span>) (<span class="id">fb</span>:<span class="id">enhanced_binary_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d1</span> <span class="id">d2</span>:<span class="id">String.string</span>) : <span class="id">String.string</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">fb</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_float_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_to_javascript_binary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_time_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_to_javascript_binary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_binary_sql_date_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_to_javascript_binary_op</span> <span class="id">indent</span> <span class="id">eol</span> <span class="id">quotel</span> <span class="id">op</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_foreign_to_javascript</span> :<br/>
&nbsp;&nbsp;@<span class="id">foreign_to_javascript</span> <span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_to_javascript</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_javascript_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_javascript_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_javascript_binary_op</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_scala_unary_op</span> (<span class="id">op</span>: <span class="id">enhanced_unary_op</span>) (<span class="id">d</span>: <span class="id">string</span>) : <span class="id">string</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_float_op</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_to_scala_unary_op</span> <span class="id">op</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_time_op</span> <span class="id">op</span> =&gt; "<span class="id">EnhancedModel</span>: <span class="id">Time</span> <span class="id">ops</span> <span class="id">not</span> <span class="id">supported</span> <span class="kwd">for</span> <span class="id">now</span>."<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_sql_date_op</span> <span class="id">op</span> =&gt; "<span class="id">EnhancedModel</span>: <span class="id">SQL</span> <span class="id">date</span> <span class="id">ops</span> <span class="id">not</span> <span class="id">supported</span> <span class="kwd">for</span> <span class="id">now</span>."<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_scala_spark_datatype</span> {<span class="id">ftype</span>: <span class="id">foreign_type</span>} (<span class="id">ft</span>: <span class="id">foreign_type_type</span>) : <span class="id">string</span> :=<br/>
&nbsp;&nbsp;"<span class="id">FloatType</span>".<br/>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_foreign_to_scala</span> {<span class="id">ftype</span>: <span class="id">foreign_type</span>}:<br/>
&nbsp;&nbsp;@<span class="id">foreign_to_scala</span> <span class="id">enhanced_foreign_runtime</span> <span class="id">_</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_to_scala</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_scala_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_scala_spark_datatype</span>.<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_to_JSON</span> : <span class="id">foreign_to_JSON</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_to_JSON</span> <span class="id">enhanced_foreign_data</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3061')">Next Obligation.</div>
<div class="proofscript" id="proof3061">
&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;we&nbsp;assume&nbsp;that&nbsp;JSON&nbsp;supports&nbsp;floating&nbsp;point&nbsp;*)</span>&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">None</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3062')">Next Obligation.</div>
<div class="proofscript" id="proof3062">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fd</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">jenhancedfloat</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">jenhancedstring</span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">jstring</span> (<span class="id">toString</span> <span class="id">t</span>)).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">jstring</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">time_duration_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">t</span>)).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">jstring</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">time_point_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">t</span>)).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">jstring</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">sql_date_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">s</span>)).<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">jstring</span> (@<span class="id">toString</span> <span class="id">_</span> <span class="id">sql_date_interval_foreign_data</span>.(@<span class="id">foreign_data_tostring</span> ) <span class="id">s</span>)).<br/>
Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">enhanced_numeric_type</span> :=<br/>
&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span><br/>
&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id">enhanced_numeric_type_eqdec</span> : <span class="id">EqDec</span> <span class="id">enhanced_numeric_type</span> <span class="id">eq</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3063')">Proof.</div>
<div class="proofscript" id="proof3063">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">unfold</span> <span class="id">equiv</span>, <span class="id">complement</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">enhanced_numeric_type</span>, {<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">enhanced_to_cld_numeric_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">CldMR.cld_numeric_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">typ</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span> =&gt; <span class="id">CldMR.Cld_int</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span> =&gt; <span class="id">CldMR.Cld_float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_reduce_op</span><br/>
&nbsp;&nbsp;:= <span class="id">RedOpCount</span> : <span class="id">enhanced_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">RedOpSum</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">enhanced_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">enhanced_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMax</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">enhanced_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">RedOpArithMean</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">enhanced_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">RedOpStats</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">enhanced_reduce_op</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_numeric_type_prefix</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">string</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">typ</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span> =&gt; ""%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span> =&gt; "<span class="id">F</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_reduce_op_tostring</span> (<span class="id">op</span>:<span class="id">enhanced_reduce_op</span>) : <span class="id">string</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpCount</span> =&gt; "<span class="id">COUNT</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpSum</span> <span class="id">typ</span> =&gt; <span class="id">append</span> (<span class="id">enhanced_numeric_type_prefix</span> <span class="id">typ</span>) "<span class="id">FSUM</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> <span class="id">typ</span>  =&gt; <span class="id">append</span> (<span class="id">enhanced_numeric_type_prefix</span> <span class="id">typ</span>) "<span class="id">FMIN</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMax</span> <span class="id">typ</span> =&gt; <span class="id">append</span> (<span class="id">enhanced_numeric_type_prefix</span> <span class="id">typ</span>) "<span class="id">FMAX</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpArithMean</span> <span class="id">typ</span> =&gt; <span class="id">append</span> (<span class="id">enhanced_numeric_type_prefix</span> <span class="id">typ</span>) "<span class="id">FARITHMEAN</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpStats</span> <span class="id">typ</span> =&gt; <span class="id">append</span> (<span class="id">enhanced_numeric_type_prefix</span> <span class="id">typ</span>) "<span class="id">FSTATS</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_numeric_sum</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">unaryOp</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">typ</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">ASum</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_sum</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_numeric_min</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">unaryOp</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">typ</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">ANumMin</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmin</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_numeric_max</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">unaryOp</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">typ</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">ANumMax</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmax</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_numeric_arith_mean</span> (<span class="id">typ</span>:<span class="id">enhanced_numeric_type</span>) : <span class="id">unaryOp</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">typ</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">AArithMean</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_arithmean</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_reduce_op_interp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">br</span>:<span class="id">brand_relation_t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span>:<span class="id">enhanced_reduce_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">dl</span>:<span class="id">list</span> <span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpCount</span> | <span class="id">RedOpSum</span> <span class="id">_</span> | <span class="id">RedOpMin</span> <span class="id">_</span> | <span class="id">RedOpMax</span> <span class="id">_</span> | <span class="id">RedOpArithMean</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">uop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpCount</span>  =&gt; <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpSum</span> <span class="id">typ</span> =&gt; <span class="id">enhanced_numeric_sum</span> <span class="id">typ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> <span class="id">typ</span> =&gt; <span class="id">enhanced_numeric_min</span> <span class="id">typ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMax</span> <span class="id">typ</span> =&gt; <span class="id">enhanced_numeric_max</span> <span class="id">typ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpArithMean</span> <span class="id">typ</span> =&gt; <span class="id">enhanced_numeric_arith_mean</span> <span class="id">typ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpStats</span> <span class="id">_</span> =&gt; <span class="id">ACount</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fun_of_unaryop</span> <span class="id">br</span> <span class="id">uop</span> (<span class="id">dcoll</span> <span class="id">dl</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpStats</span> <span class="id">typ</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">coll</span> := <span class="id">dcoll</span> <span class="id">dl</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">count</span> := <span class="id">fun_of_unaryop</span> <span class="id">br</span> <span class="id">ACount</span> <span class="id">coll</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">sum</span> := <span class="id">fun_of_unaryop</span> <span class="id">br</span> (<span class="id">enhanced_numeric_sum</span> <span class="id">typ</span>) <span class="id">coll</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">min</span> := <span class="id">fun_of_unaryop</span> <span class="id">br</span> (<span class="id">enhanced_numeric_min</span> <span class="id">typ</span>) <span class="id">coll</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">max</span> := <span class="id">fun_of_unaryop</span> <span class="id">br</span> (<span class="id">enhanced_numeric_max</span> <span class="id">typ</span>) <span class="id">coll</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">v</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">count</span>, <span class="id">sum</span>, <span class="id">min</span>, <span class="id">max</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">Some</span> <span class="id">count</span>, <span class="id">Some</span> <span class="id">sum</span>, <span class="id">Some</span> <span class="id">min</span>, <span class="id">Some</span> <span class="id">max</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">drec</span> (("<span class="id">count</span>"%<span class="id">string</span>, <span class="id">count</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::("<span class="id">max</span>"%<span class="id">string</span>, <span class="id">max</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::("<span class="id">min</span>"%<span class="id">string</span>, <span class="id">min</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::("<span class="id">sum</span>"%<span class="id">string</span>, <span class="id">sum</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::<span class="id">nil</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_reduce_op</span> : <span class="id">foreign_reduce_op</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_reduce_op</span> <span class="id">enhanced_foreign_data</span> <span class="id">enhanced_reduce_op</span> <span class="id">_</span> <span class="id">_</span> <span class="id">enhanced_reduce_op_interp</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3064')">Next Obligation.</div>
<div class="proofscript" id="proof3064">
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">unfold</span> <span class="id">equiv</span>, <span class="id">complement</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>:<span class="id">enhanced_reduce_op</span>, {<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}).<br/>
&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>; <span class="id">decide</span> <span class="id">equality</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3065')">Next Obligation.</div>
<div class="proofscript" id="proof3065">
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">enhanced_reduce_op_tostring</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3066')">Next Obligation.</div>
<div class="proofscript" id="proof3066">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">invcs</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">typ</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">some_lift</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [? <span class="id">eqq</span> ?];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">ondcollfloat</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">typ</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">lifted_min</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">some_lift</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [? <span class="id">eqq</span> ?];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">ondcollfloat</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">typ</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">lifted_max</span> <span class="kwd">in</span> * .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">some_lift</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [? <span class="id">eqq</span> ?];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">ondcollfloat</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">typ</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">lifted_max</span> <span class="kwd">in</span> * .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">some_lift</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [? <span class="id">eqq</span> ?];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">ondcollfloat</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">typ</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">dsum</span> <span class="id">dl</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">lifted_min</span>, <span class="id">lifted_max</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id">lift</span> <span class="id">bnummin</span> (<span class="id">lifted_zbag</span> <span class="id">dl</span>))); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id">lift</span> <span class="id">bnummax</span> (<span class="id">lifted_zbag</span> <span class="id">dl</span>))); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">ondcollfloat</span>, <span class="id">lift</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ( <span class="kwd">match</span> <span class="id">rmap</span> (<span class="kwd">fun</span> <span class="id">z</span> : <span class="id">data</span> =&gt; <span class="id">ondfloat</span> <span class="id">id</span> <span class="id">z</span>) <span class="id">dl</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> <span class="id">a</span>' =&gt; <span class="id">Some</span> (<span class="id">FLOAT_sum</span> <span class="id">a</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ( <span class="kwd">match</span> <span class="id">rmap</span> (<span class="kwd">fun</span> <span class="id">z</span> : <span class="id">data</span> =&gt; <span class="id">ondfloat</span> <span class="id">id</span> <span class="id">z</span>) <span class="id">dl</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> <span class="id">a</span>' =&gt; <span class="id">Some</span> (<span class="id">FLOAT_listmin</span> <span class="id">a</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ( <span class="kwd">match</span> <span class="id">rmap</span> (<span class="kwd">fun</span> <span class="id">z</span> : <span class="id">data</span> =&gt; <span class="id">ondfloat</span> <span class="id">id</span> <span class="id">z</span>) <span class="id">dl</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> <span class="id">a</span>' =&gt; <span class="id">Some</span> (<span class="id">FLOAT_listmax</span> <span class="id">a</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_reduce_op</span> (<span class="id">uop</span>:<span class="id">unaryOp</span>) : <span class="id">option</span> <span class="id">NNRCMR.reduce_op</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">uop</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ACount</span> =&gt; <span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> <span class="id">RedOpCount</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ASum</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpSum</span> <span class="id">enhanced_numeric_int</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_sum</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpSum</span> <span class="id">enhanced_numeric_float</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ANumMin</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMin</span> <span class="id">enhanced_numeric_int</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmin</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMin</span> <span class="id">enhanced_numeric_float</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ANumMax</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMax</span> <span class="id">enhanced_numeric_int</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmax</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMax</span> <span class="id">enhanced_numeric_float</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AArithMean</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpArithMean</span> <span class="id">enhanced_numeric_int</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_arithmean</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpArithMean</span> <span class="id">enhanced_numeric_float</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_of_reduce_op</span> (<span class="id">rop</span>:<span class="id">NNRCMR.reduce_op</span>) : <span class="id">option</span> <span class="id">unaryOp</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">rop</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> <span class="id">RedOpCount</span> =&gt; <span class="id">Some</span> <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpSum</span> <span class="id">enhanced_numeric_int</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">ASum</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpSum</span> <span class="id">enhanced_numeric_float</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_sum</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMin</span> <span class="id">enhanced_numeric_int</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">ANumMin</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMin</span> <span class="id">enhanced_numeric_float</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmin</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMax</span> <span class="id">enhanced_numeric_int</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">ANumMax</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpMax</span> <span class="id">enhanced_numeric_float</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmax</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpArithMean</span> <span class="id">enhanced_numeric_int</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">AArithMean</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpArithMean</span> <span class="id">enhanced_numeric_float</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_arithmean</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">NNRCMR.RedOpForeign</span> (<span class="id">RedOpStats</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">None</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_to_reduce_op</span> : <span class="id">foreign_to_reduce_op</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_to_reduce_op</span> <span class="id">enhanced_foreign_runtime</span> <span class="id">enhanced_foreign_reduce_op</span> <span class="id">enhanced_to_reduce_op</span> <span class="id">_</span> <span class="id">enhanced_of_reduce_op</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3067')">Next Obligation.</div>
<div class="proofscript" id="proof3067">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">NNRCMR.reduce_op_eval</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">uop</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fu</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">invcs</span> <span class="id">H1</span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3068')">Next Obligation.</div>
<div class="proofscript" id="proof3068">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">NNRCMR.reduce_op_eval</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">rop</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">invcs</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typ</span>; <span class="id">invcs</span> <span class="id">H0</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typ</span>; <span class="id">invcs</span> <span class="id">H0</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typ</span>; <span class="id">invcs</span> <span class="id">H0</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typ</span>; <span class="id">invcs</span> <span class="id">H0</span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string_scope</span>.<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_spark_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rop</span>:<span class="id">enhanced_reduce_op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">scala_endl</span> <span class="id">quotel</span>:<span class="id">string</span>) : <span class="id">string</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">rop</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpCount</span> =&gt; ".<span class="id">count</span>().<span class="id">toString</span>()"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpSum</span> <span class="id">enhanced_numeric_int</span> =&gt; ".<span class="id">aggregate</span>(0)(<span class="id">_</span> + <span class="id">_.toInt</span>, <span class="id">_</span> + <span class="id">_</span>).<span class="id">toString</span>()"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpSum</span> <span class="id">enhanced_numeric_float</span> =&gt; ".<span class="id">aggregate</span>(0.0)(<span class="id">_</span> + <span class="id">_.toDouble</span>, <span class="id">_</span> + <span class="id">_</span>).<span class="id">toString</span>()"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> <span class="id">enhanced_numeric_int</span> =&gt; ".<span class="id">aggregate</span>(<span class="id">Int.MaxValue</span>)(((<span class="id">x</span>, <span class="id">y</span>) =&gt; <span class="id">Math.min</span>(<span class="id">x</span>, <span class="id">y.toInt</span>)), <span class="id">Math.min</span>).<span class="id">toString</span>()"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> <span class="id">enhanced_numeric_float</span> =&gt; ".<span class="id">aggregate</span>(<span class="id">Double.MaxValue</span>)(((<span class="id">x</span>, <span class="id">y</span>) =&gt; <span class="id">Math.min</span>(<span class="id">x</span>, <span class="id">y.toDouble</span>)), <span class="id">Math.min</span>).<span class="id">toString</span>()"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMax</span> <span class="id">enhanced_numeric_int</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".<span class="id">aggregate</span>(<span class="id">Int.MinValue</span>)(((<span class="id">x</span>, <span class="id">y</span>) =&gt; <span class="id">Math.max</span>(<span class="id">x</span>, <span class="id">y.toInt</span>)), <span class="id">Math.max</span>).<span class="id">toString</span>()"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMax</span> <span class="id">enhanced_numeric_float</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".<span class="id">aggregate</span>(<span class="id">Double.MinValue</span>)(((<span class="id">x</span>, <span class="id">y</span>) =&gt; <span class="id">Math.max</span>(<span class="id">x</span>, <span class="id">y.toDouble</span>)), <span class="id">Math.max</span>).<span class="id">toString</span>()"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpStats</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".<span class="id">aggregate</span>("""")(<span class="id">statsReduce</span>, <span class="id">statsRereduce</span>).<span class="id">toString</span>()" ++ <span class="id">scala_endl</span> ++<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"  <span class="id">sc.parallelize</span>(<span class="id">Array</span>(<span class="id">res</span>))"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpArithMean</span> <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".<span class="id">arithmean</span> /* <span class="id">ArithMean</span> <span class="id">must</span> <span class="id">be</span> <span class="id">removed</span> <span class="id">before</span> <span class="id">code</span> <span class="id">generation</span> */"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">NNRCRuntime</span> <span class="id">NNRCMRRuntime</span> <span class="id">NNRCMRRewrite</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">min_max_to_stats</span> <span class="id">avoid</span> (<span class="id">mr</span>: <span class="id">mr</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">mr</span>.(<span class="id">mr_reduce</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOp</span> (<span class="id">RedOpForeign</span> <span class="id">op</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> <span class="id">typ</span> | <span class="id">RedOpMax</span> <span class="id">typ</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">stats_field</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> <span class="id">_</span> =&gt; "<span class="id">min</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMax</span> <span class="id">_</span> =&gt; "<span class="id">max</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; "<span class="id">ERROR</span>"%<span class="id">string</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">tmp</span>, <span class="id">avoid</span>) := <span class="id">fresh_mr_var</span> "<span class="id">stats</span>$" <span class="id">avoid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">mr1</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mkMR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mr</span>.(<span class="id">mr_input</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tmp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mr</span>.(<span class="id">mr_map</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RedOp</span> (<span class="id">RedOpForeign</span> (<span class="id">RedOpStats</span> <span class="id">typ</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span> := "<span class="id">stats</span>"%<span class="id">string</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">mr2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mkMR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tmp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mr</span>.(<span class="id">mr_output</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MapScalar</span> (<span class="id">x</span>, <span class="id">NNRCUnop</span> <span class="id">AColl</span> (<span class="id">NNRCUnop</span> (<span class="id">ADot</span> <span class="id">stats_field</span>) (<span class="id">NNRCVar</span> <span class="id">x</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">RedSingleton</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">mr1</span>::<span class="id">mr2</span>::<span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">arithmean_to_stats</span> <span class="id">avoid</span> (<span class="id">mr</span>: <span class="id">mr</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">mr</span>.(<span class="id">mr_reduce</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOp</span> (<span class="id">RedOpForeign</span> <span class="id">op</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpArithMean</span> <span class="id">typ</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">tmp</span>, <span class="id">avoid</span>) := <span class="id">fresh_mr_var</span> "<span class="id">stats</span>$" <span class="id">avoid</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">mr1</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mkMR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mr</span>.(<span class="id">mr_input</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tmp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mr</span>.(<span class="id">mr_map</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RedOp</span> (<span class="id">RedOpForeign</span> (<span class="id">RedOpStats</span> <span class="id">typ</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">map</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">typ</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_int</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">zero</span> := <span class="id">NNRCConst</span> (<span class="id">dnat</span> 0) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span> := "<span class="id">stats</span>"%<span class="id">string</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">MapScalar</span> (<span class="id">x</span>, <span class="id">NNRCUnop</span> <span class="id">AColl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCIf</span> (<span class="id">NNRCBinop</span> <span class="id">AEq</span> (<span class="id">NNRCUnop</span> (<span class="id">ADot</span> "<span class="id">count</span>"%<span class="id">string</span>) (<span class="id">NNRCVar</span> <span class="id">x</span>)) <span class="id">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">zero</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCBinop</span> (<span class="id">ABArith</span> <span class="id">ArithDivide</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCUnop</span> (<span class="id">ADot</span> "<span class="id">sum</span>"%<span class="id">string</span>) (<span class="id">NNRCVar</span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCUnop</span> (<span class="id">ADot</span> "<span class="id">count</span>"%<span class="id">string</span>) (<span class="id">NNRCVar</span> <span class="id">x</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_numeric_float</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">zero</span> := <span class="id">NNRCConst</span> (<span class="id">dnat</span> 0) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">zerof</span> := <span class="id">NNRCConst</span> (<span class="id">denhancedfloat</span> <span class="id">FLOAT_CONST0</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span> := "<span class="id">stats</span>"%<span class="id">string</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">MapScalar</span> (<span class="id">x</span>, <span class="id">NNRCUnop</span> <span class="id">AColl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCIf</span> (<span class="id">NNRCBinop</span> <span class="id">AEq</span> (<span class="id">NNRCUnop</span> (<span class="id">ADot</span> "<span class="id">count</span>"%<span class="id">string</span>) (<span class="id">NNRCVar</span> <span class="id">x</span>)) <span class="id">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">zerof</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCBinop</span> (<span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_div</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCUnop</span> (<span class="id">ADot</span> "<span class="id">sum</span>"%<span class="id">string</span>) (<span class="id">NNRCVar</span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCUnop</span> (<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_of_int</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NNRCUnop</span> (<span class="id">ADot</span> "<span class="id">count</span>"%<span class="id">string</span>) (<span class="id">NNRCVar</span> <span class="id">x</span>))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">mr2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mkMR</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tmp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mr</span>.(<span class="id">mr_output</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">map</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">RedSingleton</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Some</span> (<span class="id">mr1</span>::<span class="id">mr2</span>::<span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">min_max_free_reduce</span> (<span class="id">src</span>:<span class="id">reduce_fun</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">src</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOp</span> (<span class="id">RedOpForeign</span> (<span class="id">RedOpMin</span> <span class="id">_</span>|<span class="id">RedOpMax</span> <span class="id">_</span>)) =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">arithmean_free_reduce</span> (<span class="id">src</span>:<span class="id">reduce_fun</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">src</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOp</span> (<span class="id">RedOpForeign</span> (<span class="id">RedOpArithMean</span> <span class="id">_</span>)) =&gt; <span class="id">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">min_max_free_mr</span> (<span class="id">src</span>:<span class="id">mr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">min_max_free_reduce</span> <span class="id">src</span>.(<span class="id">mr_reduce</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">arithmean_free_mr</span> (<span class="id">src</span>:<span class="id">mr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">arithmean_free_reduce</span> <span class="id">src</span>.(<span class="id">mr_reduce</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">min_max_free_mr_chain</span> (<span class="id">src</span>:<span class="id">list</span> <span class="id">mr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">Forall</span> <span class="id">min_max_free_mr</span> <span class="id">src</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">min_max_free_nnrcmr</span> (<span class="id">src</span>:<span class="id">nnrcmr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">min_max_free_mr_chain</span> <span class="id">src</span>.(<span class="id">mr_chain</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">arithmean_free_mr_chain</span> (<span class="id">src</span>:<span class="id">list</span> <span class="id">mr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">Forall</span> <span class="id">arithmean_free_mr</span> <span class="id">src</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">arithmean_free_nnrcmr</span> (<span class="id">src</span>:<span class="id">nnrcmr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">arithmean_free_mr_chain</span> <span class="id">src</span>.(<span class="id">mr_chain</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">to_spark_nnrcmr</span> (<span class="id">l</span>: <span class="id">nnrcmr</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">avoid</span> := <span class="id">get_nnrcmr_vars</span> <span class="id">l</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">l</span> := <span class="id">apply_rewrite</span> (<span class="id">arithmean_to_stats</span> <span class="id">avoid</span>) <span class="id">l</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">l</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">to_spark_nnrcmr_prepared</span> (<span class="id">src</span>:<span class="id">nnrcmr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">arithmean_free_nnrcmr</span> <span class="id">src</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_to_spark</span> : <span class="id">foreign_to_spark</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_to_spark</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_to_spark_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">to_spark_nnrcmr</span>.<br/>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_foreign_cloudant</span> : <span class="id">foreign_cloudant</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_cloudant</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_sum</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmin</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmax</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_to_cloudant_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rop</span>:<span class="id">enhanced_reduce_op</span>) : <span class="id">CldMR.cld_reduce_op</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">rop</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpCount</span> =&gt; <span class="id">CldMR.CldRedOpCount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpSum</span> <span class="id">typ</span> =&gt; <span class="id">CldMR.CldRedOpSum</span> (<span class="id">enhanced_to_cld_numeric_type</span> <span class="id">typ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpStats</span> <span class="id">typ</span> =&gt; <span class="id">CldMR.CldRedOpStats</span> (<span class="id">enhanced_to_cld_numeric_type</span> <span class="id">typ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMin</span> <span class="id">_</span> =&gt; <span class="id">CldMR.CldRedOpStats</span> <span class="id">CldMR.Cld_int</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpMax</span> <span class="id">_</span> =&gt; <span class="id">CldMR.CldRedOpStats</span> <span class="id">CldMR.Cld_int</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">RedOpArithMean</span> <span class="id">_</span> =&gt; <span class="id">CldMR.CldRedOpStats</span> <span class="id">CldMR.Cld_int</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">to_cloudant_nnrcmr</span> (<span class="id">l</span>: <span class="id">nnrcmr</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">avoid</span> := <span class="id">get_nnrcmr_vars</span> <span class="id">l</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">l</span> := <span class="id">apply_rewrite</span> (<span class="id">min_max_to_stats</span> <span class="id">avoid</span>) <span class="id">l</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">l</span> := <span class="id">apply_rewrite</span> (<span class="id">arithmean_to_stats</span> <span class="id">avoid</span>) <span class="id">l</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">l</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">to_cloudant_nnrcmr_prepared</span> (<span class="id">src</span>:<span class="id">nnrcmr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">min_max_free_nnrcmr</span> <span class="id">src</span> /\ <span class="id">arithmean_free_nnrcmr</span> <span class="id">src</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_to_cloudant</span> : <span class="id">foreign_to_cloudant</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">foreign_to_cloudant_reduce_op</span> := <span class="id">enhanced_to_cloudant_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_to_cloudant_prepare_nnrcmr</span> := <span class="id">to_cloudant_nnrcmr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_to_cloudant_nnrcmr_prepared</span> := <span class="id">to_cloudant_nnrcmr_prepared</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3069')">Next Obligation.</div>
<div class="proofscript" id="proof3069">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">to_cloudant_nnrcmr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">to_cloudant_nnrcmr_prepared</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">min_max_free_nnrcmr</span>, <span class="id">min_max_free_mr_chain</span>, <span class="id">min_max_free_mr</span>, <span class="id">min_max_free_reduce</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id">apply_rewrite</span>, <span class="id">min_max_to_stats</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">mr_chain_apply_rewrite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Forall_forall</span>; <span class="tactic">intros</span> ? <span class="id">inn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">in_flat_map</span> <span class="kwd">in</span> <span class="id">inn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">inn</span> <span class="kwd">as</span> [? [<span class="id">inn1</span> <span class="id">inn2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mr_reduce</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">min_max_free_mr</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mr_reduce</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">invcs</span> <span class="id">inn2</span>; <span class="id">invcs</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> * .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">in_flat_map</span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">inn1</span> <span class="kwd">as</span> [? [<span class="id">inn1</span> <span class="id">inn3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mr_reduce</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inn3</span>; <span class="tactic">intuition</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">destruct</span> <span class="id">f0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inn3</span>; <span class="tactic">intuition</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> <span class="id">solve</span> [<span class="id">invcs</span> <span class="id">H</span> | <span class="id">invcs</span> <span class="id">H1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">in_flat_map</span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">inn1</span> <span class="kwd">as</span> [? [<span class="id">inn1</span> <span class="id">inn3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mr_reduce</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inn3</span>; <span class="tactic">intuition</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">destruct</span> <span class="id">f0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inn3</span>; <span class="tactic">intuition</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> <span class="id">solve</span> [<span class="id">invcs</span> <span class="id">H</span> | <span class="id">invcs</span> <span class="id">H1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H0</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id">apply_rewrite</span>, <span class="id">mr_chain_apply_rewrite</span>, <span class="id">arithmean_free_nnrcmr</span>, <span class="id">arithmean_free_mr_chain</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Forall_forall</span>; <span class="tactic">intros</span> ? <span class="id">inn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">in_flat_map</span> <span class="kwd">in</span> <span class="id">inn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">inn</span> <span class="kwd">as</span> [? [<span class="id">inn1</span> <span class="id">inn2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mr_reduce</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">arithmean_free_mr</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">mr_reduce</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">invcs</span> <span class="id">inn2</span>; <span class="id">invcs</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> * .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H0</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span> : <span class="kwd">Set</span>.<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span> =&gt; "<span class="id">Util.nra_logger_token_type</span>".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nraenv_startPass</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">String.string</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nraenv_startPass</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">name</span> <span class="id">input</span> -&gt; <span class="id">Logger.nra_log_startPass</span> (<span class="id">Util.string_of_char_list</span> <span class="id">name</span>) <span class="id">input</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nraenv_step</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span> -&gt; <span class="id">String.string</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nraenv_step</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">token</span> <span class="id">name</span> <span class="id">input</span> <span class="id">output</span> -&gt; <span class="id">Logger.nra_log_step</span> <span class="id">token</span> (<span class="id">Util.string_of_char_list</span> <span class="id">name</span>) <span class="id">input</span> <span class="id">output</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nraenv_endPass</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nraenv_endPass</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">token</span> <span class="id">output</span> -&gt; <span class="id">Logger.nra_log_endPass</span> <span class="id">token</span> <span class="id">output</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id">foreign_nraenv_optimizer_logger</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">optimizer_logger</span> <span class="id">string</span> <span class="id">nraenv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">optimizer_logger_token_type</span> := <span class="id">OPTIMIZER_LOGGER_nraenv_token_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logStartPass</span> := <span class="id">OPTIMIZER_LOGGER_nraenv_startPass</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logStep</span> :=  <span class="id">OPTIMIZER_LOGGER_nraenv_step</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logEndPass</span> :=  <span class="id">OPTIMIZER_LOGGER_nraenv_endPass</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} .<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span> : <span class="kwd">Set</span>.<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span> =&gt; "<span class="id">Util.nrc_logger_token_type</span>".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nnrc_startPass</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">String.string</span> -&gt; <span class="id">nnrc</span> -&gt; <span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nnrc_startPass</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">name</span> <span class="id">input</span> -&gt; <span class="id">Logger.nrc_log_startPass</span> (<span class="id">Util.string_of_char_list</span> <span class="id">name</span>) <span class="id">input</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nnrc_step</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span> -&gt; <span class="id">String.string</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc</span> -&gt; <span class="id">nnrc</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nnrc_step</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">token</span> <span class="id">name</span> <span class="id">input</span> <span class="id">output</span> -&gt; <span class="id">Logger.nrc_log_step</span> <span class="id">token</span> (<span class="id">Util.string_of_char_list</span> <span class="id">name</span>) <span class="id">input</span> <span class="id">output</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_nnrc_endPass</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span> -&gt; <span class="id">nnrc</span> -&gt; <span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_nnrc_endPass</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">token</span> <span class="id">output</span> -&gt; <span class="id">Logger.nrc_log_endPass</span> <span class="id">token</span> <span class="id">output</span>)".<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id">foreign_nnrc_optimizer_logger</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">optimizer_logger</span> <span class="id">string</span> <span class="id">nnrc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">optimizer_logger_token_type</span> := <span class="id">OPTIMIZER_LOGGER_nnrc_token_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logStartPass</span> := <span class="id">OPTIMIZER_LOGGER_nnrc_startPass</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logStep</span> :=  <span class="id">OPTIMIZER_LOGGER_nnrc_step</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logEndPass</span> :=  <span class="id">OPTIMIZER_LOGGER_nnrc_endPass</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} .<br/>
<br/>
<div class="doc">Foreign typing, used to build the basic_model </div>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_type_join</span> (<span class="id">t1</span> <span class="id">t2</span>:<span class="id">enhanced_type</span>)<br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">t1</span>, <span class="id">t2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedBottom</span>, <span class="id">_</span> =&gt; <span class="id">t2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">enhancedBottom</span> =&gt; <span class="id">t1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedFloat</span>, <span class="id">enhancedFloat</span> =&gt; <span class="id">enhancedFloat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedString</span>, <span class="id">enhancedString</span> =&gt; <span class="id">enhancedString</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedTimeScale</span>, <span class="id">enhancedTimeScale</span> =&gt; <span class="id">enhancedTimeScale</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedTimeDuration</span>, <span class="id">enhancedTimeDuration</span> =&gt; <span class="id">enhancedTimeDuration</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedTimePoint</span>, <span class="id">enhancedTimePoint</span> =&gt; <span class="id">enhancedTimePoint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedSqlDate</span>, <span class="id">enhancedSqlDate</span> =&gt; <span class="id">enhancedSqlDate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedSqlDateInterval</span>, <span class="id">enhancedSqlDateInterval</span> =&gt; <span class="id">enhancedSqlDateInterval</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">enhancedTop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_type_meet</span> (<span class="id">t1</span> <span class="id">t2</span>:<span class="id">enhanced_type</span>)<br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">t1</span>, <span class="id">t2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedTop</span>, <span class="id">_</span> =&gt; <span class="id">t2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">enhancedTop</span> =&gt; <span class="id">t1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedFloat</span>, <span class="id">enhancedFloat</span> =&gt; <span class="id">enhancedFloat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedString</span>, <span class="id">enhancedString</span> =&gt; <span class="id">enhancedString</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedTimeScale</span>, <span class="id">enhancedTimeScale</span> =&gt; <span class="id">enhancedTimeScale</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedTimeDuration</span>, <span class="id">enhancedTimeDuration</span> =&gt; <span class="id">enhancedTimeDuration</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedTimePoint</span>, <span class="id">enhancedTimePoint</span> =&gt; <span class="id">enhancedTimePoint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedSqlDate</span>, <span class="id">enhancedSqlDate</span> =&gt; <span class="id">enhancedSqlDate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedSqlDateInterval</span>, <span class="id">enhancedSqlDateInterval</span> =&gt; <span class="id">enhancedSqlDateInterval</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id">enhancedBottom</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_subtype</span> : <span class="id">enhanced_type</span> -&gt; <span class="id">enhanced_type</span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id">enhanced_subtype_top</span> <span class="id">t</span> : <span class="id">enhanced_subtype</span> <span class="id">t</span> <span class="id">enhancedTop</span><br/>
| <span class="id">enhanced_subtype_bottom</span> <span class="id">t</span> : <span class="id">enhanced_subtype</span> <span class="id">enhancedBottom</span> <span class="id">t</span><br/>
| <span class="id">enhanced_subtype_refl</span> <span class="id">t</span> : <span class="id">enhanced_subtype</span> <span class="id">t</span> <span class="id">t</span>.<br/>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_subtype_pre</span> : <span class="id">PreOrder</span> <span class="id">enhanced_subtype</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3070')">Proof.</div>
<div class="proofscript" id="proof3070">
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">try</span> <span class="id">constructor</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_subtype_post</span> : <span class="id">PartialOrder</span> <span class="id">eq</span> <span class="id">enhanced_subtype</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3071')">Proof.</div>
<div class="proofscript" id="proof3071">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_type_lattice</span> : <span class="id">Lattice</span> <span class="id">enhanced_type</span> <span class="id">eq</span><br/>
&nbsp;&nbsp;:= {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">join</span> := <span class="id">enhanced_type_join</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">meet</span> := <span class="id">enhanced_type_meet</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3072')">Proof.</div>
<div class="proofscript" id="proof3072">
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">destruct</span> <span class="id">t3</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">destruct</span> <span class="id">t3</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">t1</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_type_olattice</span> : <span class="id">OLattice</span> <span class="id">eq</span> <span class="id">enhanced_subtype</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3073')">Proof.</div>
<div class="proofscript" id="proof3073">
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">inversion</span> 1; <span class="tactic">simpl</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">inversion</span> 1; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_type</span> : <span class="id">foreign_type</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_type</span> <span class="id">enhanced_type</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3074')">Next Obligation.</div>
<div class="proofscript" id="proof3074">
&nbsp;&nbsp;<span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">equiv</span>, <span class="id">complement</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> ({<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}).<br/>
&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3075')">Next Obligation.</div>
<div class="proofscript" id="proof3075">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">try</span> <span class="id">solve</span> [<span class="id">left</span>; <span class="id">constructor</span> | <span class="id">right</span>; <span class="tactic">inversion</span> 1].<br/>
Defined.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_type_to_JSON</span> : <span class="id">foreign_type_to_JSON</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_type_to_JSON</span> <span class="id">enhanced_foreign_type</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3076')">Next Obligation.</div>
<div class="proofscript" id="proof3076">
&nbsp;&nbsp;<span class="tactic">exact</span> (<span class="id">string_to_enhanced_type</span> <span class="id">s</span>).<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3077')">Next Obligation.</div>
<div class="proofscript" id="proof3077">
&nbsp;&nbsp;<span class="tactic">exact</span> (<span class="id">enhanced_type_to_string</span> <span class="id">fd</span>).<br/>
Defined.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_has_type</span> : <span class="id">enhanced_data</span> -&gt; <span class="id">enhanced_type</span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id">enhanced_has_type_top</span> <span class="id">fd</span> : <span class="id">enhanced_has_type</span> <span class="id">fd</span> <span class="id">enhancedTop</span><br/>
| <span class="id">enhanced_has_type_float</span> (<span class="id">f</span>:<span class="id">FLOAT</span>) : <span class="id">enhanced_has_type</span> (<span class="id">enhancedfloat</span> <span class="id">f</span>) <span class="id">enhancedFloat</span><br/>
| <span class="id">enhanced_has_type_string</span> (<span class="id">s</span>:<span class="id">STRING</span>) : <span class="id">enhanced_has_type</span> (<span class="id">enhancedstring</span> <span class="id">s</span>) <span class="id">enhancedString</span><br/>
| <span class="id">enhanced_has_type_timescale</span> (<span class="id">ts</span>:<span class="id">time_scale</span>) : <span class="id">enhanced_has_type</span> (<span class="id">enhancedtimescale</span> <span class="id">ts</span>) <span class="id">enhancedTimeScale</span><br/>
| <span class="id">enhanced_has_type_timepoint</span> (<span class="id">tp</span>:<span class="id">TIME_POINT</span>) : <span class="id">enhanced_has_type</span> (<span class="id">enhancedtimepoint</span> <span class="id">tp</span>) <span class="id">enhancedTimePoint</span><br/>
| <span class="id">enhanced_has_type_timeduration</span> (<span class="id">td</span>:<span class="id">TIME_DURATION</span>) : <span class="id">enhanced_has_type</span> (<span class="id">enhancedtimeduration</span> <span class="id">td</span>) <span class="id">enhancedTimeDuration</span><br/>
| <span class="id">enhanced_has_type_sqldate</span> (<span class="id">tp</span>:<span class="id">SQL_DATE</span>) : <span class="id">enhanced_has_type</span> (<span class="id">enhancedsqldate</span> <span class="id">tp</span>) <span class="id">enhancedSqlDate</span><br/>
| <span class="id">enhanced_has_type_sqldateinterval</span> (<span class="id">tp</span>:<span class="id">SQL_DATE_INTERVAL</span>) : <span class="id">enhanced_has_type</span> (<span class="id">enhancedsqldateinterval</span> <span class="id">tp</span>) <span class="id">enhancedSqlDateInterval</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_infer_type</span> (<span class="id">d</span>:<span class="id">enhanced_data</span>) : <span class="id">option</span> <span class="id">enhanced_type</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">d</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedfloat</span> <span class="id">_</span> =&gt; <span class="id">Some</span> <span class="id">enhancedFloat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedstring</span> <span class="id">_</span> =&gt; <span class="id">Some</span> <span class="id">enhancedString</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimescale</span> <span class="id">_</span> =&gt; <span class="id">Some</span> <span class="id">enhancedTimeScale</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimeduration</span> <span class="id">_</span> =&gt; <span class="id">Some</span> <span class="id">enhancedTimeDuration</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedtimepoint</span> <span class="id">_</span> =&gt; <span class="id">Some</span> <span class="id">enhancedTimePoint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedsqldate</span> <span class="id">_</span> =&gt; <span class="id">Some</span> <span class="id">enhancedSqlDate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhancedsqldateinterval</span> <span class="id">_</span> =&gt; <span class="id">Some</span> <span class="id">enhancedSqlDateInterval</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_data_typing</span> :<br/>
&nbsp;&nbsp;@<span class="id">foreign_data_typing</span> <span class="id">enhanced_foreign_data</span> <span class="id">enhanced_foreign_type</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_data_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_has_type</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_infer_type</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3078')">Next Obligation.</div>
<div class="proofscript" id="proof3078">
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3079')">Next Obligation.</div>
<div class="proofscript" id="proof3079">
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">trivial</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3080')">Next Obligation.</div>
<div class="proofscript" id="proof3080">
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="id">constructor</span>; <span class="tactic">congruence</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3081')">Next Obligation.</div>
<div class="proofscript" id="proof3081">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span>; <span class="id">eexists</span>; <span class="tactic">reflexivity</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3082')">Next Obligation.</div>
<div class="proofscript" id="proof3082">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">invcs</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof3083')">Next Obligation.</div>
<div class="proofscript" id="proof3083">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">d</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>, <span class="id">H0</span><br/>
&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span>; <span class="id">invcs</span> <span class="id">H0</span>; <span class="id">constructor</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">dnnrc_for_log</span> {<span class="id">br</span>:<span class="id">brand_relation</span>}<br/>
&nbsp;&nbsp;:= (@<span class="id">dnnrc</span> <span class="id">enhanced_foreign_runtime</span> (<span class="id">type_annotation</span> <span class="id">unit</span>) <span class="id">dataframe</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span> : <span class="kwd">Set</span>.<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span> =&gt; "<span class="id">Util.dnrc_logger_token_type</span>".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_startPass</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">br</span>:<span class="id">brand_relation</span>}, <span class="id">String.string</span> -&gt; <span class="id">dnnrc_for_log</span> -&gt; <span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_startPass</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">br</span> <span class="id">name</span> <span class="id">input</span> -&gt; <span class="id">Logger.dnrc_log_startPass</span> (<span class="id">Util.string_of_char_list</span> <span class="id">name</span>) <span class="id">input</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_step</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  {<span class="id">br</span>:<span class="id">brand_relation</span>}, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span> -&gt; <span class="id">String.string</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dnnrc_for_log</span> -&gt; <span class="id">dnnrc_for_log</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_step</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">br</span> <span class="id">token</span> <span class="id">name</span> <span class="id">input</span> <span class="id">output</span> -&gt; <span class="id">Logger.dnrc_log_step</span> <span class="id">token</span> (<span class="id">Util.string_of_char_list</span> <span class="id">name</span>) <span class="id">input</span> <span class="id">output</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Axiom</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_endPass</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">br</span>:<span class="id">brand_relation</span>}, <span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span> -&gt; <span class="id">dnnrc_for_log</span> -&gt; <span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">Extract</span> <span class="id">Inlined</span> <span class="id">Constant</span> <span class="id">OPTIMIZER_LOGGER_dnnrc_endPass</span> =&gt;<br/>
&nbsp;&nbsp;"(<span class="kwd">fun</span> <span class="id">br</span> <span class="id">token</span> <span class="id">output</span> -&gt; <span class="id">Logger.dnrc_log_endPass</span> <span class="id">token</span> <span class="id">output</span>)".<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id">foreign_dnnrc_optimizer_logger</span>  {<span class="id">br</span>:<span class="id">brand_relation</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">optimizer_logger</span> <span class="id">string</span> <span class="id">dnnrc_for_log</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">optimizer_logger_token_type</span> := <span class="id">OPTIMIZER_LOGGER_dnnrc_token_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logStartPass</span> := <span class="id">OPTIMIZER_LOGGER_dnnrc_startPass</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logStep</span> :=  <span class="id">OPTIMIZER_LOGGER_dnnrc_step</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">logEndPass</span> :=  <span class="id">OPTIMIZER_LOGGER_dnnrc_endPass</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} .<br/>
<br/>
<span class="kwd">Module</span> <span class="id">EnhancedRuntime</span> &lt;: <span class="id">CompilerRuntime</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_type</span> : <span class="id">foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_type</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_runtime</span> : <span class="id">foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_runtime</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_to_java</span> : <span class="id">foreign_to_java</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_java</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_to_javascript</span> : <span class="id">foreign_to_javascript</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_javascript</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_to_scala</span> : <span class="id">foreign_to_scala</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_scala</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_to_JSON</span> : <span class="id">foreign_to_JSON</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_JSON</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_type_to_JSON</span> : <span class="id">foreign_type_to_JSON</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_type_to_JSON</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_reduce_op</span> : <span class="id">foreign_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_reduce_op</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_to_reduce_op</span> : <span class="id">foreign_to_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_reduce_op</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_to_spark</span> : <span class="id">foreign_to_spark</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_spark</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_cloudant</span> : <span class="id">foreign_cloudant</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_cloudant</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_to_cloudant</span> : <span class="id">foreign_to_cloudant</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_cloudant</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_nraenv_optimizer_logger</span> : <span class="id">optimizer_logger</span> <span class="id">string</span> <span class="id">nraenv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">foreign_nraenv_optimizer_logger</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_nnrc_optimizer_logger</span> : <span class="id">optimizer_logger</span> <span class="id">string</span> <span class="id">nnrc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">foreign_nnrc_optimizer_logger</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_dnnrc_optimizer_logger</span> {<span class="id">br</span>:<span class="id">brand_relation</span>}: <span class="id">optimizer_logger</span> <span class="id">string</span> (@<span class="id">dnnrc</span> <span class="id">_</span> (<span class="id">type_annotation</span> <span class="id">unit</span>) <span class="id">dataframe</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">foreign_dnnrc_optimizer_logger</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_data_typing</span> : <span class="id">foreign_data_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_data_typing</span>.<br/>
<span class="kwd">End</span> <span class="id">EnhancedRuntime</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">Float</span> {<span class="id">br</span>:<span class="id">brand_relation</span>} : <span class="id">rtype</span> := <span class="id">Foreign</span> <span class="id">enhancedFloat</span>.<br/>
<span class="kwd">Definition</span> <span class="id">TimeScale</span> {<span class="id">br</span>:<span class="id">brand_relation</span>} : <span class="id">rtype</span> := <span class="id">Foreign</span> <span class="id">enhancedTimeScale</span>.<br/>
<span class="kwd">Definition</span> <span class="id">TimeDuration</span> {<span class="id">br</span>:<span class="id">brand_relation</span>} : <span class="id">rtype</span> := <span class="id">Foreign</span> <span class="id">enhancedTimeDuration</span>.<br/>
<span class="kwd">Definition</span> <span class="id">TimePoint</span> {<span class="id">br</span>:<span class="id">brand_relation</span>} : <span class="id">rtype</span> := <span class="id">Foreign</span> <span class="id">enhancedTimePoint</span>.<br/>
<span class="kwd">Definition</span> <span class="id">SqlDate</span> {<span class="id">br</span>:<span class="id">brand_relation</span>} : <span class="id">rtype</span> := <span class="id">Foreign</span> <span class="id">enhancedSqlDate</span>.<br/>
<span class="kwd">Definition</span> <span class="id">SqlDateInterval</span> {<span class="id">br</span>:<span class="id">brand_relation</span>} : <span class="id">rtype</span> := <span class="id">Foreign</span> <span class="id">enhancedSqlDateInterval</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isFloat</span> {<span class="id">model</span> : <span class="id">brand_model</span>}  (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id">enhancedFloat</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isTimePoint</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id">enhancedTimePoint</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isTimeScale</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id">enhancedTimeScale</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isTimeDuration</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id">enhancedTimeDuration</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isSqlDate</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id">enhancedSqlDate</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isSqlDateInterval</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Foreign</span>₀ <span class="id">enhancedSqlDateInterval</span> =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isNat</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Nat</span>₀ =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">isString</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">proj1_sig</span> τ <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">String</span>₀ =&gt; <span class="id">true</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">false</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">float_unary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">float_unary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">tuop_float_neg</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_neg</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_sqrt</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_sqrt</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_exp</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_exp</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_log</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_log</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_log10</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_log10</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_of_int</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_of_int</span> <span class="id">Nat</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_ceil</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_ceil</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_floor</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_floor</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_truncate</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_truncate</span> <span class="id">Float</span> <span class="id">Nat</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_abs</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_abs</span> <span class="id">Float</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_sum</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_sum</span> (<span class="id">Coll</span> <span class="id">Float</span>) <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_arithmean</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_arithmean</span> (<span class="id">Coll</span> <span class="id">Float</span>) <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_listmin</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_listmin</span> (<span class="id">Coll</span> <span class="id">Float</span>) <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_float_listmax</span> : <span class="id">float_unary_op_has_type</span> <span class="id">uop_float_listmax</span> (<span class="id">Coll</span> <span class="id">Float</span>) <span class="id">Float</span><br/>
<br/>
.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">tuncoll</span> {<span class="id">model</span>:<span class="id">brand_model</span>} (τ:<span class="id">rtype</span>) : <span class="id">option</span> <span class="id">rtype</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3084')">Proof.</div>
<div class="proofscript" id="proof3084">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> (<span class="id">Some</span> (<span class="id">exist</span> (<span class="kwd">fun</span> τ₀ : <span class="id">rtype</span>₀ =&gt; <span class="id">wf_rtype</span>₀ τ₀ = <span class="id">true</span>) <span class="id">x</span> <span class="id">e</span>)). <br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">None</span>.<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">float_unary_op_type_infer</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">float_unary_op</span>) (τ₁:<span class="id">rtype</span>) : <span class="id">option</span> <span class="id">rtype</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_neg</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_sqrt</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_exp</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_log</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_log10</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_ceil</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_floor</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_abs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isFloat</span> τ₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_of_int</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isNat</span> τ₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_truncate</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isFloat</span> τ₁<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> <span class="id">Nat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_sum</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_arithmean</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_listmin</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_listmax</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">tuncoll</span> τ₁ <span class="kwd">return</span> (<span class="id">option</span> <span class="id">rtype</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Some</span> τ =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isFloat</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">None</span> =&gt; <span class="id">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">float_unary_op_type_infer_sub</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">float_unary_op</span>) (τ₁:<span class="id">rtype</span>) : <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_neg</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_sqrt</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_exp</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_log</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_log10</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_ceil</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_floor</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_abs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">Float</span>) <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_of_int</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">Nat</span>) <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_truncate</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">Float</span>) <span class="id">Nat</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_sum</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_arithmean</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_listmin</span><br/>
&nbsp;&nbsp;| <span class="id">uop_float_listmax</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">Coll</span> <span class="id">Float</span>) <span class="id">Float</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">rondcollfloat_typed_some</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span>: <span class="id">list</span> <span class="id">FLOAT</span> -&gt; <span class="id">FLOAT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">d</span>:<span class="id">data</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">d</span> ▹ <span class="id">Coll</span> <span class="id">Float</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">z</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rondcollfloat</span> <span class="id">f</span> <span class="id">d</span> = <span class="id">Some</span> <span class="id">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\  <span class="id">z</span> ▹ <span class="id">Float</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3085')">Proof.</div>
<div class="proofscript" id="proof3085">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">dt</span>.<br/>
&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">dt</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">eqq</span>:<span class="id">r</span> = <span class="id">Foreign</span> <span class="id">enhancedFloat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id">rtype_fequal</span>; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>).<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">lift</span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">lift</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">dl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;- <span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">repeat</span> <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">invcs</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHdl</span> <span class="id">H2</span>) <span class="kwd">as</span> [? [<span class="id">eqq</span> <span class="id">typ</span>]]; <span class="tactic">clear</span> <span class="id">IHdl</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">lift</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">rmap</span> (<span class="kwd">fun</span> <span class="id">z</span> : <span class="id">data</span> =&gt; <span class="id">ondfloat</span> <span class="id">id</span> <span class="id">z</span>) <span class="id">dl</span>); <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">repeat</span> <span class="id">econstructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">float_unary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id">float_unary_op</span>) (τ<span class="kwd">in</span> τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">float_unary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span> ▹ τ<span class="kwd">in</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_unary_op_interp</span> <span class="id">fu</span> <span class="id">din</span> = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3086')">Proof.</div>
<div class="proofscript" id="proof3086">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">rondfloat</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">intros</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">rondcollfloat_typed_some</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>)].<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id">time_unary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">time_unary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">tuop_time_to_scale</span> : <span class="id">time_unary_op_has_type</span> <span class="id">uop_time_to_scale</span> <span class="id">TimePoint</span> <span class="id">TimeScale</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_time_from_string</span> : <span class="id">time_unary_op_has_type</span> <span class="id">uop_time_from_string</span> <span class="id">RType.String</span> <span class="id">TimePoint</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_time_duration_from_string</span> : <span class="id">time_unary_op_has_type</span> <span class="id">uop_time_duration_from_string</span> <span class="id">RType.String</span> <span class="id">TimeDuration</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">time_unary_op_type_infer</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">time_unary_op</span>) (τ₁:<span class="id">rtype</span>) : <span class="id">option</span> <span class="id">rtype</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">uop_time_to_scale</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">TimeScale</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">uop_time_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isString</span> τ₁ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">TimePoint</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">uop_time_duration_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isString</span> τ₁ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">TimeDuration</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">time_unary_op_type_infer_sub</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">time_unary_op</span>) (τ₁:<span class="id">rtype</span>) : <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">uop_time_to_scale</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">TimePoint</span>) <span class="id">TimeScale</span><br/>
&nbsp;&nbsp;| <span class="id">uop_time_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">RType.String</span>) <span class="id">TimePoint</span><br/>
&nbsp;&nbsp;| <span class="id">uop_time_duration_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">RType.String</span>) <span class="id">TimeDuration</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">time_unary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id">time_unary_op</span>) (τ<span class="kwd">in</span> τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">time_unary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span> ▹ τ<span class="kwd">in</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_unary_op_interp</span> <span class="id">fu</span> <span class="id">din</span> = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3087')">Proof.</div>
<div class="proofscript" id="proof3087">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">rondcollfloat</span>, <span class="id">denhancedtimeduration</span>, <span class="id">rondfloat</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id">sql_date_unary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">sql_date_unary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">tuop_sql_get_date_component</span> <span class="id">part</span> : <span class="id">sql_date_unary_op_has_type</span> (<span class="id">uop_sql_get_date_component</span> <span class="id">part</span>) <span class="id">SqlDate</span> <span class="id">Nat</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_sql_date_from_string</span> : <span class="id">sql_date_unary_op_has_type</span> <span class="id">uop_sql_date_from_string</span> <span class="id">RType.String</span> <span class="id">SqlDate</span><br/>
&nbsp;&nbsp;| <span class="id">tuop_sql_date_interval_from_string</span> : <span class="id">sql_date_unary_op_has_type</span> <span class="id">uop_sql_date_interval_from_string</span> <span class="id">RType.String</span> <span class="id">SqlDateInterval</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sql_date_unary_op_type_infer</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">sql_date_unary_op</span>) (τ₁:<span class="id">rtype</span>) : <span class="id">option</span> <span class="id">rtype</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">uop_sql_get_date_component</span> <span class="id">part</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Nat</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">uop_sql_date_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isString</span> τ₁ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">SqlDate</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">uop_sql_date_interval_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isString</span> τ₁ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">SqlDateInterval</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sql_date_unary_op_type_infer_sub</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">sql_date_unary_op</span>) (τ₁:<span class="id">rtype</span>) : <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">uop_sql_get_date_component</span> <span class="id">part</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">SqlDate</span>) <span class="id">Nat</span><br/>
&nbsp;&nbsp;| <span class="id">uop_sql_date_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">RType.String</span>) <span class="id">SqlDate</span><br/>
&nbsp;&nbsp;| <span class="id">uop_sql_date_interval_from_string</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_unary_op_schema</span> (τ₁,<span class="id">RType.String</span>) <span class="id">SqlDateInterval</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sql_date_unary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id">sql_date_unary_op</span>) (τ<span class="kwd">in</span> τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">sql_date_unary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span> ▹ τ<span class="kwd">in</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_unary_op_interp</span> <span class="id">fu</span> <span class="id">din</span> = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3088')">Proof.</div>
<div class="proofscript" id="proof3088">
&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">denhancedsqldate</span>, <span class="id">denhancedsqldateinterval</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>].<br/>
Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">enhanced_unary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} : <span class="id">enhanced_unary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">tenhanced_unary_float_op</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_unary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_has_type</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">fu</span>) τ<span class="kwd">in</span> τ<span class="id">out</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">tenhanced_unary_time_op</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_unary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_has_type</span> (<span class="id">enhanced_unary_time_op</span> <span class="id">fu</span>) τ<span class="kwd">in</span> τ<span class="id">out</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">tenhanced_unary_sql_date_op</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_unary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_has_type</span> (<span class="id">enhanced_unary_sql_date_op</span> <span class="id">fu</span>) τ<span class="kwd">in</span> τ<span class="id">out</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">enhanced_unary_op_typing_infer</span> {<span class="id">model</span>:<span class="id">brand_model</span>} (<span class="id">fu</span>:<span class="id">enhanced_unary_op</span>) (τ:<span class="id">rtype</span>) : <span class="id">option</span> <span class="id">rtype</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">fu</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_float_op</span> <span class="id">op</span> =&gt; <span class="id">float_unary_op_type_infer</span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_time_op</span> <span class="id">op</span> =&gt; <span class="id">time_unary_op_type_infer</span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_sql_date_op</span> <span class="id">op</span> =&gt; <span class="id">sql_date_unary_op_type_infer</span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">enhanced_unary_op_typing_infer_correct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span>:<span class="id">foreign_unary_op_type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ<span class="id">out</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_typing_infer</span> <span class="id">fu</span> τ₁ = <span class="id">Some</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_has_type</span> <span class="id">fu</span> τ₁ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3089')">Proof.</div>
<div class="proofscript" id="proof3089">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fu</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isFloat</span>, <span class="id">isNat</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Foreign_canon</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="id">exist</span> (<span class="kwd">fun</span> τ₀ : <span class="id">rtype</span>₀ =&gt; <span class="id">wf_rtype</span>₀ τ₀ = <span class="id">true</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Coll</span>₀ (<span class="id">Foreign</span>₀ <span class="id">enhancedFloat</span>)) <span class="id">e</span>) = <span class="id">Coll</span> <span class="id">Float</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id">rtype_fequal</span>; <span class="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Nat_canon</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Foreign_canon</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Foreign_canon</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">enhanced_unary_op_typing_infer_least</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span>:<span class="id">foreign_unary_op_type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ<span class="id">out</span>₁ τ<span class="id">out</span>₂} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_typing_infer</span> <span class="id">fu</span> τ₁ = <span class="id">Some</span> τ<span class="id">out</span>₁ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_has_type</span> <span class="id">fu</span> τ₁ τ<span class="id">out</span>₂ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;τ<span class="id">out</span>₁ ≤ τ<span class="id">out</span>₂.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3090')">Proof.</div>
<div class="proofscript" id="proof3090">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fu</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isFloat</span>, <span class="id">isNat</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Foreign_canon</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isFloat</span>, <span class="id">isNat</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Foreign_canon</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isFloat</span>, <span class="id">isNat</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Foreign_canon</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">String_canon</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">enhanced_unary_op_typing_infer_complete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span>:<span class="id">foreign_unary_op_type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ<span class="id">out</span>} : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_typing_infer</span> <span class="id">fu</span> τ₁ = <span class="id">None</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id">enhanced_unary_op_has_type</span> <span class="id">fu</span> τ₁ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3091')">Proof.</div>
<div class="proofscript" id="proof3091">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fu</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isFloat</span>, <span class="id">isNat</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not</span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isFloat</span>, <span class="id">isNat</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not</span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isFloat</span>, <span class="id">isNat</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not</span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">enhanced_unary_op_typing_infer_sub</span> {<span class="id">model</span>:<span class="id">brand_model</span>} (<span class="id">fu</span>:<span class="id">enhanced_unary_op</span>) (τ:<span class="id">rtype</span>) : <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">fu</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_float_op</span> <span class="id">op</span> =&gt; <span class="id">float_unary_op_type_infer_sub</span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_time_op</span> <span class="id">op</span> =&gt; <span class="id">time_unary_op_type_infer_sub</span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">enhanced_unary_sql_date_op</span> <span class="id">op</span> =&gt; <span class="id">sql_date_unary_op_type_infer_sub</span> <span class="id">op</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="kwd">Lemma</span> <span class="id">enhanced_unary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id">foreign_unary_op_type</span>) (τ<span class="kwd">in</span> τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">enhanced_unary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span> ▹ τ<span class="kwd">in</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_unary_op_interp</span> <span class="id">brand_relation_brands</span> <span class="id">fu</span> <span class="id">din</span> = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3092')">Proof.</div>
<div class="proofscript" id="proof3092">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">float_unary_op_typing_sound</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">time_unary_op_typing_sound</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">sql_date_unary_op_typing_sound</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_foreign_unary_op_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;@<span class="id">foreign_unary_op_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_unary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_data_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">model</span><br/>
&nbsp;&nbsp;:= { <span class="id">foreign_unary_op_typing_has_type</span> := <span class="id">enhanced_unary_op_has_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_unary_op_typing_sound</span> := <span class="id">enhanced_unary_op_typing_sound</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_unary_op_typing_infer</span> := <span class="id">enhanced_unary_op_typing_infer</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_unary_op_typing_infer_correct</span> := <span class="id">enhanced_unary_op_typing_infer_correct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_unary_op_typing_infer_least</span> := <span class="id">enhanced_unary_op_typing_infer_least</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_unary_op_typing_infer_complete</span> := <span class="id">enhanced_unary_op_typing_infer_complete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_unary_op_typing_infer_sub</span> := <span class="id">enhanced_unary_op_typing_infer_sub</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">float_binary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">float_binary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">tbop_float_plus</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_plus</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Float</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_minus</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_minus</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Float</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_mult</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_mult</span>  <span class="id">Float</span> <span class="id">Float</span> <span class="id">Float</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_div</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_div</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Float</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_pow</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_pow</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Float</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_min</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_min</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Float</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_max</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_max</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Float</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_ne</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_ne</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_lt</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_lt</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_le</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_le</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_gt</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_gt</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_float_ge</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">bop_float_ge</span> <span class="id">Float</span> <span class="id">Float</span> <span class="id">Bool</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">float_binary_op_type_infer</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">float_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_plus</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_minus</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_mult</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_div</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_pow</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_min</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_max</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isFloat</span> τ₁ &amp;&amp; <span class="id">isFloat</span> τ₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> <span class="id">Float</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_ne</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_lt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_le</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_gt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_ge</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isFloat</span> τ₁ &amp;&amp; <span class="id">isFloat</span> τ₂<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">float_binary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span> : <span class="id">float_binary_op</span>) (τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span>₁ <span class="id">din</span>₂ : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₁ ▹ τ<span class="kwd">in</span>₁ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₂ ▹ τ<span class="kwd">in</span>₂ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_interp</span> <span class="id">fb</span> <span class="id">din</span>₁ <span class="id">din</span>₂ = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3093')">Proof.</div>
<div class="proofscript" id="proof3093">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H4</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">rondfloat2</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">float_binary_op_type_infer_sub</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">float_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) : <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>*<span class="id">rtype</span>):=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_plus</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_minus</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_mult</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_div</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_pow</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_min</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_max</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁, <span class="id">Float</span>) (τ₂, <span class="id">Float</span>) <span class="id">Float</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_ne</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_lt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_le</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_gt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_float_ge</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁, <span class="id">Float</span>) (τ₂, <span class="id">Float</span>) <span class="id">Bool</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">time_binary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">time_binary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">tbop_time_as</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_as</span>  <span class="id">TimePoint</span> <span class="id">TimeScale</span> <span class="id">TimePoint</span><br/>
&nbsp;&nbsp;| <span class="id">tbop_time_shift</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_shift</span> <span class="id">TimePoint</span> <span class="id">TimeDuration</span> <span class="id">TimePoint</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_time_ne</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_ne</span> <span class="id">TimePoint</span> <span class="id">TimePoint</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_time_lt</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_lt</span> <span class="id">TimePoint</span> <span class="id">TimePoint</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_time_le</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_le</span> <span class="id">TimePoint</span> <span class="id">TimePoint</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_time_gt</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_gt</span> <span class="id">TimePoint</span> <span class="id">TimePoint</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_time_ge</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_ge</span> <span class="id">TimePoint</span> <span class="id">TimePoint</span> <span class="id">Bool</span><br/>
&nbsp;&nbsp;| <span class="id">tbop_time_duration_from_scale</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_duration_from_scale</span> <span class="id">TimeScale</span> <span class="id">Nat</span> <span class="id">TimeDuration</span><br/>
&nbsp;&nbsp;| <span class="id">tbop_time_duration_between</span>  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">bop_time_duration_between</span> <span class="id">TimePoint</span> <span class="id">TimePoint</span> <span class="id">TimeDuration</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">time_binary_op_type_infer</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">time_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_as</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimeScale</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">TimePoint</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_shift</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimeDuration</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">TimePoint</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_ne</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimePoint</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_lt</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimePoint</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_le</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimePoint</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_gt</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimePoint</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_ge</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimePoint</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_duration_from_scale</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimeScale</span> τ₁ &amp;&amp; <span class="id">isNat</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">TimeDuration</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_duration_between</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isTimePoint</span> τ₁ &amp;&amp; <span class="id">isTimePoint</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">TimeDuration</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">time_binary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span> : <span class="id">time_binary_op</span>) (τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span>₁ <span class="id">din</span>₂ : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₁ ▹ τ<span class="kwd">in</span>₁ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₂ ▹ τ<span class="kwd">in</span>₂ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_interp</span> <span class="id">fb</span> <span class="id">din</span>₁ <span class="id">din</span>₂ = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3094')">Proof.</div>
<div class="proofscript" id="proof3094">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H4</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id">rondtimepoint2</span>; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id">time_binary_op_type_infer_sub</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">time_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) : <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>*<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_as</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">TimePoint</span>) (τ₂,<span class="id">TimeScale</span>) <span class="id">TimePoint</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_shift</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">TimePoint</span>) (τ₂,<span class="id">TimeDuration</span>) <span class="id">TimePoint</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_ne</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_lt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_le</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_gt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_ge</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">TimePoint</span>) (τ₂,<span class="id">TimePoint</span>) <span class="id">Bool</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_duration_from_scale</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">TimeScale</span>) (τ₂,<span class="id">Nat</span>) <span class="id">TimeDuration</span><br/>
&nbsp;&nbsp;| <span class="id">bop_time_duration_between</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">TimePoint</span>) (τ₂,<span class="id">TimePoint</span>) <span class="id">TimeDuration</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">sql_date_binary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">sql_date_binary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_plus</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_plus</span> <span class="id">SqlDate</span> <span class="id">SqlDateInterval</span> <span class="id">SqlDate</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_minus</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_minus</span> <span class="id">SqlDate</span> <span class="id">SqlDateInterval</span> <span class="id">SqlDate</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_ne</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_ne</span> <span class="id">SqlDate</span> <span class="id">SqlDate</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_lt</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_lt</span> <span class="id">SqlDate</span> <span class="id">SqlDate</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_le</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_le</span> <span class="id">SqlDate</span> <span class="id">SqlDate</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_gt</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_gt</span> <span class="id">SqlDate</span> <span class="id">SqlDate</span> <span class="id">Bool</span> <br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_ge</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_ge</span> <span class="id">SqlDate</span> <span class="id">SqlDate</span> <span class="id">Bool</span><br/>
&nbsp;&nbsp;| <span class="id">tbop_sql_date_interval_between</span>  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">bop_sql_date_interval_between</span> <span class="id">SqlDate</span> <span class="id">SqlDate</span> <span class="id">SqlDateInterval</span><br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sql_date_binary_op_type_infer</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">sql_date_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_plus</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDateInterval</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">SqlDate</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_minus</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDateInterval</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">SqlDate</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_ne</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDate</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_lt</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDate</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_le</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDate</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_gt</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDate</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_ge</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDate</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">Bool</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_interval_between</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">isSqlDate</span> τ₁ &amp;&amp; <span class="id">isSqlDate</span> τ₂ <span class="kwd">then</span> <span class="id">Some</span> <span class="id">SqlDateInterval</span> <span class="kwd">else</span> <span class="id">None</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sql_date_binary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span> : <span class="id">sql_date_binary_op</span>) (τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span>₁ <span class="id">din</span>₂ : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₁ ▹ τ<span class="kwd">in</span>₁ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₂ ▹ τ<span class="kwd">in</span>₂ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_interp</span> <span class="id">fb</span> <span class="id">din</span>₁ <span class="id">din</span>₂ = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3095')">Proof.</div>
<div class="proofscript" id="proof3095">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> 1; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">invcs</span> <span class="id">H4</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">constructor</span>.<br/>
Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id">sql_date_binary_op_type_infer_sub</span> {<span class="id">model</span> : <span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">sql_date_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) : <span class="id">option</span> (<span class="id">rtype</span>*<span class="id">rtype</span>*<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_plus</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">SqlDate</span>) (τ₂,<span class="id">SqlDateInterval</span>) <span class="id">SqlDate</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_minus</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">SqlDate</span>) (τ₂,<span class="id">SqlDateInterval</span>) <span class="id">SqlDate</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_ne</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_lt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_le</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_gt</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_ge</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">SqlDate</span>) (τ₂,<span class="id">SqlDate</span>) <span class="id">Bool</span><br/>
&nbsp;&nbsp;| <span class="id">bop_sql_date_interval_between</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enforce_binary_op_schema</span> (τ₁,<span class="id">SqlDate</span>) (τ₂,<span class="id">SqlDate</span>) <span class="id">SqlDateInterval</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">enhanced_binary_op_has_type</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">enhanced_binary_op</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="id">rtype</span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">tenhanced_binary_float_op</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">float_binary_op_has_type</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_binary_op_has_type</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">fb</span>) τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">tenhanced_binary_time_op</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">time_binary_op_has_type</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_binary_op_has_type</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">fb</span>) τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">tenhanced_binary_sql_date_op</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sql_date_binary_op_has_type</span> <span class="id">fb</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_binary_op_has_type</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">fb</span>) τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_binary_op_typing_infer</span> {<span class="id">model</span>:<span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">enhanced_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_float_op</span> <span class="id">fb</span> =&gt; <span class="id">float_binary_op_type_infer</span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_time_op</span> <span class="id">fb</span> =&gt; <span class="id">time_binary_op_type_infer</span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_sql_date_op</span> <span class="id">fb</span> =&gt; <span class="id">sql_date_binary_op_type_infer</span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">enhanced_binary_op_typing_infer_correct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span>:<span class="id">foreign_binary_op_type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ₂ τ<span class="id">out</span>} :<br/>
&nbsp;&nbsp;<span class="id">enhanced_binary_op_typing_infer</span> <span class="id">fb</span> τ₁ τ₂ = <span class="id">Some</span> τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">enhanced_binary_op_has_type</span> <span class="id">fb</span> τ₁ τ₂ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3096')">Proof.</div>
<div class="proofscript" id="proof3096">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fb</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">unfold</span> <span class="id">isFloat</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Foreign_canon</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isTimePoint</span>, <span class="id">isTimeScale</span>, <span class="id">isTimeDuration</span>, <span class="id">isNat</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Nat_canon</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Foreign_canon</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">isSqlDate</span>, <span class="id">isSqlDateInterval</span>, <span class="id">isNat</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Nat_canon</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Foreign_canon</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">enhanced_binary_op_typing_infer_least</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span>:<span class="id">foreign_binary_op_type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ₂ τ<span class="id">out</span>₁ τ<span class="id">out</span>₂} : <br/>
&nbsp;&nbsp;<span class="id">enhanced_binary_op_typing_infer</span> <span class="id">fb</span> τ₁ τ₂ = <span class="id">Some</span> τ<span class="id">out</span>₁ -&gt;<br/>
&nbsp;&nbsp;<span class="id">enhanced_binary_op_has_type</span> <span class="id">fb</span> τ₁ τ₂ τ<span class="id">out</span>₂ -&gt;<br/>
&nbsp;&nbsp;τ<span class="id">out</span>₁ ≤ τ<span class="id">out</span>₂.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3097')">Proof.</div>
<div class="proofscript" id="proof3097">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fb</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;;  <span class="tactic">unfold</span> <span class="id">isFloat</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Foreign_canon</span> <span class="kwd">in</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">unfold</span> <span class="id">isTimePoint</span>, <span class="id">isTimeScale</span>, <span class="id">isTimeDuration</span>, <span class="id">isNat</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Foreign_canon</span> <span class="kwd">in</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ₁; <span class="tactic">destruct</span> τ₂; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">unfold</span> <span class="id">isSqlDate</span>, <span class="id">isSqlDateInterval</span>, <span class="id">isNat</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">x0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> (<span class="tactic">destruct</span> <span class="id">ft</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">Foreign_canon</span> <span class="kwd">in</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">invcs</span> <span class="id">H1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">enhanced_binary_op_typing_infer_complete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fb</span>:<span class="id">foreign_binary_op_type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{τ₁ τ₂ τ<span class="id">out</span>} : <br/>
&nbsp;&nbsp;<span class="id">enhanced_binary_op_typing_infer</span> <span class="id">fb</span> τ₁ τ₂ = <span class="id">None</span> -&gt;<br/>
&nbsp;&nbsp;~ <span class="id">enhanced_binary_op_has_type</span> <span class="id">fb</span> τ₁ τ₂ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3098')">Proof.</div>
<div class="proofscript" id="proof3098">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fb</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intro</span> <span class="id">HH</span>; <span class="id">invcs</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">invcs</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intro</span> <span class="id">HH</span>; <span class="id">invcs</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">invcs</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">intro</span> <span class="id">HH</span>; <span class="id">invcs</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">invcs</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">enhanced_binary_op_typing_infer_sub</span> {<span class="id">model</span>:<span class="id">brand_model</span>} (<span class="id">op</span>:<span class="id">enhanced_binary_op</span>) (τ₁ τ₂:<span class="id">rtype</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_float_op</span> <span class="id">fb</span> =&gt; <span class="id">float_binary_op_type_infer_sub</span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_time_op</span> <span class="id">fb</span> =&gt; <span class="id">time_binary_op_type_infer_sub</span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;| <span class="id">enhanced_binary_sql_date_op</span> <span class="id">fb</span> =&gt; <span class="id">sql_date_binary_op_type_infer_sub</span> <span class="id">fb</span> τ₁ τ₂<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">enhanced_binary_op_typing_sound</span> {<span class="id">model</span> : <span class="id">brand_model</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fu</span> : <span class="id">foreign_binary_op_type</span>) (τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> : <span class="id">rtype</span>) :<br/>
&nbsp;&nbsp;<span class="id">enhanced_binary_op_has_type</span> <span class="id">fu</span> τ<span class="kwd">in</span>₁ τ<span class="kwd">in</span>₂ τ<span class="id">out</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">din</span>₁ <span class="id">din</span>₂ : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₁ ▹ τ<span class="kwd">in</span>₁ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">din</span>₂ ▹ τ<span class="kwd">in</span>₂ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">dout</span> : <span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_binary_op_interp</span> <span class="id">brand_relation_brands</span> <span class="id">fu</span> <span class="id">din</span>₁ <span class="id">din</span>₂ = <span class="id">Some</span> <span class="id">dout</span> /\ <span class="id">dout</span> ▹ τ<span class="id">out</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3099')">Proof.</div>
<div class="proofscript" id="proof3099">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">float_binary_op_typing_sound</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">time_binary_op_typing_sound</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">sql_date_binary_op_typing_sound</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id">enhanced_foreign_binary_op_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;@<span class="id">foreign_binary_op_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_binary_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_data_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">model</span><br/>
&nbsp;&nbsp;:= { <span class="id">foreign_binary_op_typing_has_type</span> := <span class="id">enhanced_binary_op_has_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_binary_op_typing_sound</span> := <span class="id">enhanced_binary_op_typing_sound</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_binary_op_typing_infer</span> := <span class="id">enhanced_binary_op_typing_infer</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_binary_op_typing_infer_correct</span> := <span class="id">enhanced_binary_op_typing_infer_correct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_binary_op_typing_infer_least</span> := <span class="id">enhanced_binary_op_typing_infer_least</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_binary_op_typing_infer_complete</span> := <span class="id">enhanced_binary_op_typing_infer_complete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">foreign_binary_op_typing_infer_sub</span> := <span class="id">enhanced_binary_op_typing_infer_sub</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_foreign_typing</span> {<span class="id">model</span>:<span class="id">brand_model</span>}:<br/>
&nbsp;&nbsp;@<span class="id">foreign_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">model</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_foreign_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">model</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_data_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_unary_op_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_binary_op_typing</span>.<br/>
<br/>
<span class="kwd">Instance</span> <span class="id">enhanced_basic_model</span> {<span class="id">model</span>:<span class="id">brand_model</span>} :<br/>
&nbsp;&nbsp;<span class="id">basic_model</span><br/>
&nbsp;&nbsp;:= <span class="id">mk_basic_model</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_runtime</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">model</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">enhanced_foreign_typing</span>.<br/>
<br/>
<br/>
<span class="kwd">Module</span> <span class="id">EnhancedForeignType</span> &lt;: <span class="id">CompilerForeignType</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_type</span> : <span class="id">foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_type</span>.<br/>
<span class="kwd">End</span> <span class="id">EnhancedForeignType</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ZArith</span>.<br/>
<span class="kwd">Module</span> <span class="id">EnhancedModel</span>(<span class="id">bm</span>:<span class="id">CompilerBrandModel</span>(<span class="id">EnhancedForeignType</span>)) &lt;: <span class="id">CompilerModel</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_foreign_type</span> : <span class="id">foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_type</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_basic_model</span> : @<span class="id">basic_model</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= @<span class="id">enhanced_basic_model</span> <span class="id">bm.compiler_brand_model</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_to_java</span> : <span class="id">foreign_to_java</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_java</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_to_javascript</span> : <span class="id">foreign_to_javascript</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_javascript</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_to_scala</span> : <span class="id">foreign_to_scala</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_scala</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_to_JSON</span> : <span class="id">foreign_to_JSON</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_JSON</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_type_to_JSON</span> : <span class="id">foreign_type_to_JSON</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_type_to_JSON</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_reduce_op</span> : <span class="id">foreign_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_reduce_op</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_to_reduce_op</span> : <span class="id">foreign_to_reduce_op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_reduce_op</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_to_spark</span> : <span class="id">foreign_to_spark</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_spark</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_cloudant</span> : <span class="id">foreign_cloudant</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_cloudant</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_to_cloudant</span> : <span class="id">foreign_to_cloudant</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_to_cloudant</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_nraenv_optimizer_logger</span> : <span class="id">optimizer_logger</span> <span class="id">string</span> <span class="id">nraenv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">foreign_nraenv_optimizer_logger</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_nnrc_optimizer_logger</span> : <span class="id">optimizer_logger</span> <span class="id">string</span> <span class="id">nnrc</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">foreign_nnrc_optimizer_logger</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_dnnrc_optimizer_logger</span> {<span class="id">br</span>:<span class="id">brand_relation</span>}: <span class="id">optimizer_logger</span> <span class="id">string</span> (@<span class="id">dnnrc</span> <span class="id">_</span> (<span class="id">type_annotation</span> <span class="id">unit</span>) <span class="id">dataframe</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">foreign_dnnrc_optimizer_logger</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compiler_model_foreign_data_typing</span> : <span class="id">foreign_data_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_data_typing</span>.<br/>
<span class="kwd">End</span> <span class="id">EnhancedModel</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">CompEnhanced</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id">Enhanced</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id">Model</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">basic_model</span> (<span class="id">bm</span>:<span class="id">brand_model</span>) : <span class="id">basic_model</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= @<span class="id">enhanced_basic_model</span> <span class="id">bm</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">foreign_type</span> : <span class="id">foreign_type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">enhanced_foreign_type</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">foreign_typing</span> (<span class="id">bm</span>:<span class="id">brand_model</span>) : <span class="id">foreign_typing</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= @<span class="id">enhanced_foreign_typing</span> <span class="id">bm</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Model</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id">Data</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">dfloat</span> (<span class="id">f</span> : <span class="id">FLOAT</span>) : <span class="id">data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">dforeign</span> (<span class="id">enhancedfloat</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">dstringblob</span> (<span class="id">s</span> : <span class="id">STRING</span>) : <span class="id">data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">dforeign</span> (<span class="id">enhancedstring</span> <span class="id">s</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">jfloat</span> (<span class="id">f</span> : <span class="id">FLOAT</span>) : <span class="id">json</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">jforeign</span> (<span class="id">enhancedfloat</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">jstringblob</span> (<span class="id">s</span> : <span class="id">STRING</span>) : <span class="id">json</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">jforeign</span> (<span class="id">enhancedstring</span> <span class="id">s</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">scale_kind</span> := <span class="id">time_scale</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">SECOND</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_second</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">MINUTE</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_minute</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">HOUR</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_hour</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">DAY</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_day</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">WEEK</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_week</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">MONTH</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_month</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">YEAR</span>  : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_year</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">second</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_second</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">minute</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_minute</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">hour</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_hour</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">day</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_day</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">week</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_week</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">month</span> : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_month</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">year</span>  : <span class="id">scale_kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">ts_year</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">dtime_scale</span> (<span class="id">kind</span>:<span class="id">scale_kind</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">dforeign</span> (<span class="id">enhancedtimescale</span> <span class="id">kind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">dtime_duration</span> (<span class="id">td</span>:<span class="id">TIME_DURATION</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">dforeign</span> (<span class="id">enhancedtimeduration</span> <span class="id">td</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">dtimepoint</span> (<span class="id">tp</span>:<span class="id">TIME_POINT</span>) : <span class="id">data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">dforeign</span> (<span class="id">enhancedtimepoint</span> <span class="id">tp</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_part</span> := <span class="id">sql_date_component</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_day</span> : <span class="id">sql_date_part</span> := <span class="id">sql_date_DAY</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_month</span> : <span class="id">sql_date_part</span> := <span class="id">sql_date_MONTH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_year</span> : <span class="id">sql_date_part</span> := <span class="id">sql_date_YEAR</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">dsql_date</span> (<span class="id">d</span>:<span class="id">SQL_DATE</span>) : <span class="id">data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">dforeign</span> (<span class="id">enhancedsqldate</span> <span class="id">d</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">dsql_date_interval</span> (<span class="id">d</span>:<span class="id">SQL_DATE_INTERVAL</span>) : <span class="id">data</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">dforeign</span> (<span class="id">enhancedsqldateinterval</span> <span class="id">d</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Data</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id">Ops</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id">Unary</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_neg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_neg</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_sqrt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_sqrt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_exp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_exp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_log</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_log</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_log10</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_log10</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_of_int</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_of_int</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_ceil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_ceil</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_floor</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_floor</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_truncate</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_truncate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_abs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_abs</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_sum</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_sum</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_arithmean</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_arithmean</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_listmin</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_listmax</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_float_op</span> <span class="id">uop_float_listmax</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_to_scale</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_time_op</span> <span class="id">uop_time_to_scale</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_from_string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_time_op</span> <span class="id">uop_time_from_string</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_duration_from_string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_time_op</span> <span class="id">uop_time_duration_from_string</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_get_date_component</span> (<span class="id">component</span>:<span class="id">sql_date_component</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_sql_date_op</span> (<span class="id">uop_sql_get_date_component</span> <span class="id">component</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_from_string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_sql_date_op</span> <span class="id">uop_sql_date_from_string</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_interval_from_string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignUnaryOp</span> (<span class="id">enhanced_unary_sql_date_op</span> <span class="id">uop_sql_date_interval_from_string</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatNeg</span> := <span class="id">float_neg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatSqrt</span> := <span class="id">float_sqrt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatExp</span> := <span class="id">float_exp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatLog</span> := <span class="id">float_log</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatLog10</span> := <span class="id">float_log10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatOfInt</span> := <span class="id">float_of_int</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatCeil</span> := <span class="id">float_ceil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatFloor</span> := <span class="id">float_floor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatTruncate</span> := <span class="id">float_truncate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatAbs</span> := <span class="id">float_abs</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatSum</span> := <span class="id">float_sum</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatArithMean</span> := <span class="id">float_arithmean</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatListMin</span> := <span class="id">float_listmin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatListMax</span> := <span class="id">float_listmax</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeToSscale</span> := <span class="id">time_to_scale</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeFromString</span> := <span class="id">time_from_string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeDurationFromString</span> := <span class="id">time_duration_from_string</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlGetDateComponent</span> := <span class="id">sql_get_date_component</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateFromString</span> := <span class="id">sql_date_from_string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateIntervalFromString</span> := <span class="id">sql_date_interval_from_string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Unary</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Module</span> <span class="id">Binary</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_plus</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_plus</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_minus</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_minus</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_mult</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_mult</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_div</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_div</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_pow</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_pow</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_min</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_min</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_max</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_max</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_ne</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_ne</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_lt</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_lt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_le</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_gt</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_gt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">float_ge</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_float_op</span> <span class="id">bop_float_ge</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_as</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">bop_time_as</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_shift</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">bop_time_shift</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_ne</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">bop_time_ne</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_lt</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">bop_time_lt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_le</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">bop_time_le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_gt</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">bop_time_gt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_ge</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> <span class="id">bop_time_ge</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_duration_from_scale</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> (<span class="id">bop_time_duration_from_scale</span>)).               <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">time_duration_between</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_time_op</span> (<span class="id">bop_time_duration_between</span>)).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_plus</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">bop_sql_date_plus</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_minus</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">bop_sql_date_minus</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_ne</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">bop_sql_date_ne</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_lt</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">bop_sql_date_lt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_le</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">bop_sql_date_le</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_gt</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">bop_sql_date_gt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_ge</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> <span class="id">bop_sql_date_ge</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">sql_date_interval_between</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AForeignBinaryOp</span> (<span class="id">enhanced_binary_sql_date_op</span> (<span class="id">bop_sql_date_interval_between</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatPlus</span> := <span class="id">float_plus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatMinus</span> := <span class="id">float_minus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatMult</span>  := <span class="id">float_mult</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatDiv</span>  := <span class="id">float_div</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatPow</span>  := <span class="id">float_pow</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatMin</span>  := <span class="id">float_min</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatMax</span>  := <span class="id">float_max</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatNe</span>  := <span class="id">float_ne</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatLt</span>  := <span class="id">float_lt</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatLe</span>  := <span class="id">float_le</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatGt</span>  := <span class="id">float_gt</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">AFloatGe</span>  := <span class="id">float_ge</span> .<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeAs</span> := <span class="id">time_as</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeShift</span> := <span class="id">time_shift</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeNe</span> := <span class="id">time_ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeLt</span> := <span class="id">time_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeLe</span> := <span class="id">time_le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeGt</span> := <span class="id">time_gt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeGe</span> := <span class="id">time_ge</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeDurationFromScale</span> := <span class="id">time_duration_from_scale</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ATimeDurationBetween</span> := <span class="id">time_duration_between</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDatePlus</span> := <span class="id">sql_date_plus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateMinus</span> := <span class="id">sql_date_minus</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateNe</span> := <span class="id">sql_date_ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateLt</span> := <span class="id">sql_date_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateLe</span> := <span class="id">sql_date_le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateGt</span> := <span class="id">sql_date_gt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateGe</span> := <span class="id">sql_date_ge</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">ASqlDateIntervalBetween</span> := <span class="id">sql_date_interval_between</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Binary</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Ops</span>.<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Enhanced</span>.<br/>
<span class="kwd">End</span> <span class="id">CompEnhanced</span>.  <br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
