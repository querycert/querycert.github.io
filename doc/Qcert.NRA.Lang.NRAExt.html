
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.NRA.Lang.NRAExt</title>
<meta name="description" content="Documentation of Coq module Qcert.NRA.Lang.NRAExt" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.NRA.Lang.NRAExt</h1>
<div class="coq">
<br/>
<span class="kwd">Section</span> <span class="id">NRAExt</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">String</span> <span class="id">List</span> <span class="id">Compare_dec</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">EquivDec</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Utils</span> <span class="id">BasicRuntime</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">NRA</span>.<br/>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">fruntime</span>:<span class="id">foreign_runtime</span>}.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">join</span> <span class="id">op1</span> <span class="id">op2</span> <span class="id">op3</span> := (<span class="id">ASelect</span> <span class="id">op1</span> (<span class="id">AProduct</span> <span class="id">op2</span> <span class="id">op3</span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">semi_join</span> <span class="id">op1</span> <span class="id">op2</span> <span class="id">op3</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ASelect</span> (<span class="id">AUnop</span> <span class="id">ANeg</span> (<span class="id">ABinop</span> <span class="id">AEq</span> (<span class="id">ASelect</span> <span class="id">op1</span> (<span class="id">AProduct</span> ((<span class="id">AUnop</span> <span class="id">AColl</span>) <span class="id">AID</span>) <span class="id">op3</span>)) (<span class="id">AConst</span> (<span class="id">dcoll</span> <span class="id">nil</span>)))) <span class="id">op2</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">anti_join</span> <span class="id">op1</span> <span class="id">op2</span> <span class="id">op3</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ASelect</span> (<span class="id">ABinop</span> <span class="id">AEq</span> (<span class="id">ASelect</span> <span class="id">op1</span> (<span class="id">AProduct</span> ((<span class="id">AUnop</span> <span class="id">AColl</span>) <span class="id">AID</span>) <span class="id">op3</span>)) (<span class="id">AConst</span> (<span class="id">dcoll</span> <span class="id">nil</span>))) <span class="id">op2</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">map_add_rec</span> (<span class="id">s</span>:<span class="id">string</span>) <span class="id">op1</span> <span class="id">op2</span> := <span class="id">AMap</span> ((<span class="id">ABinop</span> <span class="id">AConcat</span>) <span class="id">AID</span> ((<span class="id">AUnop</span> (<span class="id">ARec</span> <span class="id">s</span>)) <span class="id">op1</span>)) <span class="id">op2</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">map_to_rec</span> (<span class="id">s</span>:<span class="id">string</span>) <span class="id">op</span> := <span class="id">AMap</span> ((<span class="id">AUnop</span> (<span class="id">ARec</span> <span class="id">s</span>)) <span class="id">AID</span>) <span class="id">op</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id">rproject</span> (<span class="id">fields</span>:<span class="id">list</span> <span class="id">string</span>) (<span class="id">op</span>:<span class="id">nra</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">fields</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">nil</span> =&gt; <span class="id">AConst</span> (<span class="id">drec</span> <span class="id">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">s</span>::<span class="id">xs</span> =&gt; <span class="id">ABinop</span> <span class="id">AConcat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">AUnop</span> (<span class="id">ARec</span> <span class="id">s</span>)) ((<span class="id">AUnop</span> (<span class="id">ADot</span> <span class="id">s</span>)) <span class="id">op</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rproject</span> <span class="id">xs</span> <span class="id">op</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">project</span> (<span class="id">fields</span>:<span class="id">list</span> <span class="id">string</span>) (<span class="id">op</span>:<span class="id">nra</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">AMap</span> (<span class="id">rproject</span> <span class="id">fields</span> <span class="id">AID</span>) <span class="id">op</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">project_remove</span> <span class="id">s</span> <span class="id">op</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">AMap</span> ((<span class="id">AUnop</span> (<span class="id">ARecRemove</span> <span class="id">s</span>)) <span class="id">AID</span>) <span class="id">op</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">map_rename_rec</span> (<span class="id">s1</span> <span class="id">s2</span>:<span class="id">string</span>) <span class="id">op</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">AMap</span> ((<span class="id">ABinop</span> <span class="id">AConcat</span>) ((<span class="id">AUnop</span> (<span class="id">ARec</span> <span class="id">s2</span>)) ((<span class="id">AUnop</span> (<span class="id">ADot</span> <span class="id">s1</span>)) <span class="id">AID</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">AUnop</span> (<span class="id">ARecRemove</span> <span class="id">s1</span>)) <span class="id">AID</span>)) <span class="id">op</span>.<br/>
<br/>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id">ListNotations</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">group1</span> (<span class="id">g</span>:<span class="id">string</span>) (<span class="id">s1</span>:<span class="id">string</span>) <span class="id">op</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">AMap</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">ABinop</span> <span class="id">AConcat</span>) ((<span class="id">AUnop</span> (<span class="id">ADot</span> "1")) ((<span class="id">AUnop</span> (<span class="id">ADot</span> "2")) <span class="id">AID</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">AUnop</span> (<span class="id">ARec</span> <span class="id">g</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AMap</span> ((<span class="id">AUnop</span> (<span class="id">ADot</span> "3")) <span class="id">AID</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ASelect</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ABinop</span> <span class="id">AEq</span> ((<span class="id">AUnop</span> (<span class="id">ADot</span> <span class="id">s1</span>)) ((<span class="id">AUnop</span> (<span class="id">ADot</span> "1")) <span class="id">AID</span>)) ((<span class="id">AUnop</span> (<span class="id">ADot</span> <span class="id">s1</span>)) ((<span class="id">AUnop</span> (<span class="id">ADot</span> "3")) <span class="id">AID</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AProduct</span> ((<span class="id">AUnop</span> <span class="id">AColl</span>) ((<span class="id">AUnop</span> (<span class="id">ADot</span> "2")) <span class="id">AID</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">AUnop</span> (<span class="id">ADot</span> "4")) <span class="id">AID</span>))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AMapConcat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">AUnop</span> <span class="id">AColl</span>) ((<span class="id">AUnop</span> (<span class="id">ARec</span> "4")) (<span class="id">AMap</span> ((<span class="id">AUnop</span> (<span class="id">ARec</span> "3")) <span class="id">AID</span>) <span class="id">op</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">map_to_rec</span> "2" (<span class="id">map_to_rec</span> "1" ((<span class="id">AUnop</span> <span class="id">ADistinct</span>) (<span class="id">project</span> (<span class="id">s1</span>::<span class="id">nil</span>) <span class="id">op</span>))))).<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">unnest_one</span> <span class="id">s</span> <span class="id">op</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">AMap</span> ((<span class="id">AUnop</span> (<span class="id">ARecRemove</span> <span class="id">s</span>)) <span class="id">AID</span>) (<span class="id">AMapConcat</span> ((<span class="id">AUnop</span> (<span class="id">ADot</span> <span class="id">s</span>)) <span class="id">AID</span>) <span class="id">op</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">unnest_two</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">op</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">AMap</span> ((<span class="id">AUnop</span> (<span class="id">ARecRemove</span> <span class="id">s1</span>)) <span class="id">AID</span>) (<span class="id">AMapConcat</span> (<span class="id">AMap</span> ((<span class="id">AUnop</span> (<span class="id">ARec</span> <span class="id">s2</span>)) <span class="id">AID</span>) ((<span class="id">AUnop</span> (<span class="id">ADot</span> <span class="id">s1</span>)) <span class="id">AID</span>)) <span class="id">op</span>).<br/>
<br/>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id">nraext</span> : <span class="kwd">Set</span> :=<br/>
&nbsp;&nbsp;| <span class="id">AXID</span> : <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXConst</span> : <span class="id">data</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXBinop</span> : <span class="id">binOp</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXUnop</span> : <span class="id">unaryOp</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXMap</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXMapConcat</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXProduct</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXSelect</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXDefault</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXEither</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXEitherConcat</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXApp</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXGetConstant</span> : <span class="id">string</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXJoin</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXSemiJoin</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXAntiJoin</span> : <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXMapToRec</span> : <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXMapAddRec</span> : <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXRProject</span> : <span class="id">list</span> <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXProject</span> : <span class="id">list</span> <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXProjectRemove</span> : <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXMapRename</span> : <span class="id">string</span> -&gt; <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXUnnestOne</span> : <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXUnnestTwo</span> : <span class="id">string</span> -&gt; <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;| <span class="id">AXGroupBy</span> : <span class="id">string</span> -&gt; <span class="id">string</span> -&gt; <span class="id">nraext</span> -&gt; <span class="id">nraext</span><br/>
&nbsp;&nbsp;.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id">nraext_eqdec</span> : <span class="id">EqDec</span> <span class="id">nraext</span> <span class="id">eq</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1516')">Proof.</div>
<div class="proofscript" id="proof1516">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">nraext</span>,  {<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">apply</span> <span class="id">binOp_eqdec</span> | <span class="tactic">apply</span> <span class="id">unaryOp_eqdec</span> | <span class="tactic">apply</span> <span class="id">data_eqdec</span> | <span class="tactic">apply</span> <span class="id">string_eqdec</span> | <span class="tactic">apply</span> <span class="id">list_eqdec</span>; <span class="tactic">apply</span> <span class="id">string_eqdec</span>].<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id">nra_of_nraext</span> (<span class="id">e</span>:<span class="id">nraext</span>) : <span class="id">nra</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXID</span> =&gt; <span class="id">AID</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXConst</span> <span class="id">d</span> =&gt; <span class="id">AConst</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXBinop</span> <span class="id">b</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">ABinop</span> <span class="id">b</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXUnop</span> <span class="id">u</span> <span class="id">e1</span> =&gt; <span class="id">AUnop</span> <span class="id">u</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXMap</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AMap</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXMapConcat</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AMapConcat</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXProduct</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AProduct</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXSelect</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">ASelect</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXDefault</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">ADefault</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXEither</span> <span class="id">opl</span> <span class="id">opr</span> =&gt; <span class="id">AEither</span> (<span class="id">nra_of_nraext</span> <span class="id">opl</span>) (<span class="id">nra_of_nraext</span> <span class="id">opr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXEitherConcat</span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id">AEitherConcat</span> (<span class="id">nra_of_nraext</span> <span class="id">op1</span>) (<span class="id">nra_of_nraext</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXApp</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AApp</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXGetConstant</span> <span class="id">s</span> =&gt; <span class="id">AGetConstant</span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXJoin</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt; <span class="id">join</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>) (<span class="id">nra_of_nraext</span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXSemiJoin</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt; <span class="id">semi_join</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>) (<span class="id">nra_of_nraext</span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXAntiJoin</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt; <span class="id">anti_join</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>) (<span class="id">nra_of_nraext</span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXMapToRec</span> <span class="id">s</span> <span class="id">e1</span> =&gt; <span class="id">map_to_rec</span> <span class="id">s</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXMapAddRec</span> <span class="id">s</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">map_add_rec</span> <span class="id">s</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>) (<span class="id">nra_of_nraext</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXRProject</span> <span class="id">ls</span> <span class="id">e1</span> =&gt; <span class="id">rproject</span> <span class="id">ls</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXProject</span> <span class="id">ls</span> <span class="id">e1</span> =&gt; <span class="id">project</span> <span class="id">ls</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXProjectRemove</span> <span class="id">s</span> <span class="id">e1</span> =&gt; <span class="id">project_remove</span> <span class="id">s</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXMapRename</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">e1</span> =&gt; <span class="id">map_rename_rec</span> <span class="id">s1</span> <span class="id">s2</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXUnnestOne</span> <span class="id">s1</span> <span class="id">e1</span> =&gt; <span class="id">unnest_one</span> <span class="id">s1</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXUnnestTwo</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">e1</span> =&gt; <span class="id">unnest_two</span> <span class="id">s1</span> <span class="id">s2</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AXGroupBy</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">e1</span> =&gt; <span class="id">group1</span> <span class="id">s1</span> <span class="id">s2</span> (<span class="id">nra_of_nraext</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id">nraext_of_nra</span> (<span class="id">a</span>:<span class="id">nra</span>) : <span class="id">nraext</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AID</span> =&gt; <span class="id">AXID</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AConst</span> <span class="id">d</span> =&gt; <span class="id">AXConst</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ABinop</span> <span class="id">b</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AXBinop</span> <span class="id">b</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>) (<span class="id">nraext_of_nra</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AUnop</span> <span class="id">u</span> <span class="id">e1</span> =&gt; <span class="id">AXUnop</span> <span class="id">u</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AMap</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AXMap</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>) (<span class="id">nraext_of_nra</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AMapConcat</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AXMapConcat</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>) (<span class="id">nraext_of_nra</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AProduct</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AXProduct</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>) (<span class="id">nraext_of_nra</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ASelect</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AXSelect</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>) (<span class="id">nraext_of_nra</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">ADefault</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AXDefault</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>) (<span class="id">nraext_of_nra</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AEither</span> <span class="id">opl</span> <span class="id">opr</span> =&gt; <span class="id">AXEither</span> (<span class="id">nraext_of_nra</span> <span class="id">opl</span>) (<span class="id">nraext_of_nra</span> <span class="id">opr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AEitherConcat</span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id">AXEitherConcat</span> (<span class="id">nraext_of_nra</span> <span class="id">op1</span>) (<span class="id">nraext_of_nra</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AApp</span> <span class="id">e1</span> <span class="id">e2</span> =&gt; <span class="id">AXApp</span> (<span class="id">nraext_of_nra</span> <span class="id">e1</span>) (<span class="id">nraext_of_nra</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">AGetConstant</span> <span class="id">s</span> =&gt; <span class="id">AXGetConstant</span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">nraext_roundtrip</span> (<span class="id">a</span>:<span class="id">nra</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nra_of_nraext</span> (<span class="id">nraext_of_nra</span> <span class="id">a</span>)) = <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1517')">Proof.</div>
<div class="proofscript" id="proof1517">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id">IHa1</span>; <span class="tactic">rewrite</span> <span class="id">IHa2</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHa3</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHa</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id">list</span>(<span class="id">string</span>*<span class="id">string</span>)).<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">nraext_eval</span> <span class="id">c</span> (<span class="id">e</span>:<span class="id">nraext</span>) (<span class="id">x</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nra_eval</span> <span class="id">h</span> <span class="id">c</span> (<span class="id">nra_of_nraext</span> <span class="id">e</span>) <span class="id">x</span>.<br/>
<br/>
<div class="doc">Nraebraic plan application </div>
<br/>
<span class="kwd">End</span> <span class="id">NRAExt</span>.<br/>
<br/>
<br/>
<span class="kwd">Delimit</span> <span class="kwd">Scope</span> <span class="id">nraext_scope</span> <span class="kwd">with</span> <span class="id">nraext</span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">h</span> ⊢ <span class="id">EOp</span> @ₓ <span class="id">x</span> ⊣ <span class="id">c</span>" := (<span class="id">nraext_eval</span> <span class="id">h</span> <span class="id">c</span> <span class="id">EOp</span> <span class="id">x</span>) (<span class="tactic">at</span> <span class="id">level</span> 10): <span class="id">nraext_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "'<span class="id">ID</span>'" := (<span class="id">AXID</span>)  (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nraext_scope</span>.                                           <br/>
<span class="kwd">Notation</span> "<span class="id">CGET</span>⟨ <span class="id">s</span> ⟩" := (<span class="id">AXGetConstant</span> <span class="id">s</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nraext_core_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "‵‵ <span class="id">c</span>" := (<span class="id">AXConst</span> (<span class="id">dconst</span> <span class="id">c</span>))  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nraext_scope</span>.                           <br/>
<span class="kwd">Notation</span> "‵ <span class="id">c</span>" := (<span class="id">AXConst</span> <span class="id">c</span>)  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nraext_scope</span>.                                     <br/>
<span class="kwd">Notation</span> "‵{||}" := (<span class="id">AXConst</span> (<span class="id">dcoll</span> <span class="id">nil</span>))  (<span class="tactic">at</span> <span class="id">level</span> 0) : <span class="id">nraext_scope</span>.                         <br/>
<span class="kwd">Notation</span> "‵[||]" := (<span class="id">AXConst</span> (<span class="id">drec</span> <span class="id">nil</span>)) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nraext_scope</span>.                          <br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ∧ <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">AAnd</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 65): <span class="id">nraext_scope</span>.    <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ∨ <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">AOr</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ≐ <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">AEq</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ≤ <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">ALt</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">no</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.     <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ⋃ <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">AUnion</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.  <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> − <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">AMinus</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.  <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ♯<span class="id">min</span> <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">AMin</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>. <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ♯<span class="id">max</span> <span class="id">r2</span>" := (<span class="id">AXBinop</span> <span class="id">AMax</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>. <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> ⊕ <span class="id">r</span>"   := ((<span class="id">AXBinop</span> <span class="id">AConcat</span>) <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                     <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> ⊗ <span class="id">r</span>"   := ((<span class="id">AXBinop</span> <span class="id">AMergeConcat</span>) <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                <br/>
<br/>
<span class="kwd">Notation</span> "¬( <span class="id">r1</span> )" := (<span class="id">AXUnop</span> <span class="id">ANeg</span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.        <br/>
<span class="kwd">Notation</span> "ε( <span class="id">r1</span> )" := (<span class="id">AXUnop</span> <span class="id">ADistinct</span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.   <br/>
<span class="kwd">Notation</span> "♯<span class="id">count</span>( <span class="id">r1</span> )" := (<span class="id">AXUnop</span> <span class="id">ACount</span> <span class="id">r1</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>. <br/>
<span class="kwd">Notation</span> "♯<span class="id">flatten</span>( <span class="id">d</span> )" := (<span class="id">AXUnop</span> <span class="id">AFlatten</span> <span class="id">d</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nraext_scope</span>.                   <br/>
<span class="kwd">Notation</span> "‵{| <span class="id">d</span> |}" := ((<span class="id">AXUnop</span> <span class="id">AColl</span>) <span class="id">d</span>)  (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nraext_scope</span>.                        <br/>
<span class="kwd">Notation</span> "‵[| ( <span class="id">s</span> , <span class="id">r</span> ) |]" := ((<span class="id">AXUnop</span> (<span class="id">ARec</span> <span class="id">s</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nraext_scope</span>.              <br/>
<span class="kwd">Notation</span> "¬π[ <span class="id">s1</span> ]( <span class="id">r</span> )" := ((<span class="id">AXUnop</span> (<span class="id">ARecRemove</span> <span class="id">s1</span>)) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 50) : <span class="id">nraext_scope</span>.          <br/>
<span class="kwd">Notation</span> "<span class="id">p</span> · <span class="id">r</span>" := ((<span class="id">AXUnop</span> (<span class="id">ADot</span> <span class="id">r</span>)) <span class="id">p</span>) (<span class="id">left</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 40): <span class="id">nraext_scope</span>.      <br/>
<br/>
<span class="kwd">Notation</span> "χ⟨ <span class="id">p</span> ⟩( <span class="id">r</span> )" := (<span class="id">AXMap</span> <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                              <br/>
<span class="kwd">Notation</span> "⋈ᵈ⟨ <span class="id">e2</span> ⟩( <span class="id">e1</span> )" := (<span class="id">AXMapConcat</span> <span class="id">e2</span> <span class="id">e1</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                   <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> × <span class="id">r2</span>" := (<span class="id">AXProduct</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.       <br/>
<span class="kwd">Notation</span> "σ⟨ <span class="id">p</span> ⟩( <span class="id">r</span> )" := (<span class="id">AXSelect</span> <span class="id">p</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                           <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ∥ <span class="id">r2</span>" := (<span class="id">AXDefault</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 70): <span class="id">nraext_scope</span>.       <br/>
<span class="kwd">Notation</span> "<span class="id">r1</span> ◯ <span class="id">r2</span>" := (<span class="id">AXApp</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="id">right</span> <span class="id">associativity</span>, <span class="tactic">at</span> <span class="id">level</span> 60): <span class="id">nraext_scope</span>.           <br/>
<br/>
<span class="kwd">Notation</span> "⋈⟨ <span class="id">p</span> ⟩( <span class="id">r1</span> , <span class="id">r2</span> )" := (<span class="id">AXJoin</span> <span class="id">p</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                     <br/>
<span class="kwd">Notation</span> "⋉⟨ <span class="id">p</span> ⟩( <span class="id">r1</span> , <span class="id">r2</span> )" := (<span class="id">AXSemiJoin</span> <span class="id">p</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                <br/>
<span class="kwd">Notation</span> "▷⟨ <span class="id">p</span> ⟩( <span class="id">r1</span> , <span class="id">r2</span> )" := (<span class="id">AXAntiJoin</span> <span class="id">p</span> <span class="id">r1</span> <span class="id">r2</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.                <br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">p</span> ⌈ <span class="id">a</span> ⌋" := (<span class="id">AXMapToRec</span> <span class="id">a</span> <span class="id">p</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<span class="kwd">Notation</span> "χ⌈ <span class="id">a</span> ⌋⟨ <span class="id">p1</span> ⟩( <span class="id">p2</span> )" := (<span class="id">AXMapAddRec</span> <span class="id">a</span> <span class="id">p1</span> <span class="id">p2</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "Π[ ]( <span class="id">r</span> )" := (<span class="id">AXProject</span> <span class="id">nil</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<span class="kwd">Notation</span> "Π[ <span class="id">x</span> ]( <span class="id">r</span> )" := (<span class="id">AXProject</span> (<span class="id">cons</span> <span class="id">x</span> <span class="id">nil</span>) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<span class="kwd">Notation</span> "Π[ <span class="id">x</span> , .. , <span class="id">y</span> ]( <span class="id">r</span> )" := (<span class="id">AXProject</span> (<span class="id">cons</span> <span class="id">x</span> .. (<span class="id">cons</span> <span class="id">y</span> <span class="id">nil</span>) ..) <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "¬Π[ <span class="id">s1</span> ]( <span class="id">r</span> )" := (<span class="id">AXProjectRemove</span> <span class="id">s1</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "ρ[ <span class="id">s1</span> ↦ <span class="id">s2</span> ]( <span class="id">r</span> )" := (<span class="id">AXMapRename</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "μ[ <span class="id">s1</span> ]( <span class="id">r</span> )" := (<span class="id">AXUnnestOne</span> <span class="id">s1</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<span class="kwd">Notation</span> "μ[ <span class="id">s1</span> ][ <span class="id">s2</span> ]( <span class="id">r</span> )" := (<span class="id">AXUnnestTwo</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "Γ[ <span class="id">g</span> ][ <span class="id">s1</span> ]( <span class="id">r</span> )" := (<span class="id">AXGroupBy</span> <span class="id">g</span> <span class="id">s1</span> <span class="id">r</span>) (<span class="tactic">at</span> <span class="id">level</span> 70) : <span class="id">nraext_scope</span>.<br/>
<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string_scope</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">nraext_cases</span>" <span class="id">tactic</span>(<span class="id">first</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span>;<br/>
&nbsp;&nbsp;[ <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXID</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXConst</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXBinop</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXUnop</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXMap</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXMapConcat</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXProduct</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXSelect</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXDefault</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXEither</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXEitherConcat</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXApp</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXGetConstant</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXJoin</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXSemiJoin</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXAntiJoin</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXMapToRec</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXRProject</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXProject</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXProjectRemove</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXMapRename</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXUnnestOne</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXUnnestTwo</span>"<br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">AXGroupBy</span>" ].<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
