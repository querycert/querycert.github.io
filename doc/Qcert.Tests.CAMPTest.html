
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.Tests.CAMPTest</title>
<meta name="description" content="Documentation of Coq module Qcert.Tests.CAMPTest" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.Tests.CAMPTest</h1>
<div class="coq">
<br/>
<h1> Examples manually translated from arl (JRules) </h1>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">BrandRelation</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ZArith</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">Z_scope</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">String</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">List</span>.<br/>
<span class="kwd">Import</span> <span class="id">ListNotations</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">CAMPTest</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">BasicSystem</span> <span class="id">CAMPRuntime</span> <span class="id">CAMPRuleRuntime</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">camp_scope</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">TrivialModel</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">exampleWM</span> : <span class="id">list</span> <span class="id">data</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= [ <span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") (<span class="id">drec</span> [("<span class="id">cid</span>",<span class="id">dnat</span> 123); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">John</span> <span class="id">Doe</span>"); ("<span class="id">age</span>",<span class="id">dnat</span> 32)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") (<span class="id">drec</span> [("<span class="id">cid</span>",<span class="id">dnat</span> 124); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Jane</span> <span class="id">Doe</span>"); ("<span class="id">age</span>",<span class="id">dnat</span> 32)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") (<span class="id">drec</span> [("<span class="id">cid</span>",<span class="id">dnat</span> 125); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Jim</span> <span class="id">Does</span>"); ("<span class="id">age</span>",<span class="id">dnat</span> 34)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") (<span class="id">drec</span> [("<span class="id">cid</span>",<span class="id">dnat</span> 126); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Jill</span> <span class="id">Does</span>"); ("<span class="id">age</span>",<span class="id">dnat</span> 32)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") (<span class="id">drec</span> [("<span class="id">cid</span>",<span class="id">dnat</span> 127); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Joan</span> <span class="id">Doe</span>"); ("<span class="id">age</span>",<span class="id">dnat</span> 34)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") (<span class="id">drec</span> [("<span class="id">cid</span>",<span class="id">dnat</span> 128); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">James</span> <span class="id">Do</span>"); ("<span class="id">age</span>",<span class="id">dnat</span> 35)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") (<span class="id">drec</span> [("<span class="id">pid</span>",<span class="id">dnat</span> 1); ("<span class="id">cid</span>",<span class="id">dnat</span> 123); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Tomatoe</span>"); ("<span class="id">quantity</span>",<span class="id">dnat</span> 3)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") (<span class="id">drec</span> [("<span class="id">pid</span>",<span class="id">dnat</span> 2); ("<span class="id">cid</span>",<span class="id">dnat</span> 123); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Potatoe</span>"); ("<span class="id">quantity</span>",<span class="id">dnat</span> 1)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") (<span class="id">drec</span> [("<span class="id">pid</span>",<span class="id">dnat</span> 3); ("<span class="id">cid</span>",<span class="id">dnat</span> 125); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Stiletto</span>"); ("<span class="id">quantity</span>",<span class="id">dnat</span> 64)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") (<span class="id">drec</span> [("<span class="id">pid</span>",<span class="id">dnat</span> 4); ("<span class="id">cid</span>",<span class="id">dnat</span> 126); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Libretto</span>"); ("<span class="id">quantity</span>",<span class="id">dnat</span> 62)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") (<span class="id">drec</span> [("<span class="id">pid</span>",<span class="id">dnat</span> 5); ("<span class="id">cid</span>",<span class="id">dnat</span> 128); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Dough</span>"); ("<span class="id">quantity</span>",<span class="id">dnat</span> 4)]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dbrand</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") (<span class="id">drec</span> [("<span class="id">pid</span>",<span class="id">dnat</span> 6); ("<span class="id">cid</span>",<span class="id">dnat</span> 128); ("<span class="id">name</span>",<span class="id">dstring</span> "<span class="id">Croissant</span>"); ("<span class="id">quantity</span>",<span class="id">dnat</span> 2)]) ].<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">CPRModel</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">Customer</span>","<span class="id">Entity</span>")::("<span class="id">Purchase</span>","<span class="id">Entity</span>")::<span class="id">nil</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">CPRModel_relation</span> : <span class="id">brand_relation</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id">mkBrand_relation</span> <span class="id">CPRModel</span> (<span class="id">eq_refl</span> <span class="id">_</span>) (<span class="id">eq_refl</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R1</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> ("<span class="id">age</span>" !#-&gt; #<span class="id">_</span> ≐ ‵32))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Customer</span> =" +<span class="id">s</span>+ <span class="id">withVar</span> "<span class="id">c</span>" ("<span class="id">name</span>" !#-&gt; #<span class="id">_</span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R1_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R1</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R1_expected</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customer</span> =<span class="id">Jill</span> <span class="id">Does</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span> =<span class="id">Jane</span> <span class="id">Doe</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span> =<span class="id">John</span> <span class="id">Doe</span>"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">CompEnv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R1_verify</span> : <span class="id">validate_success</span> <span class="id">R1_result</span> <span class="id">R1_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3303')">Proof.</div>
<div class="proofscript" id="proof3303">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R2</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_when</span> ("<span class="id">c1</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> <span class="id">paccept</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_when</span> ("<span class="id">c2</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> ("<span class="id">age</span>"!#-&gt; #<span class="id">_</span> #= <span class="id">withVar</span> "<span class="id">c1</span>" ("<span class="id">age</span>" !#-&gt; …)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;;  <span class="id">rule_return</span> (‵"<span class="id">Customer</span>: " +<span class="id">s</span>+ <span class="id">withVar</span> "<span class="id">c1</span>" ("<span class="id">name</span>" !#-&gt; …)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ #`" <span class="id">and</span>: "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">withVar</span> "<span class="id">c2</span>" ("<span class="id">name</span>" !#-&gt; …)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">withVar</span> "<span class="id">c1</span>" (<span class="id">toString</span> ("<span class="id">age</span>" !#-&gt; …))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R2_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R2</span> <span class="id">exampleWM</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R2_expected</span> := <span class="id">map</span> <span class="id">dconst</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customer</span>: <span class="id">James</span> <span class="id">Do</span> <span class="id">and</span>: <span class="id">James</span> <span class="id">Do</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 35";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jim</span> <span class="id">Does</span> <span class="id">and</span>: <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 34";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 34";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">Jim</span> <span class="id">Does</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 34";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">and</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">and</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">and</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jim</span> <span class="id">Does</span> <span class="id">and</span>: <span class="id">Jim</span> <span class="id">Does</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 34";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">and</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">have</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span>: 32"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R2_verify</span> : <span class="id">validate_success</span> <span class="id">R2_result</span> <span class="id">R2_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3304')">Proof.</div>
<div class="proofscript" id="proof3304">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R3</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> <span class="id">paccept</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_when</span> ("<span class="id">p</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> ("<span class="id">cid</span>" !#-&gt; … ≐ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">cid</span>"↓…)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;;  <span class="id">rule_return</span> (‵"<span class="id">Customer</span>: " +<span class="id">s</span>+ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">name</span>"↓…)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">made</span> <span class="id">purchase</span>:"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">withBrandedVar</span> "<span class="id">p</span>" ("<span class="id">name</span>"↓…)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R3_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R3</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R3_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customer</span>: <span class="id">James</span> <span class="id">Do</span> <span class="id">made</span> <span class="id">purchase</span>:<span class="id">Croissant</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">James</span> <span class="id">Do</span> <span class="id">made</span> <span class="id">purchase</span>:<span class="id">Dough</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">made</span> <span class="id">purchase</span>:<span class="id">Libretto</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jim</span> <span class="id">Does</span> <span class="id">made</span> <span class="id">purchase</span>:<span class="id">Stiletto</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">made</span> <span class="id">purchase</span>:<span class="id">Potatoe</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">made</span> <span class="id">purchase</span>:<span class="id">Tomatoe</span>"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R3_verify</span> : <span class="id">validate_success</span> <span class="id">R3_result</span> <span class="id">R3_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3305')">Proof.</div>
<div class="proofscript" id="proof3305">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R4</span> :=  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> <span class="id">paccept</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_not</span> ("<span class="id">p</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> ("<span class="id">cid</span>" !#-&gt; … ≐ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">cid</span>"↓…)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Customer</span>: " +<span class="id">s</span>+ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">name</span>"↓…)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">didn</span>'<span class="id">t</span> <span class="id">make</span> <span class="id">a</span> <span class="id">purchase</span>").<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R4_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R4</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R4_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customer</span>: <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">didn</span>'<span class="id">t</span> <span class="id">make</span> <span class="id">a</span> <span class="id">purchase</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">didn</span>'<span class="id">t</span> <span class="id">make</span> <span class="id">a</span> <span class="id">purchase</span>"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R4_verify</span> : <span class="id">validate_success</span> <span class="id">R4_result</span> <span class="id">R4_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3306')">Proof.</div>
<div class="proofscript" id="proof3306">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R5</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_global</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">cs</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> ("<span class="id">age</span>" !#-&gt; … ≐ ‵32)))             <span class="id">DO</span> <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">name</span>"↓…))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Customers</span> <span class="kwd">with</span> <span class="id">age</span> 32: "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">lookup</span> "<span class="id">cs</span>")).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R5_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R5</span> <span class="id">exampleWM</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R5_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customers</span> <span class="kwd">with</span> <span class="id">age</span> 32: 3"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R5_verify</span> : <span class="id">validate_success</span> <span class="id">R5_result</span> <span class="id">R5_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3307')">Proof.</div>
<div class="proofscript" id="proof3307">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R6</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_global</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">ps</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> ("<span class="id">name</span>" !#-&gt; … ≐ ‵"<span class="id">John</span> <span class="id">Doe</span>"))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;; <span class="id">rule_when</span> ("<span class="id">p</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span>  ("<span class="id">cid</span>" !#-&gt; … ≐ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">cid</span>"↓…))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withBrandedVar</span> "<span class="id">p</span>" ("<span class="id">name</span>"↓…))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Nb</span> <span class="id">of</span> <span class="id">John</span> <span class="id">Doe</span>'<span class="id">s</span> <span class="id">purchases</span>: " +<span class="id">s</span>+ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">toString</span> (<span class="id">lookup</span> "<span class="id">ps</span>"))).<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R6_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R6</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R6_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Nb</span> <span class="id">of</span> <span class="id">John</span> <span class="id">Doe</span>'<span class="id">s</span> <span class="id">purchases</span>: 2"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R6_verify</span> : <span class="id">validate_success</span> <span class="id">R6_result</span> <span class="id">R6_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3308')">Proof.</div>
<div class="proofscript" id="proof3308">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R7</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> <span class="id">paccept</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_global</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">cs</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rule_when</span> ("<span class="id">c2</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> ("<span class="id">age</span>" !#-&gt; … ≐ (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">age</span>"↓…)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">lookup</span> "<span class="id">c2</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Customer</span>: "  +<span class="id">s</span>+ (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">name</span>"↓…)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> ("<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">age</span>"↓…))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵") <span class="kwd">as</span> "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">lookup</span> "<span class="id">cs</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">other</span> <span class="id">Customers</span>").<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R7_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R7</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R7_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customer</span>: <span class="id">James</span> <span class="id">Do</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (35) <span class="kwd">as</span> 1 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (34) <span class="kwd">as</span> 2 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (32) <span class="kwd">as</span> 3 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jim</span> <span class="id">Does</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (34) <span class="kwd">as</span> 2 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (32) <span class="kwd">as</span> 3 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (32) <span class="kwd">as</span> 3 <span class="id">other</span> <span class="id">Customers</span>"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R7_verify</span> : <span class="id">validate_success</span> <span class="id">R7_result</span> <span class="id">R7_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3309')">Proof.</div>
<div class="proofscript" id="proof3309">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R8</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> <span class="id">paccept</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_global</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">cs</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rule_when</span> ("<span class="id">c2</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> ("<span class="id">age</span>" !#-&gt; … ≐ (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">age</span>"↓…)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withVar</span> "<span class="id">c2</span>" …)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_not</span> ((<span class="id">lookup</span> "<span class="id">cs</span>") ≐ ‵1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Customer</span>: "  +<span class="id">s</span>+ (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">name</span>"↓…)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> ("<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">age</span>"↓…))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵") <span class="kwd">as</span> "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">lookup</span> "<span class="id">cs</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">other</span> <span class="id">Customers</span>").<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R8_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R8</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R8_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customer</span>: <span class="id">Jim</span> <span class="id">Does</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (34) <span class="kwd">as</span> 2 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (34) <span class="kwd">as</span> 2 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jill</span> <span class="id">Does</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (32) <span class="kwd">as</span> 3 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">John</span> <span class="id">Doe</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (32) <span class="kwd">as</span> 3 <span class="id">other</span> <span class="id">Customers</span>";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span>: <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">has</span> <span class="id">the</span> <span class="id">same</span> <span class="id">age</span> (32) <span class="kwd">as</span> 3 <span class="id">other</span> <span class="id">Customers</span>"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R8_verify</span> : <span class="id">validate_success</span> <span class="id">R8_result</span> <span class="id">R8_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3310')">Proof.</div>
<div class="proofscript" id="proof3310">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R9</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> <span class="id">paccept</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_global</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">pu</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rule_when</span> ("<span class="id">p</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> ("<span class="id">cid</span>" !#-&gt; … ≐ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">cid</span>"↓…))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">AIdOp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withBrandedVar</span> "<span class="id">p</span>" ("<span class="id">name</span>"↓…))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Customer</span> : "  +<span class="id">s</span>+ (<span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">name</span>"↓…)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" <span class="id">purchased</span>: "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">lookup</span> "<span class="id">pu</span>")).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R9_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R9</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R9_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;["<span class="id">Customer</span> : <span class="id">James</span> <span class="id">Do</span> <span class="id">purchased</span>: [<span class="id">Croissant</span>, <span class="id">Dough</span>]";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span> : <span class="id">Joan</span> <span class="id">Doe</span> <span class="id">purchased</span>: []";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span> : <span class="id">Jill</span> <span class="id">Does</span> <span class="id">purchased</span>: [<span class="id">Libretto</span>]";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span> : <span class="id">Jim</span> <span class="id">Does</span> <span class="id">purchased</span>: [<span class="id">Stiletto</span>]";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span> : <span class="id">Jane</span> <span class="id">Doe</span> <span class="id">purchased</span>: []";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"<span class="id">Customer</span> : <span class="id">John</span> <span class="id">Doe</span> <span class="id">purchased</span>: [<span class="id">Potatoe</span>, <span class="id">Tomatoe</span>]"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R9_verify</span> : <span class="id">validate_success</span> <span class="id">R9_result</span> <span class="id">R9_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3311')">Proof.</div>
<div class="proofscript" id="proof3311">
 <span class="id">fast_refl</span>. Qed.</div>
&nbsp;&nbsp;<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R10</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_global</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">total</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(   <span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <span class="id">WHERE</span> <span class="id">paccept</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;; <span class="id">rule_global</span> ("<span class="id">pu</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rule_when</span> ("<span class="id">p</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> ("<span class="id">cid</span>" !#-&gt; … ≐ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">cid</span>"↓…))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">AIdOp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withBrandedVar</span> "<span class="id">p</span>" ("<span class="id">name</span>"↓…))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withVar</span> "<span class="id">pu</span>" …)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Total</span> <span class="id">purchases</span> <span class="id">are</span> : " <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">lookup</span> "<span class="id">total</span>")).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R10_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R10</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R10_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ "<span class="id">Total</span> <span class="id">purchases</span> <span class="id">are</span> : 6"].<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R10_verify</span> : <span class="id">validate_success</span> <span class="id">R10_result</span> <span class="id">R10_expected</span> = <span class="id">true</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3312')">Proof.</div>
<div class="proofscript" id="proof3312">
 <span class="id">fast_refl</span>. Qed.</div>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R11</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rule_global</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("<span class="id">total</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(   <span class="id">rule_when</span> ("<span class="id">c</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Customer</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> (<span class="id">passert</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">pbinop</span> <span class="id">ALe</span> ("<span class="id">age</span>"↓…) ‵34))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;; <span class="id">rule_global</span> ("<span class="id">pu</span>" <span class="id">IS</span> <span class="id">AGGREGATE</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rule_when</span> ("<span class="id">p</span>" <span class="id">INSTANCEOF</span> (<span class="id">singleton</span> "<span class="id">Purchase</span>") <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">WHERE</span> ("<span class="id">cid</span>" !#-&gt; … ≐ <span class="id">withBrandedVar</span> "<span class="id">c</span>" ("<span class="id">cid</span>"↓…))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">ACount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withBrandedVar</span> "<span class="id">p</span>" …)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">DO</span> <span class="id">AIdOp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">OVER</span> (<span class="id">withVar</span> "<span class="id">pu</span>" …)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">FLATTEN</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;; <span class="id">rule_return</span> (‵"<span class="id">Average</span> <span class="id">nb</span> <span class="id">purchases</span> <span class="kwd">for</span> <span class="id">customers</span> <span class="id">below</span> 34 <span class="id">is</span> : " <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">punop</span> <span class="id">ASum</span> (<span class="id">lookup</span> "<span class="id">total</span>"))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ ‵" / " <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<span class="id">s</span>+ <span class="id">toString</span> (<span class="id">punop</span> <span class="id">ACount</span> (<span class="id">lookup</span> "<span class="id">total</span>")))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R11_result</span> := <span class="id">eval_camp_rule</span> <span class="id">CPRModel</span> <span class="id">R11</span> <span class="id">exampleWM</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Example</span> <span class="id">R11_expected</span> := <span class="id">map</span> <span class="id">dconst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ "<span class="id">Average</span> <span class="id">nb</span> <span class="id">purchases</span> <span class="kwd">for</span> <span class="id">customers</span> <span class="id">below</span> 34 <span class="id">is</span> : 0.8 "].<br/>
<br/>
<br/>
<span class="kwd">End</span> <span class="id">CAMPTest</span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
