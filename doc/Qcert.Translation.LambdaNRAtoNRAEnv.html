
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.Translation.LambdaNRAtoNRAEnv</title>
<meta name="description" content="Documentation of Coq module Qcert.Translation.LambdaNRAtoNRAEnv" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.Translation.LambdaNRAtoNRAEnv</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">String</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">List</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Arith</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">EquivDec</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Morphisms</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">BasicRuntime</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">LambdaNRAtoNRAEnv</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">LambdaNRA</span> <span class="id">NRAEnvRuntime</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">fruntime</span>:<span class="id">foreign_runtime</span>}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id">lambda_nra_to_nraenv</span> (<span class="id">op</span>:<span class="id">lambda_nra</span>) : <span class="id">nraenv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">op</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRAVar</span> <span class="id">x</span> =&gt; <span class="id">NRAEnvUnop</span> (<span class="id">ADot</span> <span class="id">x</span>) <span class="id">NRAEnvEnv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRATable</span> <span class="id">x</span> =&gt; <span class="id">NRAEnvGetConstant</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRAConst</span> <span class="id">d</span> =&gt; <span class="id">NRAEnvConst</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRABinop</span> <span class="id">b</span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id">NRAEnvBinop</span> <span class="id">b</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRAUnop</span> <span class="id">u</span> <span class="id">op1</span> =&gt; <span class="id">NRAEnvUnop</span> <span class="id">u</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRAMap</span> <span class="id">lop1</span> <span class="id">op2</span> =&gt; <span class="id">NRAEnvMap</span> (<span class="id">nraenv_of_lnra_lambda</span> <span class="id">lop1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRAMapConcat</span> <span class="id">lop1</span> <span class="id">op2</span> =&gt; <span class="id">NRAEnvMapConcat</span> (<span class="id">nraenv_of_lnra_lambda</span> <span class="id">lop1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRAProduct</span> <span class="id">op1</span> <span class="id">op2</span> =&gt; <span class="id">NRAEnvProduct</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRAFilter</span> <span class="id">lop1</span> <span class="id">op2</span> =&gt; <span class="id">NRAEnvSelect</span> (<span class="id">nraenv_of_lnra_lambda</span> <span class="id">lop1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">with</span> <span class="id">nraenv_of_lnra_lambda</span> (<span class="id">lop</span>:<span class="id">lnra_lambda</span>) : <span class="id">nraenv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">lop</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">LNRALambda</span> <span class="id">x</span> <span class="id">op</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">NRAEnvAppEnv</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op</span>) (<span class="id">NRAEnvBinop</span> <span class="id">AConcat</span> <span class="id">NRAEnvEnv</span> (<span class="id">NRAEnvUnop</span> (<span class="id">ARec</span> <span class="id">x</span>) <span class="id">NRAEnvID</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_var_eq</span> <span class="id">x</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRAVar</span> <span class="id">x</span>) = <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">NRAEnvUnop</span> (<span class="id">ADot</span> <span class="id">x</span>) <span class="id">NRAEnvEnv</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2981')">Proof.</div>
<div class="proofscript" id="proof2981">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_table_eq</span> <span class="id">x</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRATable</span> <span class="id">x</span>) = <span class="id">NRAEnvGetConstant</span> <span class="id">x</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2982')">Proof.</div>
<div class="proofscript" id="proof2982">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_const_eq</span> <span class="id">d</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRAConst</span> <span class="id">d</span>) = <span class="id">NRAEnvConst</span> <span class="id">d</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2983')">Proof.</div>
<div class="proofscript" id="proof2983">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_binop_eq</span> <span class="id">b</span> <span class="id">op1</span> <span class="id">op2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRABinop</span> <span class="id">b</span> <span class="id">op1</span> <span class="id">op2</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">NRAEnvBinop</span> <span class="id">b</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2984')">Proof.</div>
<div class="proofscript" id="proof2984">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_unop_eq</span> <span class="id">u</span> <span class="id">op</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRAUnop</span> <span class="id">u</span> <span class="id">op</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">NRAEnvUnop</span> <span class="id">u</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2985')">Proof.</div>
<div class="proofscript" id="proof2985">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_map_eq</span> <span class="id">lop1</span> <span class="id">op2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRAMap</span> <span class="id">lop1</span> <span class="id">op2</span>) = <span class="id">NRAEnvMap</span> (<span class="id">nraenv_of_lnra_lambda</span> <span class="id">lop1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2986')">Proof.</div>
<div class="proofscript" id="proof2986">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_map_concat_eq</span> <span class="id">lop1</span> <span class="id">op2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRAMapConcat</span> <span class="id">lop1</span> <span class="id">op2</span>) = <span class="id">NRAEnvMapConcat</span> (<span class="id">nraenv_of_lnra_lambda</span> <span class="id">lop1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2987')">Proof.</div>
<div class="proofscript" id="proof2987">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_product_eq</span> <span class="id">op1</span> <span class="id">op2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRAProduct</span> <span class="id">op1</span> <span class="id">op2</span>) = <span class="id">NRAEnvProduct</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2988')">Proof.</div>
<div class="proofscript" id="proof2988">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_filter_eq</span> <span class="id">lop1</span> <span class="id">op2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> (<span class="id">LNRAFilter</span> <span class="id">lop1</span> <span class="id">op2</span>) = <span class="id">NRAEnvSelect</span> (<span class="id">nraenv_of_lnra_lambda</span> <span class="id">lop1</span>) (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2989')">Proof.</div>
<div class="proofscript" id="proof2989">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span>  <span class="id">lambda_nra_to_nraenv_lambda_eq</span> <span class="id">x</span> <span class="id">op</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_of_lnra_lambda</span> (<span class="id">LNRALambda</span> <span class="id">x</span> <span class="id">op</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">NRAEnvAppEnv</span> (<span class="id">lambda_nra_to_nraenv</span> <span class="id">op</span>) (<span class="id">NRAEnvBinop</span> <span class="id">AConcat</span> <span class="id">NRAEnvEnv</span> (<span class="id">NRAEnvUnop</span> (<span class="id">ARec</span> <span class="id">x</span>) <span class="id">NRAEnvID</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2990')">Proof.</div>
<div class="proofscript" id="proof2990">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_var_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_table_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_const_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_binop_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_unop_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_map_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_map_concat_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_product_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_filter_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_lambda_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id">brand_relation_t</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id">Translation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">global_env</span>:<span class="id">bindings</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">lambda_nra_to_nraenv_never_uses_id</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">env</span>:<span class="id">bindings</span>, <span class="kwd">forall</span> <span class="id">q</span>:<span class="id">lambda_nra</span>, <span class="kwd">forall</span> <span class="id">d1</span> <span class="id">d2</span>:<span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_eval</span> <span class="id">h</span> <span class="id">global_env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lambda_nra_to_nraenv</span> <span class="id">q</span>) (<span class="id">drec</span> <span class="id">env</span>) <span class="id">d1</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_eval</span> <span class="id">h</span> <span class="id">global_env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lambda_nra_to_nraenv</span> <span class="id">q</span>) (<span class="id">drec</span> <span class="id">env</span>) <span class="id">d2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2991')">Proof.</div>
<div class="proofscript" id="proof2991">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_cases</span> (<span class="tactic">induction</span> <span class="id">q</span>) <span class="id">Case</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">nraenv_eval</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">lambda_nra</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRABinop</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq1</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq2</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAUnop</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAMap</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq2</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAMapConcat</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq2</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAProduct</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq1</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq2</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAFilter</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq2</span> <span class="id">d1</span> <span class="id">d2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
<div class="doc">Evaluation for lambda nra is the same as evaluation for translated expression to NRAEnv
      - Note that only the global and local environments matter.
        The 'input value' for NRA (d in the theorem) is not used on the LambdaNRA side.
        This is consistent with the previous theorem showing that any 'd' does not matter.
     </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id">lambda_nra_to_nraenv_correct</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">q</span>:<span class="id">lambda_nra</span>, <span class="kwd">forall</span> <span class="id">env</span>:<span class="id">bindings</span>, <span class="kwd">forall</span> <span class="id">d</span>:<span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_eval</span> <span class="id">h</span> <span class="id">global_env</span> <span class="id">env</span> <span class="id">q</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_eval</span> <span class="id">h</span> <span class="id">global_env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lambda_nra_to_nraenv</span> <span class="id">q</span>) (<span class="id">drec</span> <span class="id">env</span>) <span class="id">d</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2992')">Proof.</div>
<div class="proofscript" id="proof2992">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_cases</span> (<span class="tactic">induction</span> <span class="id">q</span>) <span class="id">Case</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">nraenv_eval</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">lambda_nra</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRABinop</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq1</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq2</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAUnop</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAMap</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id">IHq2</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">olift_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_oncoll_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">rmap_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">lambda_nra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq1</span> <span class="id">_</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAMapConcat</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id">IHq2</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">olift_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_oncoll_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">rmap_concat_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">lambda_nra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq1</span> <span class="id">_</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAProduct</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq1</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq2</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAFilter</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id">IHq2</span> <span class="id">_</span> <span class="id">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">olift_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_oncoll_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_filter_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">lambda_nra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHq1</span> <span class="id">_</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id">nraenv_of_lnra_lambda_correct</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">env</span>:<span class="id">bindings</span>, <span class="kwd">forall</span> <span class="id">lop</span>:<span class="id">lnra_lambda</span>, <span class="kwd">forall</span> <span class="id">d</span>:<span class="id">data</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lnra_lambda_eval</span> <span class="id">h</span> <span class="id">global_env</span> <span class="id">env</span> <span class="id">lop</span> <span class="id">d</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_eval</span> <span class="id">h</span> <span class="id">global_env</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_of_lnra_lambda</span> <span class="id">lop</span>) (<span class="id">drec</span> <span class="id">env</span>) <span class="id">d</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2993')">Proof.</div>
<div class="proofscript" id="proof2993">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">lop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">env</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_cases</span> (<span class="tactic">induction</span> <span class="id">l</span>) <span class="id">Case</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">nraenv_eval</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">lambda_nra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAVar</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">edot</span>, <span class="id">rec_concat_sort</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">assoc_lookupr_drec_sort</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRATable</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">edot</span>, <span class="id">rec_concat_sort</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAConst</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRABinop</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHl1</span>, &lt;- <span class="id">IHl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAUnop</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAMap</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">olift_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_oncoll_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">rmap_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">rec_sort_rec_sort_app1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAMapConcat</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">olift_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_oncoll_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">rmap_concat_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">rec_sort_rec_sort_app1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAProduct</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHl1</span>, &lt;- <span class="id">IHl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">Case</span> "<span class="id">LNRAFilter</span>"%<span class="id">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">olift_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_oncoll_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">lift_filter_ext</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">rec_sort_rec_sort_app1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">eval_nraenv_q</span> (<span class="id">Qe</span>:<span class="id">nraenv</span>) (<span class="id">input</span>:<span class="id">data</span>) : <span class="id">option</span> <span class="id">data</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_eval</span> <span class="id">h</span> <span class="id">global_env</span> <span class="id">Qe</span> (<span class="id">drec</span> <span class="id">nil</span>) <span class="id">input</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id">eval_nraenv_q_correct</span> (<span class="id">Q</span>:<span class="id">lambda_nra</span> -&gt; <span class="id">lambda_nra</span>) (<span class="id">input</span>:<span class="id">data</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lnra_lambda_eval_top</span> <span class="id">h</span> <span class="id">Q</span> <span class="id">global_env</span> <span class="id">input</span> = <span class="id">eval_nraenv_q</span> (<span class="id">nraenv_of_lnra_lambda</span> (<span class="id">q_to_lambda</span> <span class="id">Q</span>)) <span class="id">input</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2994')">Proof.</div>
<div class="proofscript" id="proof2994">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">lnra_lambda_eval_top</span>, <span class="id">eval_nraenv_q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">nraenv_of_lnra_lambda_correct</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Translation</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id">Top</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">lambda_nra_to_nraenv_top</span> (<span class="id">q</span>:<span class="id">lambda_nra</span>) : <span class="id">nraenv</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_to_nraenv</span> <span class="id">q</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id">lambda_nra_to_nraenv_top_correct</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">q</span>:<span class="id">lambda_nra</span>, <span class="kwd">forall</span> <span class="id">global_env</span>:<span class="id">bindings</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lambda_nra_eval_top</span> <span class="id">h</span> <span class="id">q</span> <span class="id">global_env</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_eval_top</span> <span class="id">h</span> (<span class="id">lambda_nra_to_nraenv_top</span> <span class="id">q</span>) <span class="id">global_env</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2995')">Proof.</div>
<div class="proofscript" id="proof2995">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">lambda_nra_to_nraenv_top</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">lambda_nra_eval_top</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">nraenv_eval_top</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">lambda_nra_to_nraenv_correct</span> (<span class="id">rec_sort</span> <span class="id">global_env</span>) <span class="id">q</span> <span class="id">nil</span> <span class="id">dunit</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id">Top</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">LambdaNRAtoNRAEnv</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_var_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_table_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_const_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_binop_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_unop_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_map_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_map_concat_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_product_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_filter_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Rewrite</span> @<span class="id">lambda_nra_to_nraenv_lambda_eq</span> : <span class="id">lambda_nra_to_nraenv</span>.<br/>
&nbsp;&nbsp;<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
