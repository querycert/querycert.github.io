
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.NNRC.Typing.TNNRCStratify</title>
<meta name="description" content="Documentation of Coq module Qcert.NNRC.Typing.TNNRCStratify" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.NNRC.Typing.TNNRCStratify</h1>
<div class="coq">
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html">Bool</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html">EquivDec</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html">Eqdep_dec</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Utils.Utils.html">Utils</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Data.DataSystem.html">DataSystem</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.cNNRC.cNNRCSystem.html">cNNRCSystem</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.NNRC.NNRCRuntime.html">NNRCRuntime</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.cNNRC.cNNRCTypes.html">cNNRCTypes</a></span>. <br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html">TNNRC</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TNNRCStratify">TNNRCStratify</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">m</span>:<span class="id"><a href="Qcert.Data.DataSystem.html#basic_model">basic_model</a></span>}.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="type_substs">type_substs</a></span> Γ<span class="id">c</span> (Γ:<span class="id"><a href="Qcert.Data.ModelTyping.TBindings.html#tbindings">tbindings</a></span>) (<span class="id">sdefs</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>*<span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>)) (τ<span class="id">defs</span>:<span class="id"><a href="Qcert.Data.ModelTyping.TBindings.html#tbindings">tbindings</a></span>) : <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">sdefs</span>, τ<span class="id">defs</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">v</span>₁, <span class="id">n</span>)::<span class="id">sdefs</span>', (<span class="id">v</span>₂, τ)::τ<span class="id">defs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">v</span>₁ = <span class="id">v</span>₂ /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">n</span> τ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">type_substs</span> Γ<span class="id">c</span> ((<span class="id">v</span>₂,τ)::Γ) <span class="id">sdefs</span>' τ<span class="id">defs</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="type_substs_domain_eq">type_substs_domain_eq</a></span> {Γ<span class="id">c</span>} {Γ:<span class="id"><a href="Qcert.Data.ModelTyping.TBindings.html#tbindings">tbindings</a></span>} {<span class="id">sdefs</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>*<span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>)} {τ<span class="id">defs</span>:<span class="id"><a href="Qcert.Data.ModelTyping.TBindings.html#tbindings">tbindings</a></span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs</span> τ<span class="id">defs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Assoc.html#domain">domain</a></span> <span class="id">sdefs</span> = <span class="id"><a href="Qcert.Utils.Assoc.html#domain">domain</a></span> τ<span class="id">defs</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3014')">Proof.</div>
<div class="proofscript" id="proof3014">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> τ<span class="id">defs</span> Γ .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sdefs</span>; <span class="tactic">destruct</span> τ<span class="id">defs</span>; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>; <span class="tactic">intros</span> Γ <span class="id">typ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="type_substs_app">type_substs_app</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> τ<span class="id">defs1</span> <span class="id">sdefs2</span> τ<span class="id">defs2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> τ<span class="id">defs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span>++Γ) <span class="id">sdefs2</span> τ<span class="id">defs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ (<span class="id">sdefs1</span>++<span class="id">sdefs2</span>) (τ<span class="id">defs1</span>++τ<span class="id">defs2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3015')">Proof.</div>
<div class="proofscript" id="proof3015">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs1</span> τ<span class="id">defs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sdefs1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs1</span> τ<span class="id">defs2</span> <span class="id">ts1</span> <span class="id">ts2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr_in</span> <span class="id">ts1</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">ts1</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ts1</span> <span class="kwd">as</span> [? [<span class="id">ts11</span> <span class="id">ts12</span>]]; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">trivial</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHsdefs1</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">ts2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span> <span class="kwd">in</span> <span class="id">ts2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">ts2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="stratify1_aux_preserves_types_fw">stratify1_aux_preserves_types_fw</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>} {<span class="id">required_kind</span>:<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcKind">nnrcKind</a></span>} {<span class="id">bound_vars</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>} {<span class="id">sdefs1</span> <span class="id">n</span> <span class="id">sdefs2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify1_aux">stratify1_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">sdefs1</span> = (<span class="id">n</span>,<span class="id">sdefs2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> τ<span class="id">defs1</span> Γ<span class="id">c</span> Γ  τ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> τ<span class="id">defs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ++ Γ) <span class="id">e</span> τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> τ<span class="id">defs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span> ++ Γ) <span class="id">n</span> τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3016')">Proof.</div>
<div class="proofscript" id="proof3016">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Opaque</span> <span class="id"><a href="Qcert.Utils.Fresh.html#fresh_var">fresh_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">required_kind</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">eqq</span>; <span class="id">invcs</span> <span class="id">eqq</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exists</span> (τ<span class="id">defs1</span>++((<span class="id"><a href="Qcert.Utils.Fresh.html#fresh_var">fresh_var</a></span> "<span class="id">stratify</span>" <span class="id">bound_vars</span>, τ)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_app">type_substs_app</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_app_distr">rev_app_distr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#lookup_app">lookup_app</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#equiv_dec">equiv_dec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.Utils.Fresh.html#fresh_var">fresh_var</a></span> "<span class="id">stratify</span>" <span class="id">bound_vars</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.Utils.Fresh.html#fresh_var">fresh_var</a></span> "<span class="id">stratify</span>" <span class="id">bound_vars</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> <span class="tactic">congruence</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exists</span> τ<span class="id">defs1</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">n</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>} {<span class="id">sdefs</span> τ<span class="id">defs</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ Γ<span class="id">c</span> Γ τ} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs</span> τ<span class="id">defs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs</span> ++ Γ) <span class="id">n</span> τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_from_vars">mk_expr_from_vars</a></span> (<span class="id">n</span>,<span class="id">sdefs</span>)) τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3017')">Proof.</div>
<div class="proofscript" id="proof3017">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_from_vars">mk_expr_from_vars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> τ<span class="id">defs</span> <span class="id">n</span> Γ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sdefs</span>; <span class="tactic">intros</span> τ<span class="id">defs</span> Γ; <span class="tactic">destruct</span> τ<span class="id">defs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">n</span> <span class="id">typs</span> <span class="id">typn</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span> <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [? <span class="id">n2</span>]; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [? τ2].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typs</span> <span class="kwd">as</span> [? [<span class="id">typn1</span> <span class="id">typs</span>]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span> <span class="kwd">in</span> <span class="id">typn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">typn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="stratify_aux_preserves_types_fw">stratify_aux_preserves_types_fw</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>) (<span class="id">required_kind</span>:<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcKind">nnrcKind</a></span>) (<span class="id">bound_vars</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>) <span class="id">n</span> <span class="id">sdefs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRCVars.html#nnrc_free_vars">nnrc_free_vars</a></span> <span class="id">e</span>) <span class="id">bound_vars</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> = (<span class="id">n</span>,<span class="id">sdefs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ<span class="id">c</span> Γ τ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">e</span> τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> τ<span class="id">defs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs</span> τ<span class="id">defs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs</span> ++ Γ) <span class="id">n</span> τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3018')">Proof.</div>
<div class="proofscript" id="proof3018">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#nnrc_core_type">nnrc_core_type</a></span> : <span class="id">qcert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">n</span> <span class="id">sdefs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">n</span> <span class="id">sdefs</span> <span class="id">inclb</span> <span class="id">eqq</span> Γ<span class="id">c</span> Γ τ <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;add&nbsp;this&nbsp;case&nbsp;to&nbsp;the&nbsp;nnrc_core_inverter&nbsp;Ltac&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq2</span>; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb1</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">typdefs1</span> <span class="id">typn1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">inclb2</span>':<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRCVars.html#nnrc_free_vars">nnrc_free_vars</a></span> <span class="id">e2</span>) (<span class="id"><a href="Qcert.Utils.Assoc.html#domain">domain</a></span> <span class="id">l</span> ++ <span class="id">bound_vars</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="kwd">in</span> *; <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>; <span class="id">qeauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">type2</span>':<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRC.html#nnrc_core_type">nnrc_core_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ++ Γ) (<span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base">nnrc_to_nnrc_base</a></span> <span class="id">e2</span>) τ₂).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_disjoint_env">nnrc_core_type_remove_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span>) Γ); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_rev_l">disjoint_rev_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typdefs1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_incl">disjoint_incl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb2</span>' <span class="id">eqq2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">type2</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typdefs2</span> <span class="id">typn2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (τ<span class="id">defs1</span> ++ τ<span class="id">defs2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_app">type_substs_app</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_app_distr">rev_app_distr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_disjoint_env">nnrc_core_type_remove_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span> )(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ++ Γ)); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_rev_l">disjoint_rev_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typdefs2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_incl">disjoint_incl</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq2</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_free_vars">stratify_aux_free_vars</a></span> <span class="id">eqq1</span> <span class="id">inclb1</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">eqf</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">typdefs1</span> <span class="id">typn1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> τ<span class="id">defs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_fw">stratify1_aux_preserves_types_fw</a></span> <span class="id">eqq</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e1</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb1</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">typdefs1</span> <span class="id">typn1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span> <span class="id">typdefs1</span> <span class="id">typn1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span>; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb2</span> <span class="id">eqq2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typdefs2</span> <span class="id">typn2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span> <span class="id">typdefs2</span> <span class="id">typn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb1</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">typdefs1</span> <span class="id">typn1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_fw">stratify1_aux_preserves_types_fw</a></span> <span class="id">eqq</span> τ<span class="id">defs1</span>); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span>; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb2</span> <span class="id">eqq2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typdefs2</span> <span class="id">typn2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> ((<span class="id">v</span>, τ₁)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ) Γ); <span class="tactic">simpl</span>; <span class="tactic">trivial</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span> <span class="id">typdefs2</span> <span class="id">typn2</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typdefs1</span>) <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_stratify_aux_free_vars">mk_expr_stratify_aux_free_vars</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>) <span class="id">inclb2</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">eqf</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">eqf</span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb2</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>; <span class="tactic">destruct</span> <span class="id">inclb2</span> <span class="kwd">as</span> [<span class="id">inclb2</span> <span class="id">inclb3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb1</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">typdefs1</span> <span class="id">typn1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_fw">stratify1_aux_preserves_types_fw</a></span> <span class="id">eqq</span> τ<span class="id">defs1</span>); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span>; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb2</span> <span class="id">eqq2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typdefs2</span> <span class="id">typn2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_disjoint_env">nnrc_core_type_remove_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ) Γ); <span class="tactic">simpl</span>; <span class="tactic">trivial</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span> <span class="id">typdefs2</span> <span class="id">typn2</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typdefs1</span>) <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_stratify_aux_free_vars">mk_expr_stratify_aux_free_vars</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">bound_vars</span>) <span class="id">inclb2</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">eqf</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">eqf</span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb2</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e3</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq3</span>; <span class="tactic">rewrite</span> <span class="id">eqq3</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe3</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb3</span> <span class="id">eqq3</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H6</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs3</span> [<span class="id">typdefs3</span> <span class="id">typn3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_disjoint_env">nnrc_core_type_remove_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ) Γ); <span class="tactic">simpl</span>; <span class="tactic">trivial</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span> <span class="id">typdefs3</span> <span class="id">typn3</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typdefs1</span>) <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_stratify_aux_free_vars">mk_expr_stratify_aux_free_vars</a></span> <span class="id">e3</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">bound_vars</span>) <span class="id">inclb3</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">eqf</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eqq3</span> <span class="kwd">in</span> <span class="id">eqf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">eqf</span> <span class="kwd">in</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb3</span> <span class="id">_</span> <span class="id">inn3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>; <span class="tactic">destruct</span> <span class="id">inclb2</span> <span class="kwd">as</span> [<span class="id">inclb2</span> <span class="id">inclb3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb1</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H6</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">typdefs1</span> <span class="id">typn1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_fw">stratify1_aux_preserves_types_fw</a></span> <span class="id">eqq</span> τ<span class="id">defs1</span>); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span>; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb2</span> <span class="id">eqq2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H7</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typdefs2</span> <span class="id">typn2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> ((<span class="id">v</span>,τ<span class="id">l</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ) Γ); <span class="tactic">simpl</span>; <span class="tactic">trivial</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span> <span class="id">typdefs2</span> <span class="id">typn2</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typdefs1</span>) <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_stratify_aux_free_vars">mk_expr_stratify_aux_free_vars</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>) <span class="id">inclb2</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">eqf</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">eqf</span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb2</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e3</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v0</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq3</span>; <span class="tactic">rewrite</span> <span class="id">eqq3</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe3</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb3</span> <span class="id">eqq3</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H8</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs3</span> [<span class="id">typdefs3</span> <span class="id">typn3</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> ((<span class="id">v0</span>,τ<span class="id">r</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ) Γ); <span class="tactic">simpl</span>; <span class="tactic">trivial</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span> <span class="id">typdefs3</span> <span class="id">typn3</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typdefs1</span>) <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_stratify_aux_free_vars">mk_expr_stratify_aux_free_vars</a></span> <span class="id">e3</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v0</span>::<span class="id">bound_vars</span>) <span class="id">inclb3</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">eqf</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">eqq3</span> <span class="kwd">in</span> <span class="id">eqf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">eqf</span> <span class="kwd">in</span> <span class="id">inn3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb3</span> <span class="id">_</span> <span class="id">inn3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">typ</span>':<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGroupBy">NNRCGroupBy</a></span> <span class="id">s</span> <span class="id">l</span> <span class="id">e</span>) τ)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#type_NNRCGroupBy_inv">type_NNRCGroupBy_inv</a></span> <span class="kwd">in</span> <span class="id">typ</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typ</span>' <span class="kwd">as</span> [? [? [? [? [<span class="id">subl</span> <span class="id">type</span>]]]]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHe</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">typdefs1</span> <span class="id">typn1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_fw">stratify1_aux_preserves_types_fw</a></span> <span class="id">eqq</span> τ<span class="id">defs1</span>); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#type_NNRCGroupBy">type_NNRCGroupBy</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mk_expr_from_vars_stratify_aux_preserves_types_fw">mk_expr_from_vars_stratify_aux_preserves_types_fw</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Γ<span class="id">c</span> Γ} (<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>) {τ} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">e</span> τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  (<span class="id">required_kind</span>:<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcKind">nnrcKind</a></span>) (<span class="id">bound_vars</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRCVars.html#nnrc_free_vars">nnrc_free_vars</a></span> <span class="id">e</span>) <span class="id">bound_vars</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_from_vars">mk_expr_from_vars</a></span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span>)) τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3019')">Proof.</div>
<div class="proofscript" id="proof3019">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">typ</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">inclb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify_aux_preserves_types_fw">stratify_aux_preserves_types_fw</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb</span> <span class="id">eqq</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [? [<span class="id">typs</span> <span class="id">typn</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_fw">mk_expr_from_vars_preserves_types_fw</a></span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="stratify_preserves_types_fw">stratify_preserves_types_fw</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Γ<span class="id">c</span> Γ} (<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>) {τ} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">e</span> τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify">stratify</a></span> <span class="id">e</span>) τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3020')">Proof.</div>
<div class="proofscript" id="proof3020">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_stratify_aux_preserves_types_fw">mk_expr_from_vars_stratify_aux_preserves_types_fw</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="type_substs_app_inv">type_substs_app_inv</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> τ<span class="id">defs1</span> <span class="id">sdefs2</span> τ<span class="id">defs2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ (<span class="id">sdefs1</span>++<span class="id">sdefs2</span>) (τ<span class="id">defs1</span>++τ<span class="id">defs2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">sdefs1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> τ<span class="id">defs1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> τ<span class="id">defs1</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span>++Γ) <span class="id">sdefs2</span> τ<span class="id">defs2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3021')">Proof.</div>
<div class="proofscript" id="proof3021">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs1</span> τ<span class="id">defs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sdefs1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs1</span> τ<span class="id">defs2</span> <span class="id">ts1</span> <span class="id">ts2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_destr</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ts1</span> <span class="kwd">as</span> [? [<span class="id">ts11</span> <span class="id">ts12</span>]]; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">ts2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHsdefs1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ts12</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">split</span>; <span class="tactic">trivial</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="type_substs_app_inv_ex">type_substs_app_inv_ex</a></span> {Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> <span class="id">sdefs2</span> τ<span class="id">defs</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ (<span class="id">sdefs1</span>++<span class="id">sdefs2</span>) τ<span class="id">defs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> τ<span class="id">defs1</span> τ<span class="id">defs2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;τ<span class="id">defs</span> = τ<span class="id">defs1</span> ++ τ<span class="id">defs2</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> τ<span class="id">defs1</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span>++Γ) <span class="id">sdefs2</span> τ<span class="id">defs2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3022')">Proof.</div>
<div class="proofscript" id="proof3022">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sdefs1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs</span> <span class="id">ts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, τ<span class="id">defs</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">ts</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ts</span> <span class="kwd">as</span> [? [<span class="id">ts11</span> <span class="id">ts12</span>]]; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHsdefs1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ts12</span>) <span class="kwd">as</span> [τ<span class="id">defs1</span> [τ<span class="id">defs2</span> [? [<span class="id">typs1</span> <span class="id">typs2</span>]]]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ((<span class="id">s</span>,<span class="id">r</span>)::τ<span class="id">defs1</span>), τ<span class="id">defs2</span>; <span class="tactic">simpl</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="stratify1_aux_preserves_types_bk">stratify1_aux_preserves_types_bk</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>} {<span class="id">required_kind</span>:<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcKind">nnrcKind</a></span>} {<span class="id">bound_vars</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>} {<span class="id">sdefs1</span> <span class="id">n</span> <span class="id">sdefs2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify1_aux">stratify1_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">sdefs1</span> = (<span class="id">n</span>,<span class="id">sdefs2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> τ<span class="id">defs2</span> Γ<span class="id">c</span> Γ  τ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs2</span> τ<span class="id">defs2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span> ++ Γ) <span class="id">n</span> τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> τ<span class="id">defs1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs1</span> τ<span class="id">defs1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ++ Γ) <span class="id">e</span> τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3023')">Proof.</div>
<div class="proofscript" id="proof3023">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Opaque</span> <span class="id"><a href="Qcert.Utils.Fresh.html#fresh_var">fresh_var</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">required_kind</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">eqq</span>; <span class="id">invcs</span> <span class="id">eqq</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">H</span>); <span class="tactic">intros</span> <span class="id">deq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_app">domain_app</a></span> <span class="kwd">in</span> <span class="id">deq</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">deq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">nnil</span>:τ<span class="id">defs2</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> τ<span class="id">defs2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">deq</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">deq</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_cons_not_nil">app_cons_not_nil</a></span> <span class="kwd">in</span> <span class="id">deq</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#exists_last">exists_last</a></span> <span class="id">nnil</span>) <span class="kwd">as</span> [τ<span class="id">defs2</span>' [[<span class="id">x</span> τ2] ?]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_app">domain_app</a></span> <span class="kwd">in</span> <span class="id">deq</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">deq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_inj_tail">app_inj_tail</a></span> <span class="kwd">in</span> <span class="id">deq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">deq</span> <span class="kwd">as</span> [<span class="id">deq</span> ?]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_app_inv">type_substs_app_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">typs1</span> <span class="id">typs2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> τ<span class="id">defs2</span>'; <span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">typs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_app_distr">rev_app_distr</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr_in</span> <span class="id">H2</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.Utils.Assoc.html#domain_length">domain_length</a></span>, <span class="id">deq</span>, <span class="id"><a href="Qcert.Utils.Assoc.html#domain_length">domain_length</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">n</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>} {<span class="id">sdefs</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ Γ<span class="id">c</span> Γ τ} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_from_vars">mk_expr_from_vars</a></span> (<span class="id">n</span>,<span class="id">sdefs</span>)) τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> τ<span class="id">defs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs</span> τ<span class="id">defs</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs</span> ++ Γ) <span class="id">n</span> τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3024')">Proof.</div>
<div class="proofscript" id="proof3024">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_from_vars">mk_expr_from_vars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">n</span> Γ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sdefs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">n</span> Γ <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsdefs</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHsdefs</span> <span class="kwd">as</span> [τ<span class="id">defs</span> [<span class="id">typs</span> <span class="id">typn</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ((<span class="id">v</span>,τ₁)::τ<span class="id">defs</span>); <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="stratify_aux_preserves_types_bk">stratify_aux_preserves_types_bk</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>) (<span class="id">required_kind</span>:<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcKind">nnrcKind</a></span>) (<span class="id">bound_vars</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>) <span class="id">n</span> <span class="id">sdefs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRCVars.html#nnrc_free_vars">nnrc_free_vars</a></span> <span class="id">e</span>) <span class="id">bound_vars</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> = (<span class="id">n</span>,<span class="id">sdefs</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> Γ<span class="id">c</span> Γ τ<span class="id">defs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs">type_substs</a></span> Γ<span class="id">c</span> Γ <span class="id">sdefs</span> τ<span class="id">defs</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> τ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs</span> ++ Γ) <span class="id">n</span> τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">e</span> τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3025')">Proof.</div>
<div class="proofscript" id="proof3025">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#nnrc_core_type">nnrc_core_type</a></span> : <span class="id">qcert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">n</span> <span class="id">sdefs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">n</span> <span class="id">sdefs</span> <span class="id">inclb</span> <span class="id">eqq</span> Γ<span class="id">c</span> Γ τ<span class="id">defs</span> <span class="id">typs</span> τ <span class="id">typn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ<span class="id">defs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ<span class="id">defs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> τ<span class="id">defs</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq2</span>; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">typn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_app_inv_ex">type_substs_app_inv_ex</a></span> <span class="kwd">in</span> <span class="id">typs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typs</span> <span class="kwd">as</span> [τ<span class="id">defs1</span> [τ<span class="id">defs2</span> [? [<span class="id">typs1</span> <span class="id">typs2</span>]]]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_app_distr">rev_app_distr</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id">IHe1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb1</span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typs1</span> τ₁).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_disjoint_env">nnrc_core_type_remove_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span> ++ Γ)); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_rev_l">disjoint_rev_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typs2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_incl">disjoint_incl</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq2</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_free_vars">stratify_aux_free_vars</a></span> <span class="id">eqq1</span> <span class="id">inclb1</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">eqf</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb2</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">inclb2</span>':<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRCVars.html#nnrc_free_vars">nnrc_free_vars</a></span> <span class="id">e2</span>) (<span class="id"><a href="Qcert.Utils.Assoc.html#domain">domain</a></span> <span class="id">l</span> ++ <span class="id">bound_vars</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl_appr">incl_appr</a></span>; <span class="tactic">trivial</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHe2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">inclb2</span>' <span class="id">eqq2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typs2</span> τ₂ <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_disjoint_env">nnrc_core_type_remove_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs1</span>) Γ); <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_rev_l">disjoint_rev_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typs1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#disjoint_incl">disjoint_incl</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="tactic">apply</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nnrc_core_inverter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_bk">stratify1_aux_preserves_types_bk</a></span> <span class="id">eqq</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typs</span> <span class="id">typn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [? [<span class="id">typs</span>' <span class="id">typn</span>']]; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">typs</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">typn</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">typn</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">H4</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">ts1</span> <span class="id">tp1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">H5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">ts2</span> <span class="id">tp2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e1</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_bk">stratify1_aux_preserves_types_bk</a></span> <span class="id">eqq</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typs</span> <span class="id">typn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typs</span>' <span class="id">typn</span>']]; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">typn</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; [<span class="id">qeauto</span> | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">H5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">ts1</span> <span class="id">tp1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> ((<span class="id">v</span>, τ₁)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span>) Γ); <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typs</span>') <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb2</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>; <span class="tactic">destruct</span> <span class="id">inclb2</span> <span class="kwd">as</span> [<span class="id">inclb2</span> <span class="id">inclb3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_bk">stratify1_aux_preserves_types_bk</a></span> <span class="id">eqq</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typs</span> <span class="id">typn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typs</span>' <span class="id">typn</span>']]; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">typn</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; [<span class="id">qeauto</span> | | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">H5</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">ts1</span> <span class="id">tp1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span>) Γ); <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typs</span>') <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb2</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">H6</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">ts1</span> <span class="id">tp1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e3</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">rewrite</span> <span class="id">eqq3</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span>) Γ); <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typs</span>') <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb3</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb</span>; <span class="tactic">destruct</span> <span class="id">inclb</span> <span class="kwd">as</span> [<span class="id">inclb1</span> <span class="id">inclb2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_app_iff">incl_app_iff</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>; <span class="tactic">destruct</span> <span class="id">inclb2</span> <span class="kwd">as</span> [<span class="id">inclb2</span> <span class="id">inclb3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.ListAdd.html#incl_remove">incl_remove</a></span> <span class="kwd">in</span> <span class="id">inclb3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_bk">stratify1_aux_preserves_types_bk</a></span> <span class="id">eqq</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typs</span> <span class="id">typn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typs</span>' <span class="id">typn</span>']]; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">typn</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; [<span class="id">qeauto</span> | | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">H7</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">ts1</span> <span class="id">tp1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e2</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">rewrite</span> <span class="id">eqq2</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> ((<span class="id">v</span>, τ<span class="id">l</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span>) Γ); <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typs</span>') <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb2</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">H8</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">ts1</span> <span class="id">tp1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e3</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcStmt">nnrcStmt</a></span> (<span class="id">v0</span>::<span class="id">bound_vars</span>)); <span class="tactic">intros</span> ? ? <span class="id">eqq3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">rewrite</span> <span class="id">eqq3</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="Qcert.cNNRC.Typing.TcNNRCShadow.html#nnrc_core_type_remove_almost_disjoint_env">nnrc_core_type_remove_almost_disjoint_env</a></span> ((<span class="id">v0</span>,τ<span class="id">r</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> τ<span class="id">defs2</span>) Γ); <span class="tactic">simpl</span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> <span class="id">inn1</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="Qcert.Utils.Assoc.html#domain_rev">domain_rev</a></span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc_to_nnrc_base_free_vars_same">nnrc_to_nnrc_base_free_vars_same</a></span> <span class="kwd">in</span> <span class="id">inn2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#type_substs_domain_eq">type_substs_domain_eq</a></span> <span class="id">typs</span>') <span class="kwd">in</span> <span class="id">inn1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux_nbound_vars">stratify_aux_nbound_vars</a></span> <span class="id">eqq1</span> <span class="id">_</span> <span class="id">inn1</span>); <span class="tactic">intros</span> <span class="id">nbound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">inclb3</span> <span class="id">_</span> <span class="id">inn2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">inclb3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">match_case_in</span> <span class="id">eqq</span>; <span class="tactic">intros</span> ? ? <span class="id">eqq1</span>; <span class="tactic">rewrite</span> <span class="id">eqq1</span> <span class="kwd">in</span> <span class="id">eqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify1_aux_preserves_types_bk">stratify1_aux_preserves_types_bk</a></span> <span class="id">eqq</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">typs</span> <span class="id">typn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs2</span> [<span class="id">typs</span>' <span class="id">typn</span>']]; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#type_NNRCGroupBy_inv">type_NNRCGroupBy_inv</a></span> <span class="kwd">in</span> <span class="id">typn</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">typn</span>' <span class="kwd">as</span> [? [? [? [? [<span class="id">subl</span> <span class="id">type</span>]]]]]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRC.html#NNRCGroupBy">NNRCGroupBy</a></span> <span class="id">s</span> <span class="id">l</span> <span class="id">e</span>) (<span class="id"><a href="Qcert.Data.OperatorsTyping.TGroupBy.html#GroupBy_type">GroupBy_type</a></span> <span class="id">s</span> <span class="id">l</span> <span class="id">x</span> <span class="id">x0</span> <span class="id">x1</span>)); <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#type_NNRCGroupBy">type_NNRCGroupBy</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="mk_expr_from_vars_stratify_aux_preserves_types_bk">mk_expr_from_vars_stratify_aux_preserves_types_bk</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Γ<span class="id">c</span> Γ} (<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>) {τ} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span>  (<span class="id">required_kind</span>:<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#nnrcKind">nnrcKind</a></span>) (<span class="id">bound_vars</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Utils.Var.html#var">var</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="Qcert.cNNRC.Lang.cNNRCVars.html#nnrc_free_vars">nnrc_free_vars</a></span> <span class="id">e</span>) <span class="id">bound_vars</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#mk_expr_from_vars">mk_expr_from_vars</a></span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span>)) τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">e</span> τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3026')">Proof.</div>
<div class="proofscript" id="proof3026">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">required_kind</span> <span class="id">bound_vars</span> <span class="id">inclb</span> <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_preserves_types_bk">mk_expr_from_vars_preserves_types_bk</a></span> <span class="id">typ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [τ<span class="id">defs1</span> [<span class="id">ts1</span> <span class="id">tp1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify_aux">stratify_aux</a></span> <span class="id">e</span> <span class="id">required_kind</span> <span class="id">bound_vars</span>); <span class="tactic">intros</span> ? ? <span class="id">eqq</span>; <span class="tactic">rewrite</span> <span class="id">eqq</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify_aux_preserves_types_bk">stratify_aux_preserves_types_bk</a></span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="stratify_preserves_types_bk">stratify_preserves_types_bk</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Γ<span class="id">c</span> Γ} (<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>) {τ} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify">stratify</a></span> <span class="id">e</span>) τ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">e</span> τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3027')">Proof.</div>
<div class="proofscript" id="proof3027">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify">stratify</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">typ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#mk_expr_from_vars_stratify_aux_preserves_types_bk">mk_expr_from_vars_stratify_aux_preserves_types_bk</a></span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="stratify_preserves_types">stratify_preserves_types</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ<span class="id">c</span> Γ (<span class="id">e</span>: <span class="id"><a href="Qcert.NNRC.Lang.NNRC.html#nnrc">nnrc</a></span>) τ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ <span class="id">e</span> τ &lt;-&gt; <span class="id"><a href="Qcert.NNRC.Typing.TNNRC.html#nnrc_type">nnrc_type</a></span> Γ<span class="id">c</span> Γ (<span class="id"><a href="Qcert.NNRC.Lang.NNRCStratify.html#stratify">stratify</a></span> <span class="id">e</span>) τ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3028')">Proof.</div>
<div class="proofscript" id="proof3028">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify_preserves_types_fw">stratify_preserves_types_fw</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#stratify_preserves_types_bk">stratify_preserves_types_bk</a></span>; <span class="id">qeauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">End</span> <span class="id"><a href="Qcert.NNRC.Typing.TNNRCStratify.html#TNNRCStratify">TNNRCStratify</a></span>.<br/>
<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
