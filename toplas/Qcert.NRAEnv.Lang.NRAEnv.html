
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Qcert.NRAEnv.Lang.NRAEnv</title>
<meta name="description" content="Documentation of Coq module Qcert.NRAEnv.Lang.NRAEnv" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Qcert.NRAEnv.Lang.NRAEnv</h1>
<div class="coq">
<br/>
<div class="doc">NRAEnv is nested relational algebra, extended with operations to
  facilitate encoding of environment manipulation. It serves as the
  main intermediate language for optimization. </div>
<br/>
<div class="doc">NRAEnv is a thin layer over the core language cNRAEnv. As cNRAEnv,
  NRAEnv is combinators-based, i.e., it is evaluated with only a
  static global environment, but no notion of local variables. </div>
<br/>
<div class="doc">Additional operators in NRAEnv can be easily expressed in terms of
  the core cNRAEnv, but are useful for optimization purposes. Those
  operators notably include joins and group-by. </div>
<br/>
<div class="doc">NRAEnv builds on a large body of work from the database
community. For a complete treatment on nested relational algebras, we
refer to Guido Moerkotte's "Building Query Compilers", Chapter 7.
   http://pi3.informatik.uni-mannheim.de/~moer/querycompiler.pdf </div>
<br/>
<div class="doc">Summary:
<ul>
<li>
 Language: NRAEnv (Nested Relational Algebra with Environments)
</li>
<li>
 Based on: "Handling Environments in a Nested Relational Algebra with
  Combinators and an Implementation in a Verified Query Compiler"
  Joshua Auerbach, Martin Hirzel, Louis Mandel, Avraham Shinnar, and
  Jérôme Siméon. SIGMOD'2017.
</li>
<li>
 translating to NRAEnv: LambdaNRA, SQL, OQL, CAMP, cNRAEnv
</li>
<li>
 translating from NRAEnv: NNRC, cNRAEnv </li>
</ul>
</div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html">Compare_dec</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html">EquivDec</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Utils.Utils.html">Utils</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.Data.DataRuntime.html">DataRuntime</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html">cNRAEnv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnvEq.html">cNRAEnvEq</a></span>.<br/>
<br/>
<span class="id">Declare</span> <span class="kwd">Scope</span> <span class="id">nraenv_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="NRAEnv">NRAEnv</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">fruntime</span>:<span class="id"><a href="Qcert.Data.ForeignRuntime.html#foreign_runtime">foreign_runtime</a></span>}.<br/>
&nbsp;&nbsp;<br/>
<h1> Abstract Syntax </h1>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="kwd">Syntax</span>.<br/>
&nbsp;&nbsp;<br/>
<div class="doc">As much as possible, notations are aligned with those of
      S. Cluet and G. Moerkotte. Nested queries in object bases. In
      Proc. Int.  Workshop on Database Programming Languages , pages
      226-242, 1993. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nraenv">nraenv</a></span> : <span class="kwd">Set</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvGetConstant">NRAEnvGetConstant</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id">nraenv</span>                      <span class="docright">(* global variable lookup (<span class="bracket">$$<span class="id">v</span></span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvID">NRAEnvID</a></span> : <span class="id">nraenv</span>                                         <span class="docright">(* current input (<span class="bracket"><span class="id">ID</span></span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvConst">NRAEnvConst</a></span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id">nraenv</span>                              <span class="docright">(* constant data (<span class="bracket"><span class="id">d</span></span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvBinop">NRAEnvBinop</a></span> : <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#binary_op">binary_op</a></span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>     <span class="docright">(* binary operator (<span class="bracket"><span class="id">e</span>₁ ⊠ <span class="id">e</span>₂</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvUnop">NRAEnvUnop</a></span> : <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#unary_op">unary_op</a></span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                 <span class="docright">(* unary operator (<span class="bracket">⊞ <span class="id">e</span></span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvMap">NRAEnvMap</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                    <span class="docright">(* Map <span class="bracket">χ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvMapProduct">NRAEnvMapProduct</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>             <span class="docright">(* dependent Cartesian product <span class="bracket">⋈ᵈ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvProduct">NRAEnvProduct</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                <span class="docright">(* Cartesian product <span class="bracket">×</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvSelect">NRAEnvSelect</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                 <span class="docright">(* Relational selection <span class="bracket">σ</span>  *)</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvDefault">NRAEnvDefault</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                <span class="docright">(* Default for empty collection <span class="bracket">∥</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvEither">NRAEnvEither</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                 <span class="docright">(* case expression  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>           <span class="docright">(* case expression with concatenation  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvApp">NRAEnvApp</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                    <span class="docright">(* composition over the current value <span class="bracket">∘</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvEnv">NRAEnvEnv</a></span> : <span class="id">nraenv</span>                                        <span class="docright">(* current reified environment  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvAppEnv">NRAEnvAppEnv</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                 <span class="docright">(* composition over the reified environment <span class="bracket">∘ᵉ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvMapEnv">NRAEnvMapEnv</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                           <span class="docright">(* map over the reified environment <span class="bracket">χᵉ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvFlatMap">NRAEnvFlatMap</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>                <span class="docright">(* flat map <span class="bracket">Χ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvJoin">NRAEnvJoin</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>         <span class="docright">(* predicate join <span class="bracket"><span class="id">e</span>₂ ⋈⟨<span class="id">e</span>₁⟩ <span class="id">e</span>₃</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvNaturalJoin">NRAEnvNaturalJoin</a></span> : <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>            <span class="docright">(* natural join <span class="bracket"><span class="id">e</span>₁ ⋈ <span class="id">e</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvProject">NRAEnvProject</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>           <span class="docright">(* relational projection <span class="bracket">Π</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvGroupBy">NRAEnvGroupBy</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span> <span class="docright">(* group-by <span class="bracket">Γ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="NRAEnvUnnest">NRAEnvUnnest</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id">nraenv</span> -&gt; <span class="id">nraenv</span>       <span class="docright">(* unnest <span class="bracket">μ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
<br/>
<div class="doc">Equality between two NRAEnv expressions is decidable. </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="nraenv_eqdec">nraenv_eqdec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#EqDec">EqDec</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2351')">Proof.</div>
<div class="proofscript" id="proof2351">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>,  {<span class="id">x</span> = <span class="id">y</span>} + {<span class="id">x</span> &lt;&gt; <span class="id">y</span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">apply</span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#binary_op_eqdec">binary_op_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#unary_op_eqdec">unary_op_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="Qcert.Data.Model.Data.html#data_eqdec">data_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.CoqLibAdd.html#string_eqdec">string_eqdec</a></span> | <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.EquivDec.html#list_eqdec">list_eqdec</a></span>; <span class="tactic">apply</span> <span class="id"><a href="Qcert.Utils.CoqLibAdd.html#string_eqdec">string_eqdec</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="kwd">Syntax</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">nraenv_cases</span>" <span class="id">tactic</span>(<span class="id">first</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">first</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvGetConstant</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvID</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvConst</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvBinop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvUnop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvMap</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvMapProduct</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvProduct</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvSelect</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvDefault</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvEither</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvEitherConcat</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvApp</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvEnv</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvAppEnv</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvMapEnv</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvFlatMap</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvJoin</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvNaturalJoin</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvProject</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvGroupBy</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvUnnest</span>"%<span class="id">string</span>].<br/>
&nbsp;&nbsp;<br/>
<h1> Macros </h1>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnv.Macros">Macros</a></span>.<br/>
<div class="doc">All the additional operators in NRAEnv are defined in terms of
    the cNRAEnv. </div>
&nbsp;&nbsp;<br/>
<h2> Joins </h2>
<br/>
<div class="doc">Predicate join <span class="bracket"><span class="id">e</span>₂ ⋈⟨<span class="id">e</span>₁) <span class="id">e</span>₃ = σ⟨<span class="id">e</span>₁⟩(<span class="id">e</span>₂ × <span class="id">e</span>₃)</span> </div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvJoin">macro_cNRAEnvJoin</a></span> (<span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span> <span class="id">e1</span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span> <span class="id">e2</span> <span class="id">e3</span>)).<br/>
<br/>
<div class="doc">Semi join <span class="bracket"><span class="id">e</span>₂ ⋉⟨<span class="id">e</span>₁) <span class="id">e</span>₁ = σ⟨σ⟨<span class="id">e</span>₁⟩({<span class="id">ID</span>} × <span class="id">e</span>₃) ≠ {}⟩(<span class="id">e</span>₂)</span> </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvSemiJoin">macro_cNRAEnvSemiJoin</a></span> (<span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpNeg">OpNeg</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpEqual">OpEqual</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span> <span class="id">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpBag">OpBag</a></span>) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvConst">cNRAEnvConst</a></span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)))) <span class="id">e2</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvAntiJoin">macro_cNRAEnvAntiJoin</a></span> (<span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpEqual">OpEqual</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span> <span class="id">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpBag">OpBag</a></span>) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e3</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvConst">cNRAEnvConst</a></span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>))) <span class="id">e2</span>.<br/>
<br/>
<div class="doc">Natural join <span class="bracket"><span class="id">e</span>₁ ⋈ <span class="id">e</span>₂</span> </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvNaturalJoin">macro_cNRAEnvNaturalJoin</a></span> (<span class="id">e1</span> <span class="id">e2</span> : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpFlatten">OpFlatten</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpRecMerge">OpRecMerge</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "<span class="id">t1</span>") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "<span class="id">t2</span>") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> "<span class="id">t1</span>") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> "<span class="id">t2</span>") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e2</span>))).<br/>
<br/>
<h2> Map operations </h2>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="map_add_rec">map_add_rec</a></span> (<span class="id">s</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e1</span> <span class="id">e2</span> : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpRecConcat">OpRecConcat</a></span>) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> <span class="id">s</span>)) <span class="id">e1</span>)) <span class="id">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="map_to_rec">map_to_rec</a></span> (<span class="id">s</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span> : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> <span class="id">s</span>) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvFlatMap">macro_cNRAEnvFlatMap</a></span> (<span class="id">e1</span> <span class="id">e2</span> : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpFlatten">OpFlatten</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> <span class="id">e1</span> <span class="id">e2</span>).<br/>
&nbsp;&nbsp;<br/>
<h2> Projection </h2>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvProject">macro_cNRAEnvProject</a></span> (<span class="id">fields</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecProject">OpRecProject</a></span> <span class="id">fields</span>) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="project_remove">project_remove</a></span> (<span class="id">s</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecRemove">OpRecRemove</a></span> <span class="id">s</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e</span>.<br/>
<br/>
<h2> Renaming </h2>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="map_rename_rec">map_rename_rec</a></span> (<span class="id">s1</span> <span class="id">s2</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpRecConcat">OpRecConcat</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> <span class="id">s2</span>)) ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> <span class="id">s1</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecRemove">OpRecRemove</a></span> <span class="id">s1</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)) <span class="id">e</span>.<br/>
<br/>
<h2> Grouping </h2>
<br/>
<div class="doc">Defining group-by in terms of the core is more tricky, but is
      possible. You need to do two passes, and compare elements with
      the same set of attribute names which means you need to
      encapsulate each branch with distinct record names. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Import</span> <span class="id">ListNotations</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="group_by_no_env">group_by_no_env</a></span> (<span class="id">g</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">sl</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpRecConcat">OpRecConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "1") (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "2") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> <span class="id">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "3") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpEqual">OpEqual</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecProject">OpRecProject</a></span> <span class="id">sl</span>) (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "1") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecProject">OpRecProject</a></span> <span class="id">sl</span>) (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "3") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpBag">OpBag</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "2") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "4") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>))))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpBag">OpBag</a></span> (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> "4") (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#map_to_rec">map_to_rec</a></span> "3" <span class="id">e</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#map_to_rec">map_to_rec</a></span> "2" (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#map_to_rec">map_to_rec</a></span> "1" (<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDistinct">OpDistinct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvProject">macro_cNRAEnvProject</a></span> <span class="id">sl</span> <span class="id">e</span>))))).<br/>
<br/>
<div class="doc">This is an alternative definition that isn't quite as
        inefficient. It stores the result of the input operator in the
        environment so it isn't computed twice. This is still
        quadratic. </div>
&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvGroupBy">macro_cNRAEnvGroupBy</a></span> (<span class="id">g</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">sl</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">op_pregroup</span> := <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "$<span class="id">pregroup</span>") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEnv">cNRAEnvEnv</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvAppEnv">cNRAEnvAppEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpRecConcat">OpRecConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> <span class="id">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvAppEnv">cNRAEnvAppEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpEqual">OpEqual</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecProject">OpRecProject</a></span> <span class="id">sl</span>) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> "$<span class="id">key</span>") <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEnv">cNRAEnvEnv</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">op_pregroup</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id"><a href="Qcert.Data.Operators.BinaryOperators.html#OpRecConcat">OpRecConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> "$<span class="id">key</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEnv">cNRAEnvEnv</a></span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDistinct">OpDistinct</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvProject">macro_cNRAEnvProject</a></span> <span class="id">sl</span> <span class="id">op_pregroup</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> "$<span class="id">pregroup</span>") <span class="id">e</span>).<br/>
<br/>
<h2> Unnesting </h2>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="unnest_one">unnest_one</a></span> (<span class="id">s</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecRemove">OpRecRemove</a></span> <span class="id">s</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMapProduct">cNRAEnvMapProduct</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> <span class="id">s</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>) <span class="id">e</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="macro_cNRAEnvUnnest">macro_cNRAEnvUnnest</a></span> (<span class="id">a</span> <span class="id">b</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">e</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRecRemove">OpRecRemove</a></span> <span class="id">a</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMapProduct">cNRAEnvMapProduct</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> ((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpRec">OpRec</a></span> <span class="id">b</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> (<span class="id"><a href="Qcert.Data.Operators.UnaryOperators.html#OpDot">OpDot</a></span> <span class="id">a</span>)) <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span>)) <span class="id">e</span>).<br/>
<br/>
<h2> Macro expansion </h2>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> (<span class="id">e</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) : <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">s</span> =&gt; <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvGetConstant">cNRAEnvGetConstant</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> =&gt; <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span> =&gt; <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvConst">cNRAEnvConst</a></span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">b</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> <span class="id">e1</span> =&gt; <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id">u</span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapProduct">NRAEnvMapProduct</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMapProduct">cNRAEnvMapProduct</a></span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvDefault">cNRAEnvDefault</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">opl</span> <span class="id">opr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEither">cNRAEnvEither</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">opl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">opr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEitherConcat">cNRAEnvEitherConcat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvApp">cNRAEnvApp</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEnv">cNRAEnvEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvAppEnv">cNRAEnvAppEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMapEnv">cNRAEnvMapEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvFlatMap">NRAEnvFlatMap</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvFlatMap">macro_cNRAEnvFlatMap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvJoin">NRAEnvJoin</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">e3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvJoin">macro_cNRAEnvJoin</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvNaturalJoin">NRAEnvNaturalJoin</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvNaturalJoin">macro_cNRAEnvNaturalJoin</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">nraenv_to_nraenv_core</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProject">NRAEnvProject</a></span> <span class="id">ls</span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvProject">macro_cNRAEnvProject</a></span> <span class="id">ls</span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGroupBy">NRAEnvGroupBy</a></span> <span class="id">s</span> <span class="id">ls</span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvGroupBy">macro_cNRAEnvGroupBy</a></span> <span class="id">s</span> <span class="id">ls</span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnnest">NRAEnvUnnest</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#macro_cNRAEnvUnnest">macro_cNRAEnvUnnest</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">nraenv_to_nraenv_core</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h1> Round-tripping </h1>
<br/>
<div class="doc">Just checking that cNRAEnv can be lifted back to NRAEnv, and
        showing that we can round-trip. </div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nraenv_core_to_nraenv">nraenv_core_to_nraenv</a></span> (<span class="id">a</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) : <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">a</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvGetConstant">cNRAEnvGetConstant</a></span> <span class="id">s</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvID">cNRAEnvID</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvConst">cNRAEnvConst</a></span> <span class="id">d</span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvBinop">cNRAEnvBinop</a></span> <span class="id">b</span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">b</span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvUnop">cNRAEnvUnop</a></span> <span class="id">u</span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">u</span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMap">cNRAEnvMap</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMapProduct">cNRAEnvMapProduct</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapProduct">NRAEnvMapProduct</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvProduct">cNRAEnvProduct</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvSelect">cNRAEnvSelect</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvDefault">cNRAEnvDefault</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEither">cNRAEnvEither</a></span> <span class="id">opl</span> <span class="id">opr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">opl</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">opr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEitherConcat">cNRAEnvEitherConcat</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvApp">cNRAEnvApp</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvEnv">cNRAEnvEnv</a></span> =&gt; <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvAppEnv">cNRAEnvAppEnv</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>) (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#cNRAEnvMapEnv">cNRAEnvMapEnv</a></span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> (<span class="id">nraenv_core_to_nraenv</span> <span class="id">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Round tripping between NRAEnv and cNRAEnv is a purely
    syntactic remark. I.e., you obtain the exact same AST. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nraenv_roundtrip">nraenv_roundtrip</a></span> (<span class="id">a</span>:<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core">nraenv_core</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_core_to_nraenv">nraenv_core_to_nraenv</a></span> <span class="id">a</span>)) = <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2352')">Proof.</div>
<div class="proofscript" id="proof2352">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">a</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id">IHa1</span>; <span class="tactic">rewrite</span> <span class="id">IHa2</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHa3</span>; <span class="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHa</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Macros">Macros</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnv.Semantics">Semantics</a></span>.<br/>
<div class="doc">Part of the context is fixed for the rest of the development:
<ul>
<li>
 <span class="bracket"><span class="id">h</span></span> is the brand relation
</li>
<li>
 <span class="bracket"><span class="id">constant_env</span></span> is the global environment </li>
</ul>
</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>*<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">constant_env</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>*<span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>)).<br/>
<br/>
<h2> Denotational Semantics </h2>
<br/>
<div class="doc">The semantics is defined using the main judgment <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢
    〚<span class="id">e</span>〛⇓ <span class="id">d</span>'</span> (<span class="bracket"><span class="id">nraenv_sem</span></span>) where <span class="bracket">Γ<span class="id">c</span></span> is the global
    environment, <span class="bracket">γ</span> is the reified input environment, <span class="bracket"><span class="id">d</span></span> is the
    input value, <span class="bracket"><span class="id">e</span></span> the cNRAEnv expression and <span class="bracket"><span class="id">d</span>'</span> the resulting
    value. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">The auxiliary judgment <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛χ ⇓ {<span class="id">c</span>₂}</span>
    (<span class="bracket"><span class="id">nraenv_sem_map</span></span>) is used in the definition of the map <span class="bracket">χ</span>
    operator. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">The auxiliary judgment <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛⋈ᵈ ⇓ {<span class="id">c</span>₂}</span>
    (<span class="bracket"><span class="id">nra_map_product_select</span></span>) is used in the definition of the
    dependant product <span class="bracket">⋈ᵈ</span> operator. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">The auxiliary judgment <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛σ ⇓ {<span class="id">c</span>₂}</span>
    (<span class="bracket"><span class="id">nraenv_sem_select</span></span>) is used in the definition of the
    selection <span class="bracket">σ</span> operator. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<div class="doc">The auxiliary judgment <span class="bracket">Γ<span class="id">c</span> ; {<span class="id">c</span>₁} ; <span class="id">d</span> ⊢〚<span class="id">e</span>〛χᵉ ⇓ {<span class="id">c</span>₂}</span>
    (<span class="bracket"><span class="id">nraenv_sem_map_env</span></span>) is used in the definition of the map
    over environment <span class="bracket">χᵉ</span> operator. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnv.Semantics.Denotation">Denotation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Inductive</span> <span class="id"><a name="nraenv_sem">nraenv_sem</a></span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvGetConstant">sem_NRAEnvGetConstant</a></span> : <span class="kwd">forall</span> <span class="id">v</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Utils.Bindings.html#edot">edot</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> <span class="id">v</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d1</span> -&gt;                   <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span>(<span class="id">v</span>) = <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">v</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span>          <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚$$<span class="id">v</span>〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvID">sem_NRAEnvID</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> <span class="id">env</span> <span class="id">d</span> <span class="id">d</span>                        <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢ <span class="id">ID</span> ⇓ <span class="id">d</span></span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvConst">sem_NRAEnvConst</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Data.Model.DataNorm.html#normalize_data">normalize_data</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id">d1</span> = <span class="id">d2</span> -&gt;                        <span class="docright">(*   <span class="bracket"><span class="id">norm</span>(<span class="id">d</span>₁) = <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">d1</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span>               <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">d</span>₁〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvBinop">sem_NRAEnvBinop</a></span> : <span class="kwd">forall</span> <span class="id">bop</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> <span class="id">d2</span> <span class="id">d3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> -&gt;                          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span> -&gt;                          <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Data.Operators.BinaryOperatorsSem.html#binary_op_eval">binary_op_eval</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id">bop</span> <span class="id">d1</span> <span class="id">d2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d3</span> -&gt;            <span class="docright">(* ∧ <span class="bracket"><span class="id">d</span>₁ ⊠ <span class="id">d</span>₂ = <span class="id">d</span>₃</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">bop</span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d3</span>        <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁ ⊠ <span class="id">e</span>₂〛⇓ <span class="id">d</span>₃</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvUnop">sem_NRAEnvUnop</a></span> : <span class="kwd">forall</span> <span class="id">uop</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> -&gt;                           <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Data.Operators.UnaryOperatorsSem.html#unary_op_eval">unary_op_eval</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id">uop</span> <span class="id">d1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">d2</span> -&gt;                <span class="docright">(* ∧ <span class="bracket">⊞ <span class="id">d</span>₁ = <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">uop</span> <span class="id">e</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span>             <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚⊞ <span class="id">e</span>〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMap">sem_NRAEnvMap</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c1</span>) -&gt;                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ {<span class="id">c</span>₁}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;                     <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>₂〛χ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">e2</span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c2</span>)      <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚χ⟨<span class="id">e</span>₂⟩(<span class="id">e</span>₁)〛⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMapProduct">sem_NRAEnvMapProduct</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c1</span>) -&gt;                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ {<span class="id">c</span>₁}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_product</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;             <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>₂〛⋈ᵈ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚⋈ᵈ⟨<span class="id">e</span>₂⟩(<span class="id">e</span>₁)〛⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapProduct">NRAEnvMapProduct</a></span> <span class="id">e2</span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvProduct_empty">sem_NRAEnvProduct_empty</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span>,        <span class="docright">(* Does not evaluate <span class="bracket"><span class="id">e</span>₂</span> if <span class="bracket"><span class="id">e</span>₁</span> is empty. This facilitates translation to cNNRC  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) -&gt;                 <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁ × <span class="id">e</span>₂〛⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvProduct_nonEmpty">sem_NRAEnvProduct_nonEmpty</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">c3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c1</span>) -&gt;                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ {<span class="id">c</span>₁}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">c1</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> -&gt;                                       <span class="docright">(* ∧ <span class="bracket">{<span class="id">c</span>₁} ≠ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c2</span>) -&gt;                  <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂〛⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Data.Operators.Iterators.html#product_sem">product_sem</a></span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">c3</span> -&gt;                            <span class="docright">(* ∧ <span class="bracket">{<span class="id">c</span>₁} × {<span class="id">c</span>₂} ⇓ {<span class="id">c</span>₃}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁ × <span class="id">e</span>₂〛⇓ {<span class="id">c</span>₃}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c3</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvSelect">sem_NRAEnvSelect</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c1</span>) -&gt;                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ {<span class="id">c</span>₁}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_select</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;                  <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>₂〛σ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚σ⟨<span class="id">e</span>₂⟩(<span class="id">e</span>₁)〛⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">e2</span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvDefault_empty">sem_NRAEnvDefault_empty</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span>  (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) -&gt;                <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span> -&gt;                          <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span>          <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁ ∥ <span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvDefault_not_empty">sem_NRAEnvDefault_not_empty</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> -&gt;                          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">d1</span> &lt;&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> -&gt;                                 <span class="docright">(* ∧ <span class="bracket"><span class="id">d</span>₁ ≠ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span>          <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁ ∥ <span class="id">e</span>₂〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvEither_left">sem_NRAEnvEither_left</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> -&gt;                          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; (<span class="id">dleft</span> <span class="id">d</span>) ⊢〚<span class="id">either</span> <span class="id">e</span>₁ <span class="id">e</span>₂〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dleft">dleft</a></span> <span class="id">d</span>) <span class="id">d1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvEither_right">sem_NRAEnvEither_right</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span> -&gt;                          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; (<span class="id">dright</span> <span class="id">d</span>) ⊢〚<span class="id">either</span> <span class="id">e</span>₁ <span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dright">dright</a></span> <span class="id">d</span>) <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvEitherConcat_left">sem_NRAEnvEitherConcat_left</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dleft">dleft</a></span> (<span class="id"><a href="Qcert.Data.Model.Data.html#drec">drec</a></span> <span class="id">r1</span>)) -&gt;           <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ (<span class="id">dleft</span> [<span class="id">r</span>₁])</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#drec">drec</a></span> <span class="id">r2</span>) -&gt;                   <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂〛⇓ [<span class="id">r</span>₂]</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">either</span>⊕ <span class="id">e</span>₁ <span class="id">e</span>₂〛⇓ (<span class="id">dleft</span> [<span class="id">r</span>₁]⊕[<span class="id">r</span>₂]</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.Data.Model.Data.html#dleft">dleft</a></span> (<span class="id"><a href="Qcert.Data.Model.Data.html#drec">drec</a></span> (<span class="id"><a href="Qcert.Utils.Bindings.html#rec_concat_sort">rec_concat_sort</a></span> <span class="id">r1</span> <span class="id">r2</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvEitherConcat_right">sem_NRAEnvEitherConcat_right</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dright">dright</a></span> (<span class="id"><a href="Qcert.Data.Model.Data.html#drec">drec</a></span> <span class="id">r1</span>)) -&gt;          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ (<span class="id">dright</span> [<span class="id">r</span>₁])</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#drec">drec</a></span> <span class="id">r2</span>) -&gt;                   <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂〛⇓ [<span class="id">r</span>₂]</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">either</span>⊕ <span class="id">e</span>₁ <span class="id">e</span>₂〛⇓ (<span class="id">dright</span> [<span class="id">r</span>₁]⊕[<span class="id">r</span>₂]</span>)  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> <span class="id">e1</span> <span class="id">e2</span>) <span class="id">env</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.Data.Model.Data.html#dright">dright</a></span> (<span class="id"><a href="Qcert.Data.Model.Data.html#drec">drec</a></span> (<span class="id"><a href="Qcert.Utils.Bindings.html#rec_concat_sort">rec_concat_sort</a></span> <span class="id">r1</span> <span class="id">r2</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvApp">sem_NRAEnvApp</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> <span class="id">d1</span> -&gt;                          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ <span class="id">d</span>₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> -&gt;                         <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span>₁ ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">e2</span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span>              <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂ ∘ <span class="id">e</span>₁〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvEnv">sem_NRAEnvEnv</a></span> : <span class="kwd">forall</span> <span class="id">env</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> <span class="id">env</span> <span class="id">d</span> <span class="id">env</span>                     <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢ <span class="id">ENV</span> ⇓ γ</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvAppEnv">sem_NRAEnvAppEnv</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">env1</span> <span class="id">d2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> <span class="id">env1</span> -&gt;                        <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ γ₁</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e2</span> <span class="id">env1</span> <span class="id">d</span> <span class="id">d2</span> -&gt;                         <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ₁ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">e2</span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d</span> <span class="id">d2</span>           <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₂ ∘ᵉ <span class="id">e</span>₁〛⇓ <span class="id">d</span>₂</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMapEnv">sem_NRAEnvMapEnv</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">c1</span> <span class="id">d</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_env</span> <span class="id">e</span> <span class="id">c1</span> <span class="id">d</span> <span class="id">c2</span> -&gt;                    <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; {<span class="id">c</span>₁} ; <span class="id">d</span> ⊢〚<span class="id">e</span>〛χᵉ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span>                                         <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; {<span class="id">c</span>₁} ; <span class="id">d</span> ⊢〚χᵉ⟨<span class="id">e</span>⟩〛⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">e</span>) (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c1</span>) <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvFlatMap">sem_NRAEnvFlatMap</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">d</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c1</span>) -&gt;                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚<span class="id">e</span>₁〛⇓ {<span class="id">c</span>₁}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_flat_map</span> <span class="id">e2</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;                <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>₂〛Χ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvFlatMap">NRAEnvFlatMap</a></span> <span class="id">e2</span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c2</span>)      <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span> ⊢〚Χ⟨<span class="id">e</span>₂⟩(<span class="id">e</span>₁)〛⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="nraenv_sem_map">nraenv_sem_map</a></span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMap_empty">sem_NRAEnvMap_empty</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map</span> <span class="id">e</span> <span class="id">env</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>                       <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; {} ⊢〚<span class="id">e</span>〛χ ⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMap_cons">sem_NRAEnvMap_cons</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">c1</span> <span class="id">d2</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> -&gt;                          <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span>₁ ⊢〚<span class="id">e</span>〛⇓ <span class="id">d</span>₂</span>   *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map</span> <span class="id">e</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;                      <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛χ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map</span> <span class="id">e</span> <span class="id">env</span> (<span class="id">d1</span>::<span class="id">c1</span>) (<span class="id">d2</span>::<span class="id">c2</span>)             <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">d</span>₁::<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛χ ⇓ {<span class="id">d</span>₂::<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="nraenv_sem_map_product">nraenv_sem_map_product</a></span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMapProduct_empty">sem_NRAEnvMapProduct_empty</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_product</span> <span class="id">e</span> <span class="id">env</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>               <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; {} ⊢〚<span class="id">e</span>〛⋈ᵈ ⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMapProduct_cons">sem_NRAEnvMapProduct_cons</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">c3</span> <span class="id">c4</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c3</span>) -&gt;                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span>₁ ⊢〚<span class="id">e</span>〛⋈ᵈ ⇓ {<span class="id">c</span>₃}</span>   *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.Data.Operators.Iterators.html#map_concat_sem">map_concat_sem</a></span> <span class="id">d1</span> <span class="id">c3</span> <span class="id">c4</span> -&gt;                         <span class="docright">(* ∧ <span class="bracket"><span class="id">d</span>₁ χ⊕ <span class="id">c</span>₃ ⇓ <span class="id">c</span>₄</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_product</span> <span class="id">e</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;              <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛⋈ᵈ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_product</span> <span class="id">e</span> <span class="id">env</span> (<span class="id">d1</span>::<span class="id">c1</span>) (<span class="id">c4</span> ++ <span class="id">c2</span>)   <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">d</span>₁::<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛⋈ᵈ ⇓ {<span class="id">c</span>₄}∪{<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="nraenv_sem_select">nraenv_sem_select</a></span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvSelect_empty">sem_NRAEnvSelect_empty</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_select</span> <span class="id">e</span> <span class="id">env</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>                    <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; {} ⊢〚<span class="id">e</span>〛σ ⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvSelect_true">sem_NRAEnvSelect_true</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) -&gt;                <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span>₁ ⊢〚<span class="id">e</span>〛σ ⇓ <span class="id">true</span></span>   *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_select</span> <span class="id">e</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;                   <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛σ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_select</span> <span class="id">e</span> <span class="id">env</span> (<span class="id">d1</span>::<span class="id">c1</span>) (<span class="id">d1</span>::<span class="id">c2</span>)          <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">d</span>₁::<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛σ ⇓ {<span class="id">d</span>₁::<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvSelect_false">sem_NRAEnvSelect_false</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dbool">dbool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) -&gt;               <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span>₁ ⊢〚<span class="id">e</span>〛σ ⇓ <span class="id">false</span></span>   *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_select</span> <span class="id">e</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;                   <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛σ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_select</span> <span class="id">e</span> <span class="id">env</span> (<span class="id">d1</span>::<span class="id">c1</span>) <span class="id">c2</span>                <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">d</span>₁::<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛σ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="nraenv_sem_map_env">nraenv_sem_map_env</a></span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMapEnv_empty">sem_NRAEnvMapEnv_empty</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_env</span> <span class="id">e</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">d</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>                     <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; {} ; <span class="id">d</span> ⊢〚<span class="id">e</span>〛χᵉ ⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvMapEnv_cons">sem_NRAEnvMapEnv_cons</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">d1</span> <span class="id">d</span> <span class="id">c1</span> <span class="id">d2</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e</span> <span class="id">d1</span> <span class="id">d</span> <span class="id">d2</span> -&gt;                            <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; <span class="id">d</span>₁ ; <span class="id">d</span> ⊢〚<span class="id">e</span>〛⇓ <span class="id">d</span>₂</span>   *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_env</span> <span class="id">e</span> <span class="id">c1</span> <span class="id">d</span> <span class="id">c2</span> -&gt;                    <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; {<span class="id">c</span>₁} ; <span class="id">d</span> ⊢〚<span class="id">e</span>〛χᵉ ⇓ {<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_map_env</span> <span class="id">e</span> (<span class="id">d1</span>::<span class="id">c1</span>) <span class="id">d</span> (<span class="id">d2</span>::<span class="id">c2</span>)           <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; {<span class="id">d</span>₁::<span class="id">c</span>₁} ; <span class="id">d</span> ⊢〚<span class="id">e</span>〛χᵉ ⇓ {<span class="id">d</span>₂::<span class="id">c</span>₂}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> <span class="id"><a name="nraenv_sem_flat_map">nraenv_sem_flat_map</a></span>: <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span> -&gt; <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvFlatMap_empty">sem_NRAEnvFlatMap_empty</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_flat_map</span> <span class="id">e</span> <span class="id">env</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; {} ⊢〚<span class="id">e</span>〛Χ ⇓ {}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a name="sem_NRAEnvFlatMap_cons">sem_NRAEnvFlatMap_cons</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">c3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem</span> <span class="id">e</span> <span class="id">env</span> <span class="id">d1</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#dcoll">dcoll</a></span> <span class="id">c2</span>) -&gt;                  <span class="docright">(*   <span class="bracket">Γ<span class="id">c</span> ; γ ; <span class="id">d</span>₁ ⊢〚<span class="id">e</span>〛⇓ {<span class="id">c</span>₂}</span>   *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_flat_map</span> <span class="id">e</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c3</span> -&gt;                 <span class="docright">(* ∧ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛Χ ⇓ {<span class="id">c</span>₃}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_sem_flat_map</span> <span class="id">e</span> <span class="id">env</span> (<span class="id">d1</span>::<span class="id">c1</span>) (<span class="id">c2</span>++<span class="id">c3</span>)        <span class="docright">(* ⇒ <span class="bracket">Γ<span class="id">c</span> ; γ ; {<span class="id">d</span>₁::<span class="id">c</span>₁} ⊢〚<span class="id">e</span>〛Χ ⇓ {<span class="id">c</span>₂}++{<span class="id">c</span>₃}</span>  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.Denotation">Denotation</a></span>.<br/>
<br/>
<h1> Evaluation Semantics </h1>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnv.Semantics.Evaluation">Evaluation</a></span>.<br/>
<div class="doc">Evaluation semantics is obtained using macro expansion. </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nraenv_eval">nraenv_eval</a></span> (<span class="id">e</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) (<span class="id">env</span>:<span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>) (<span class="id">x</span>:<span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_eval">nraenv_core_eval</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e</span>) <span class="id">env</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.Evaluation">Evaluation</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnv.Semantics.MacroCorrect">MacroCorrect</a></span>.<br/>
<div class="doc">Proof that macro expension preserves semantics. </div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nraenv_macro_map_correct">nraenv_macro_map_correct</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem">nraenv_sem</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem">nraenv_core_sem</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem_map">nraenv_sem_map</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem_map">nraenv_core_sem_map</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2353')">Proof.</div>
<div class="proofscript" id="proof2353">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">c2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">c1</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nraenv_macro_map_product_correct">nraenv_macro_map_product_correct</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem">nraenv_sem</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem">nraenv_core_sem</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem_map_product">nraenv_sem_map_product</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem_map_product">nraenv_core_sem_map_product</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2354')">Proof.</div>
<div class="proofscript" id="proof2354">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">c2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">c1</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nraenv_macro_select_correct">nraenv_macro_select_correct</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem">nraenv_sem</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem">nraenv_core_sem</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem_select">nraenv_sem_select</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem_select">nraenv_core_sem_select</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">c1</span> <span class="id">c2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2355')">Proof.</div>
<div class="proofscript" id="proof2355">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">c2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">c1</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nraenv_macro_map_env_correct">nraenv_macro_map_env_correct</a></span> <span class="id">e1</span> <span class="id">c1</span> <span class="id">d1</span> <span class="id">c2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> : <span class="id"><a href="Qcert.Data.Model.Data.html#data">data</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem">nraenv_sem</a></span> <span class="id">e1</span> <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem">nraenv_core_sem</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">env</span> <span class="id">d1</span> <span class="id">d2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_sem_map_env">nraenv_sem_map_env</a></span> <span class="id">e1</span> <span class="id">c1</span> <span class="id">d1</span> <span class="id">c2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_sem_map_env">nraenv_core_sem_map_env</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.h">h</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.constant_env">constant_env</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">e1</span>) <span class="id">c1</span> <span class="id">d1</span> <span class="id">c2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2356')">Proof.</div>
<div class="proofscript" id="proof2356">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">c2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">c1</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">clear</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics.MacroCorrect">MacroCorrect</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Semantics">Semantics</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<h1> Toplevel </h1>
&nbsp;&nbsp;<br/>
<div class="doc">Top-level evaluation is used externally by the Q*cert
    compiler. It takes an NRAEnv expression and a global environment
    as input. The initial current environment is set to an empty
    record, and the initial current value to unit. </div>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnv.Top">Top</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> (<span class="id">h</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>*<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="nraenv_eval_top">nraenv_eval_top</a></span> (<span class="id">q</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) (<span class="id">env</span>:<span class="id"><a href="Qcert.Data.Model.Data.html#bindings">bindings</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_eval">nraenv_eval</a></span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Top.h">h</a></span> (<span class="id"><a href="Qcert.Utils.Bindings.html#rec_sort">rec_sort</a></span> <span class="id">env</span>) <span class="id">q</span> (<span class="id"><a href="Qcert.Data.Model.Data.html#drec">drec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="Qcert.Data.Model.Data.html#dunit">dunit</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.Top">Top</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Section</span> <span class="id"><a name="NRAEnv.FreeVars">FreeVars</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Fixpoint</span> <span class="id"><a name="nraenv_free_vars">nraenv_free_vars</a></span> (<span class="id">q</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGetConstant">NRAEnvGetConstant</a></span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvID">NRAEnvID</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvConst">NRAEnvConst</a></span> <span class="id">rd</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvBinop">NRAEnvBinop</a></span> <span class="id">_</span> <span class="id">q1</span> <span class="id">q2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnop">NRAEnvUnop</a></span> <span class="id">_</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMap">NRAEnvMap</a></span> <span class="id">q2</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapProduct">NRAEnvMapProduct</a></span> <span class="id">q2</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProduct">NRAEnvProduct</a></span> <span class="id">q1</span> <span class="id">q2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvSelect">NRAEnvSelect</a></span> <span class="id">q2</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEither">NRAEnvEither</a></span> <span class="id">ql</span> <span class="id">qr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">ql</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">qr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEitherConcat">NRAEnvEitherConcat</a></span> <span class="id">q1</span> <span class="id">q2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvDefault">NRAEnvDefault</a></span> <span class="id">q1</span> <span class="id">q2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvApp">NRAEnvApp</a></span> <span class="id">q2</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvEnv">NRAEnvEnv</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvAppEnv">NRAEnvAppEnv</a></span> <span class="id">q2</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvMapEnv">NRAEnvMapEnv</a></span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvFlatMap">NRAEnvFlatMap</a></span> <span class="id">q2</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvJoin">NRAEnvJoin</a></span> <span class="id">q3</span> <span class="id">q1</span> <span class="id">q2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvNaturalJoin">NRAEnvNaturalJoin</a></span> <span class="id">q1</span> <span class="id">q2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span> ++ <span class="id">nraenv_free_vars</span> <span class="id">q2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvProject">NRAEnvProject</a></span> <span class="id">_</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvGroupBy">NRAEnvGroupBy</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnvUnnest">NRAEnvUnnest</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">q1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nraenv_free_vars</span> <span class="id">q1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="nraenv_free_vars_as_core">nraenv_free_vars_as_core</a></span> (<span class="id">q</span>:<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv">nraenv</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="Qcert.cNRAEnv.Lang.cNRAEnv.html#nraenv_core_free_vars">nraenv_core_free_vars</a></span> (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_to_nraenv_core">nraenv_to_nraenv_core</a></span> <span class="id">q</span>) = <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_free_vars">nraenv_free_vars</a></span> <span class="id">q</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2357')">Proof.</div>
<div class="proofscript" id="proof2357">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">q</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span>[<span class="tactic">rewrite</span> <span class="id">IHq1</span>; <span class="tactic">rewrite</span> <span class="id">IHq2</span>; <span class="tactic">reflexivity</span>|<span class="tactic">rewrite</span> <span class="id">IHq</span>;<span class="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHq1</span>; <span class="tactic">rewrite</span> <span class="id">IHq2</span>; <span class="tactic">rewrite</span> <span class="id">IHq3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_assoc">app_assoc</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHq1</span>; <span class="tactic">rewrite</span> <span class="id">IHq2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="tactic">rewrite</span> <span class="id">IHq</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="tactic">rewrite</span> <span class="id">IHq</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>; <span class="tactic">rewrite</span> <span class="id">IHq</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv.FreeVars">FreeVars</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#NRAEnv">NRAEnv</a></span>.<br/>
<br/>
<span class="kwd">Delimit</span> <span class="kwd">Scope</span> <span class="id">nraenv_scope</span> <span class="kwd">with</span> <span class="id">nraenv</span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">h</span> ⊢ <span class="id">EOp</span> @ₓ <span class="id">x</span> ⊣ <span class="id">c</span> ; <span class="id">env</span>" := (<span class="id"><a href="Qcert.NRAEnv.Lang.NRAEnv.html#nraenv_eval">nraenv_eval</a></span> <span class="id">h</span> <span class="id">c</span> <span class="id">EOp</span> <span class="id">env</span> <span class="id">x</span>) (<span class="tactic">at</span> <span class="id">level</span> 10): <span class="id">nraenv_scope</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">nraenv_cases</span>" <span class="id">tactic</span>(<span class="id">first</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span>;<br/>
&nbsp;&nbsp;[ <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvGetConstant</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvID</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvConst</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvBinop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvUnop</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvMap</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvMapProduct</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvProduct</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvSelect</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvDefault</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvEither</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvEitherConcat</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvApp</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvEnv</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvAppEnv</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvMapEnv</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvFlatMap</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvJoin</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvNaturalJoin</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvProject</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvGroupBy</span>"%<span class="id">string</span><br/>
&nbsp;&nbsp;| <span class="id">Case_aux</span> <span class="id">c</span> "<span class="id">NRAEnvUnnest</span>"%<span class="id">string</span>].<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
